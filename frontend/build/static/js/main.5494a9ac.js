/*! For license information please see main.5494a9ac.js.LICENSE.txt */
(()=>{var e={7321:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createBrowserHistory:()=>N,createHashHistory:()=>A,createLocation:()=>g,createMemoryHistory:()=>P,createPath:()=>m,locationsAreEqual:()=>v,parsePath:()=>f});var i=n(8168);function r(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}const a=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],a=t&&t.split("/")||[],o=e&&r(e),l=t&&r(t),c=o||l;if(e&&r(e)?a=i:i.length&&(a.pop(),a=a.concat(i)),!a.length)return"/";if(a.length){var u=a[a.length-1];n="."===u||".."===u||""===u}else n=!1;for(var d=0,h=a.length;h>=0;h--){var p=a[h];"."===p?s(a,h):".."===p?(s(a,h),d++):d&&(s(a,h),d--)}if(!c)for(;d--;d)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var f=a.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f};function o(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,i){return e(t,n[i])}));if("object"===typeof t||"object"===typeof n){var i=o(t),r=o(n);return i!==t||r!==n?e(i,r):Object.keys(Object.assign({},t,n)).every((function(i){return e(t[i],n[i])}))}return!1};var c=n(3404);function u(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}function m(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function g(e,t,n,r){var s;"string"===typeof e?(s=f(e)).state=t:(void 0===(s=(0,i.A)({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(s.key=n),r?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=a(s.pathname,r.pathname)):s.pathname=r.pathname:s.pathname||(s.pathname="/"),s}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof i?i(s,r):r(!0):r(!1!==s)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var _=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var b="popstate",w="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function N(e){void 0===e&&(e={}),_||(0,c.A)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,a=s.forceRefresh,o=void 0!==a&&a,l=s.getUserConfirmation,d=void 0===l?x:l,f=s.keyLength,v=void 0===f?6:f,N=e.basename?p(u(e.basename)):"";function T(e){var t=e||{},n=t.key,i=t.state,r=window.location,s=r.pathname+r.search+r.hash;return N&&(s=h(s,N)),g(s,i,n)}function E(){return Math.random().toString(36).substr(2,v)}var C=y();function M(e){(0,i.A)(F,e),F.length=t.length,C.notifyListeners(F.location,F.action)}function I(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(T(e.state))}function A(){P(T(S()))}var R=!1;function P(e){if(R)R=!1,M();else{C.confirmTransitionTo(e,"POP",d,(function(t){t?M({action:"POP",location:e}):function(e){var t=F.location,n=O.indexOf(t.key);-1===n&&(n=0);var i=O.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(R=!0,D(r))}(e)}))}}var k=T(S()),O=[k.key];function L(e){return N+m(e)}function D(e){t.go(e)}var j=0;function U(e){1===(j+=e)&&1===e?(window.addEventListener(b,I),r&&window.addEventListener(w,A)):0===j&&(window.removeEventListener(b,I),r&&window.removeEventListener(w,A))}var z=!1;var F={length:t.length,action:"POP",location:k,createHref:L,push:function(e,i){var r="PUSH",s=g(e,i,E(),F.location);C.confirmTransitionTo(s,r,d,(function(e){if(e){var i=L(s),a=s.key,l=s.state;if(n)if(t.pushState({key:a,state:l},null,i),o)window.location.href=i;else{var c=O.indexOf(F.location.key),u=O.slice(0,c+1);u.push(s.key),O=u,M({action:r,location:s})}else window.location.href=i}}))},replace:function(e,i){var r="REPLACE",s=g(e,i,E(),F.location);C.confirmTransitionTo(s,r,d,(function(e){if(e){var i=L(s),a=s.key,l=s.state;if(n)if(t.replaceState({key:a,state:l},null,i),o)window.location.replace(i);else{var c=O.indexOf(F.location.key);-1!==c&&(O[c]=s.key),M({action:r,location:s})}else window.location.replace(i)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return z||(U(1),z=!0),function(){return z&&(z=!1,U(-1)),t()}},listen:function(e){var t=C.appendListener(e);return U(1),function(){U(-1),t()}}};return F}var T="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:u},slash:{encodePath:u,decodePath:u}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function M(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function I(e){window.location.replace(C(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),_||(0,c.A)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,s=void 0===r?x:r,a=n.hashType,o=void 0===a?"slash":a,l=e.basename?p(u(e.basename)):"",d=E[o],f=d.encodePath,v=d.decodePath;function b(){var e=v(M());return l&&(e=h(e,l)),g(e)}var w=y();function S(e){(0,i.A)(F,e),F.length=t.length,w.notifyListeners(F.location,F.action)}var N=!1,A=null;function R(){var e,t,n=M(),i=f(n);if(n!==i)I(i);else{var r=b(),a=F.location;if(!N&&(t=r,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(A===m(r))return;A=null,function(e){if(N)N=!1,S();else{var t="POP";w.confirmTransitionTo(e,t,s,(function(n){n?S({action:t,location:e}):function(e){var t=F.location,n=L.lastIndexOf(m(t));-1===n&&(n=0);var i=L.lastIndexOf(m(e));-1===i&&(i=0);var r=n-i;r&&(N=!0,D(r))}(e)}))}}(r)}}var P=M(),k=f(P);P!==k&&I(k);var O=b(),L=[m(O)];function D(e){t.go(e)}var j=0;function U(e){1===(j+=e)&&1===e?window.addEventListener(T,R):0===j&&window.removeEventListener(T,R)}var z=!1;var F={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=C(window.location.href)),n+"#"+f(l+m(e))},push:function(e,t){var n="PUSH",i=g(e,void 0,void 0,F.location);w.confirmTransitionTo(i,n,s,(function(e){if(e){var t=m(i),r=f(l+t);if(M()!==r){A=t,function(e){window.location.hash=e}(r);var s=L.lastIndexOf(m(F.location)),a=L.slice(0,s+1);a.push(t),L=a,S({action:n,location:i})}else S()}}))},replace:function(e,t){var n="REPLACE",i=g(e,void 0,void 0,F.location);w.confirmTransitionTo(i,n,s,(function(e){if(e){var t=m(i),r=f(l+t);M()!==r&&(A=t,I(r));var s=L.indexOf(m(F.location));-1!==s&&(L[s]=t),S({action:n,location:i})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return z||(U(1),z=!0),function(){return z&&(z=!1,U(-1)),t()}},listen:function(e){var t=w.appendListener(e);return U(1),function(){U(-1),t()}}};return F}function R(e,t,n){return Math.min(Math.max(e,t),n)}function P(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,s=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,l=t.keyLength,c=void 0===l?6:l,u=y();function d(e){(0,i.A)(x,e),x.length=x.entries.length,u.notifyListeners(x.location,x.action)}function h(){return Math.random().toString(36).substr(2,c)}var p=R(o,0,s.length-1),f=s.map((function(e){return g(e,void 0,"string"===typeof e?h():e.key||h())})),v=m;function _(e){var t=R(x.index+e,0,x.entries.length-1),i=x.entries[t];u.confirmTransitionTo(i,"POP",n,(function(e){e?d({action:"POP",location:i,index:t}):d()}))}var x={length:f.length,action:"POP",location:f[p],index:p,entries:f,createHref:v,push:function(e,t){var i="PUSH",r=g(e,t,h(),x.location);u.confirmTransitionTo(r,i,n,(function(e){if(e){var t=x.index+1,n=x.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),d({action:i,location:r,index:t,entries:n})}}))},replace:function(e,t){var i="REPLACE",r=g(e,t,h(),x.location);u.confirmTransitionTo(r,i,n,(function(e){e&&(x.entries[x.index]=r,d({action:i,location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=x.index+e;return t>=0&&t<x.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return x}},219:(e,t,n)=>{"use strict";var i=n(3763),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return i.isMemo(e)?a:o[e.$$typeof]||r}o[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[i.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var a=u(n);d&&(a=a.concat(d(n)));for(var o=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!s[v]&&(!i||!i[v])&&(!m||!m[v])&&(!o||!o[v])){var y=h(n,v);try{c(t,v,y)}catch(_){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case s:case o:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case r:return t}}}function w(e){return b(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=o,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||b(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===o},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===o||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===x||e.$$typeof===v)},t.typeOf=b},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},1141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},8123:(e,t,n)=>{var i=n(1141);e.exports=p,e.exports.parse=s,e.exports.compile=function(e,t){return o(s(e,t),t)},e.exports.tokensToFunction=o,e.exports.tokensToRegExp=h;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,i=[],s=0,a=0,o="",u=t&&t.delimiter||"/";null!=(n=r.exec(e));){var d=n[0],h=n[1],p=n.index;if(o+=e.slice(a,p),a=p+d.length,h)o+=h[1];else{var f=e[a],m=n[2],g=n[3],v=n[4],y=n[5],_=n[6],x=n[7];o&&(i.push(o),o="");var b=null!=m&&null!=f&&f!==m,w="+"===_||"*"===_,S="?"===_||"*"===_,N=n[2]||u,T=v||y;i.push({name:g||s++,prefix:m||"",delimiter:N,optional:S,repeat:w,partial:b,asterisk:!!x,pattern:T?c(T):x?".*":"[^"+l(N)+"]+?"})}}return a<e.length&&(o+=e.substr(a)),o&&i.push(o),i}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function o(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",d(t)));return function(t,r){for(var s="",o=t||{},l=(r||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var d,h=o[u.name];if(null==h){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(i(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<h.length;p++){if(d=l(h[p]),!n[c].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");s+=(0===p?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(h),!n[c].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');s+=u.prefix+d}}else s+=u}return s}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,s=!1!==n.end,a="",o=0;o<e.length;o++){var c=e[o];if("string"===typeof c)a+=l(c);else{var h=l(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+h+p+")*"),a+=p=c.optional?c.partial?h+"("+p+")?":"(?:"+h+"("+p+"))?":h+"("+p+")"}}var f=l(n.delimiter||"/"),m=a.slice(-f.length)===f;return r||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=s?"$":r&&m?"":"(?="+f+"|$)",u(new RegExp("^"+a,d(n)),t)}function p(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(p(e[r],t,n).source);return u(new RegExp("(?:"+i.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return h(s(e,n),t,n)}(e,t,n)}},1497:(e,t,n)=>{"use strict";var i=n(3218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var D,j=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ne=null;function Te(e){if(e=_r(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=br(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?Ne?Ne.push(e):Ne=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ne;if(Ne=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Me(e,t){return e(t)}function Ie(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Me(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ne)&&(Ie(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var ke=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){ke=!1}function Le(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,je=null,Ue=!1,ze=null,Fe={onError:function(e){De=!0,je=e}};function Ve(e,t,n,i,r,s,a,o,l){De=!1,je=null,Le.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Je=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=dt(o):0!==(s&=a)&&(i=dt(s))}else 0!==(a=n&~r)?i=dt(a):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,St,Nt,Tt,Et=!1,Ct=[],Mt=null,It=null,At=null,Rt=new Map,Pt=new Map,kt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Dt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=_r(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=yr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_r(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function zt(e,t,n){Ut(e)&&n.delete(t)}function Ft(){Et=!1,null!==Mt&&Ut(Mt)&&(Mt=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(zt),Pt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&Vt(Mt,e),null!==It&&Vt(It,e),null!==At&&Vt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<kt.length;n++)(i=kt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)jt(n),null===n.blockedOn&&kt.shift()}var Ht=x.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,i){var r=_t,s=Ht.transition;Ht.transition=null;try{_t=1,Yt(e,t,n,i)}finally{_t=r,Ht.transition=s}}function Gt(e,t,n,i){var r=_t,s=Ht.transition;Ht.transition=null;try{_t=4,Yt(e,t,n,i)}finally{_t=r,Ht.transition=s}}function Yt(e,t,n,i){if(Wt){var r=Kt(e,t,n,i);if(null===r)Wi(e,t,i,Xt,n),Lt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Mt=Dt(Mt,e,t,n,i,r),!0;case"dragenter":return It=Dt(It,e,t,n,i,r),!0;case"mouseover":return At=Dt(At,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Rt.set(s,Dt(Rt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Pt.set(s,Dt(Pt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Lt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=_r(r);if(null!==s&&bt(s),null===(s=Kt(e,t,n,i))&&Wi(e,t,i,Xt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Xt=null;function Kt(e,t,n,i){if(Xt=null,null!==(e=yr(e=be(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=j({},cn,{view:0,detail:0}),hn=sn(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(j({},pn,{dataTransfer:0})),gn=sn(j({},dn,{relatedTarget:0})),vn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),xn=sn(j({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return Nn}var En=j({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(En),Mn=sn(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),kn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,jn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),zn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,i){Ee(i),0<(t=Gi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Yn=null;function Xn(e){Ui(e,0)}function Kn(e){if(Y(xr(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Qn=Zn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Yn=Gn=null)}function ni(e){if("value"===e.propertyName&&Kn(Yn)){var t=[];qn(t,Yn,e,be(e)),Re(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Yn)}function si(e,t){if("click"===e)return Kn(t)}function ai(e,t){if("input"===e||"change"===e)return Kn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,_i=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Gi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Si={},Ni={};function Ti(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ni)return Si[e]=n[t];return e}u&&(Ni=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=Ti("animationend"),Ci=Ti("animationiteration"),Mi=Ti("animationstart"),Ii=Ti("transitionend"),Ai=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){Ai.set(e,t),l(t,[e])}for(var ki=0;ki<Ri.length;ki++){var Oi=Ri[ki];Pi(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Pi(Ei,"onAnimationEnd"),Pi(Ci,"onAnimationIteration"),Pi(Mi,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(s(198));var u=je;De=!1,je=null,Ue||(Ue=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Ui(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;ji(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;ji(r,o,c),s=l}}}if(Ue)throw e=ze,Ue=!1,ze=null,e}function zi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Fi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[Vi]){e[Vi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||Fi(t,!1,e),Fi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Fi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Jt(t)){case 1:var r=qt;break;case 4:r=Gt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Re((function(){var i=s,r=be(n),a=[];e:{var o=Ai.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ei:case Ci:case Mi:l=vn;break;case Ii:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Pe(f,h))&&u.push(qi(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xr(l),p=null==c?o:xr(c),(o=new u(m,f+"leave",l,n,r)).target=d,o.relatedTarget=p,m=null,yr(r)===i&&((u=new u(h,f+"enter",c,n,r)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Yi(p))f++;for(p=0,m=h;m;m=Yi(m))p++;for(;0<f-p;)u=Yi(u),f--;for(;0<p-f;)h=Yi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yi(u),h=Yi(h)}u=null}else u=null;null!==l&&Xi(a,o,l,u,!1),null!==c&&null!==d&&Xi(a,d,c,u,!0)}if("select"===(l=(o=i?xr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Wn(o))if($n)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?qn(a,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?xr(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,xi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(a,n,r)}var y;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Fn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Qt="value"in($t=r)?$t.value:$t.textContent,Bn=!0)),0<(v=Gi(i,_)).length&&(_=new xn(_,e,null,n,r),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Fn(e,t)?(e=en(),Zt=Qt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Ui(a,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Pe(e,n))&&i.unshift(qi(e,s,r)),null!=(s=Pe(e,t))&&i.push(qi(e,s,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Pe(n,s))&&a.unshift(qi(n,l,o)):r||null!=(l=Pe(n,s))&&a.push(qi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ki=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Ki,"\n").replace(Ji,"")}function Qi(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function _r(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function br(e){return e[pr]||null}var wr=[],Sr=-1;function Nr(e){return{current:e}}function Tr(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Er(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Cr={},Mr=Nr(Cr),Ir=Nr(!1),Ar=Cr;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function kr(){Tr(Ir),Tr(Mr)}function Or(e,t,n){if(Mr.current!==Cr)throw Error(s(168));Er(Mr,t),Er(Ir,n)}function Lr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return j({},n,i)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Ar=Mr.current,Er(Mr,e),Er(Ir,Ir.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Lr(e,t,Ar),i.__reactInternalMemoizedMergedChildContext=e,Tr(Ir),Tr(Mr),Er(Mr,e)):Tr(Ir),Er(Ir,n)}var Ur=null,zr=!1,Fr=!1;function Vr(e){null===Ur?Ur=[e]:Ur.push(e)}function Br(){if(!Fr&&null!==Ur){Fr=!0;var e=0,t=_t;try{var n=Ur;for(_t=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Ur=null,zr=!1}catch(r){throw null!==Ur&&(Ur=Ur.slice(e+1)),Ye(Ze,Br),r}finally{_t=t,Fr=!1}}return null}var Hr=[],Wr=0,qr=null,Gr=0,Yr=[],Xr=0,Kr=null,Jr=1,$r="";function Qr(e,t){Hr[Wr++]=Gr,Hr[Wr++]=qr,qr=e,Gr=t}function Zr(e,t,n){Yr[Xr++]=Jr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Kr=e;var i=Jr;e=$r;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Jr=1<<32-at(t)+r|n<<r|i,$r=s+e}else Jr=1<<s|n<<r|i,$r=e}function es(e){null!==e.return&&(Qr(e,1),Zr(e,1,0))}function ts(e){for(;e===qr;)qr=Hr[--Wr],Hr[Wr]=null,Gr=Hr[--Wr],Hr[Wr]=null;for(;e===Kr;)Kr=Yr[--Xr],Yr[Xr]=null,$r=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:Jr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=x.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Nr(null),ys=null,_s=null,xs=null;function bs(){xs=_s=ys=null}function ws(e){var t=vs.current;Tr(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ys=e,xs=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(xs!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===ys)throw Error(s(308));_s=e,ys.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Es=null;function Cs(e){null===Es?Es=[e]:Es.push(e)}function Ms(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Cs(t)):(n.next=r.next,r.next=n),t.interleaved=n,Is(e,i)}function Is(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Is(e,n)}return null===(r=i.interleaved)?(t.next=t,Cs(i)):(t.next=r.next,r.next=t),i.interleaved=t,Is(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ds(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,i){var r=e.updateQueue;As=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:As=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var zs=(new i.Component).refs;function Fs(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=ks(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,r))&&(ic(t,e,r,i),Ls(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=ks(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,r))&&(ic(t,e,r,i),Ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=ks(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Os(e,r,i))&&(ic(t,e,i,n),Ls(t,e,i))}};function Bs(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function Hs(e,t,n){var i=!1,r=Cr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(r=Pr(t)?Ar:Mr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rr(e,r):Cr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function qs(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=zs,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ts(s):(s=Pr(t)?Ar:Mr.current,r.context=Rr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Fs(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Vs.enqueueReplaceState(r,r.state,null),js(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===zs&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xs(e){return(0,e._init)(e._payload)}function Ks(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Uc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Xs(s)===t.type)?((i=r(t,n.props)).ref=Gs(e,t,n),i.return=e,i):((i=Lc(n.type,n.key,n.props,null,e.mode,i)).ref=Gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Ys(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case P:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||L(n))return null!==r?null:d(e,t,n,i,null);Ys(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case P:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||L(i))return d(t,e=e.get(n)||null,i,r,null);Ys(t,i)}return null}function m(r,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(r,d),rs&&Qr(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return rs&&Qr(r,m),c}for(d=i(r,d);m<o.length;m++)null!==(g=f(d,r,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),rs&&Qr(r,m),c}function g(r,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=p(r,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(r,m),o=a(_,o,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(r,m),rs&&Qr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(r,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return rs&&Qr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(r,e)})),rs&&Qr(r,g),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Xs(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=Gs(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===S?((s=Dc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Lc(a.type,a.key,a.props,null,i.mode,l)).ref=Gs(i,s,a),l.return=i,i=l)}return o(i);case w:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=zc(a,i.mode,l)).return=i,i=s}return o(i);case P:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return m(i,s,a,l);if(L(a))return g(i,s,a,l);Ys(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Uc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var Js=Ks(!0),$s=Ks(!1),Qs={},Zs=Nr(Qs),ea=Nr(Qs),ta=Nr(Qs);function na(e){if(e===Qs)throw Error(s(174));return e}function ia(e,t){switch(Er(ta,t),Er(ea,e),Er(Zs,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Zs),Er(Zs,t)}function ra(){Tr(Zs),Tr(ea),Tr(ta)}function sa(e){na(ta.current);var t=na(Zs.current),n=le(t,e.type);t!==n&&(Er(ea,e),Er(Zs,n))}function aa(e){ea.current===e&&(Tr(Zs),Tr(ea))}var oa=Nr(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var da=x.ReactCurrentDispatcher,ha=x.ReactCurrentBatchConfig,pa=0,fa=null,ma=null,ga=null,va=!1,ya=!1,_a=0,xa=0;function ba(){throw Error(s(321))}function wa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function Sa(e,t,n,i,r,a){if(pa=a,fa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ao:oo,e=n(i,r),ya){a=0;do{if(ya=!1,_a=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,da.current=lo,e=n(i,r)}while(ya)}if(da.current=so,t=null!==ma&&null!==ma.next,pa=0,ga=ma=fa=null,va=!1,t)throw Error(s(300));return e}function Na(){var e=0!==_a;return _a=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?fa.memoizedState=ga=e:ga=ga.next=e,ga}function Ea(){if(null===ma){var e=fa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?fa.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?fa.memoizedState=ga=e:ga=ga.next=e}return ga}function Ca(e,t){return"function"===typeof t?t(e):t}function Ma(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ma,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,fa.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,fa.lanes|=a,jl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ia(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Aa(){}function Ra(e,t){var n=fa,i=Ea(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Ha(Oa.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ua(9,ka.bind(null,n,i,r,t),void 0,null),null===Al)throw Error(s(349));0!==(30&pa)||Pa(n,t,r)}return r}function Pa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,i){t.value=n,t.getSnapshot=i,La(t)&&Da(e)}function Oa(e,t,n){return n((function(){La(t)&&Da(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Da(e){var t=Is(e,1);null!==t&&ic(t,e,1,-1)}function ja(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,fa,e),[t.memoizedState,e]}function Ua(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function za(){return Ea().memoizedState}function Fa(e,t,n,i){var r=Ta();fa.flags|=e,r.memoizedState=Ua(1|t,n,void 0,void 0===i?null:i)}function Va(e,t,n,i){var r=Ea();i=void 0===i?null:i;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==i&&wa(i,a.deps))return void(r.memoizedState=Ua(t,n,s,i))}fa.flags|=e,r.memoizedState=Ua(1|t,n,s,i)}function Ba(e,t){return Fa(8390656,8,e,t)}function Ha(e,t){return Va(2048,8,e,t)}function Wa(e,t){return Va(4,2,e,t)}function qa(e,t){return Va(4,4,e,t)}function Ga(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ya(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,4,Ga.bind(null,t,e),n)}function Xa(){}function Ka(e,t){var n=Ea();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&wa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ea();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&wa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),fa.lanes|=n,jl|=n,e.baseState=!0),t)}function Qa(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var i=ha.transition;ha.transition={};try{e(!1),t()}finally{_t=n,ha.transition=i}}function Za(){return Ea().memoizedState}function eo(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))io(t,n);else if(null!==(n=Ms(e,t,n,i))){ic(n,e,i,tc()),ro(n,t,i)}}function to(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))io(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Cs(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ms(e,t,r,i))&&(ic(n,e,i,r=tc()),ro(n,t,i))}}function no(e){var t=e.alternate;return e===fa||null!==t&&t===fa}function io(e,t){ya=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ro(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var so={readContext:Ts,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useInsertionEffect:ba,useLayoutEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useMutableSource:ba,useSyncExternalStore:ba,useId:ba,unstable_isNewReconciler:!1},ao={readContext:Ts,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Ba,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fa(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ta();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=eo.bind(null,fa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:ja,useDebugValue:Xa,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Qa.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=fa,r=Ta();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&pa)||Pa(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ba(Oa.bind(null,i,a,e),[e]),i.flags|=2048,Ua(9,ka.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ta(),t=Al.identifierPrefix;if(rs){var n=$r;t=":"+t+"R"+(n=(Jr&~(1<<32-at(Jr)-1)).toString(32)+n),0<(n=_a++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Ts,useCallback:Ka,useContext:Ts,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Ja,useReducer:Ma,useRef:za,useState:function(){return Ma(Ca)},useDebugValue:Xa,useDeferredValue:function(e){return $a(Ea(),ma.memoizedState,e)},useTransition:function(){return[Ma(Ca)[0],Ea().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ra,useId:Za,unstable_isNewReconciler:!1},lo={readContext:Ts,useCallback:Ka,useContext:Ts,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Ja,useReducer:Ia,useRef:za,useState:function(){return Ia(Ca)},useDebugValue:Xa,useDeferredValue:function(e){var t=Ea();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[Ia(Ca)[0],Ea().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ra,useId:Za,unstable_isNewReconciler:!1};function co(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=ks(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Gl=i),ho(0,t)},n}function mo(e,t,n){(n=ks(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new po;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ks(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var _o=x.ReactCurrentOwner,xo=!1;function bo(e,t,n,i){t.child=null===e?$s(t,null,n,i):Js(t,e.child,n,i)}function wo(e,t,n,i,r){n=n.render;var s=t.ref;return Ns(t,r),i=Sa(e,t,n,i,s,r),n=Na(),null===e||xo?(rs&&n&&es(t),t.flags|=1,bo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qo(e,t,r))}function So(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||kc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return qo(e,t,r)}return t.flags|=1,(e=Oc(s,i)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,qo(e,t,r);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,i,r)}function To(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ol,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ol,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Er(Ol,kl),kl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Er(Ol,kl),kl|=i;return bo(e,t,r,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,i,r){var s=Pr(n)?Ar:Mr.current;return s=Rr(t,s),Ns(t,r),n=Sa(e,t,n,i,s,r),i=Na(),null===e||xo?(rs&&i&&es(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qo(e,t,r))}function Mo(e,t,n,i,r){if(Pr(n)){var s=!0;Dr(t)}else s=!1;if(Ns(t,r),null===t.stateNode)Wo(e,t),Hs(t,n,i),qs(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Rr(t,c=Pr(n)?Ar:Mr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&Ws(t,a,i,c),As=!1;var h=t.memoizedState;a.state=h,js(t,i,a,r),l=t.memoizedState,o!==i||h!==l||Ir.current||As?("function"===typeof u&&(Fs(t,n,u,i),l=t.memoizedState),(o=As||Bs(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Ps(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gs(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Rr(t,l=Pr(n)?Ar:Mr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&Ws(t,a,i,l),As=!1,h=t.memoizedState,a.state=h,js(t,i,a,r);var f=t.memoizedState;o!==d||h!==f||Ir.current||As?("function"===typeof p&&(Fs(t,n,p,i),f=t.memoizedState),(c=As||Bs(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Io(e,t,n,i,s,r)}function Io(e,t,n,i,r,s){Eo(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&jr(t,n,!1),qo(e,t,s);i=t.stateNode,_o.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,o,s)):bo(e,t,o,s),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),ia(e,t.containerInfo)}function Ro(e,t,n,i,r){return ps(),fs(r),t.flags|=256,bo(e,t,n,i),t.child}var Po,ko,Oo,Lo,Do={dehydrated:null,treeContext:null,retryLane:0};function jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var i,r=t.pendingProps,a=oa.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Er(oa,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=jc(l,r,0,null),e=Dc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jo(n),t.memoizedState=Do,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=jc({mode:"visible",children:i.children},r,0,null),(a=Dc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&Js(t,e.child,null,o),t.child.memoizedState=jo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=uo(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=Al)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Is(e,r),ic(i,e,r,-1))}return gc(),Fo(e,t,o,i=uo(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Yr[Xr++]=Jr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Jr=e.id,$r=e.overflow,Kr=t),t=zo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Oc(i,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?jo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,r}return e=(o=e.child).sibling,r=Oc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,i){return null!==i&&fs(i),Js(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ss(e.return,t,n)}function Bo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=oa.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(oa,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===la(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Pr(t.type)&&kr(),Yo(t),null;case 3:return i=t.stateNode,ra(),Tr(Ir),Tr(Mr),ua(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),ko(e,t),Yo(t),null;case 5:aa(t);var r=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Yo(t),null}if(e=na(Zs.current),ds(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Li.length;r++)zi(Li[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":J(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":G(i),Z(i,a,!0);break;case"textarea":G(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Li.length;r++)zi(Li[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":J(e,i),r=K(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",e):null!=u&&_(e,a,u,l))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Zs.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Yo(t),null;case 13:if(Tr(oa),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),a=!1}else null!==ss&&(oc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return ra(),ko(e,t),null===e&&Bi(t.stateNode.containerInfo),Yo(t),null;case 10:return ws(t.type._context),Yo(t),null;case 19:if(Tr(oa),null===(a=t.memoizedState))return Yo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=la(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Yo(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=oa.current,Er(oa,i?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Pr(t.type)&&kr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ra(),Tr(Ir),Tr(Mr),ua(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(Tr(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(oa),null;case 4:return ra(),null;case 10:return ws(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ko=function(){},Oo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,na(Zs.current);var s,a=null;switch(n){case"input":r=K(e,r),i=K(e,i),a=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Jo=!1,$o=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tc(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Tc(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:$o||el(n,t);case 6:var i=dl,r=hl;dl=null,pl(e,t,n),hl=r,null!==(dl=i)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!$o&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Tc(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($o=(i=$o)||null!==n.memoizedState,pl(e,t,n),$o=i):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(a,o,r),dl=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Tc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Tc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),_e(l,o);var u=_e(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):_(r,d,h,u)}switch(l){case"input":Q(r,a);break;case"textarea":se(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=$e())),4&i&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,gl(t,e),$o=u):gl(t,e),yl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(f=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(i,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Zo=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&i&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Tc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Zo;){var r=Zo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Jo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=a,($o=l)&&!c)for(Zo=r;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Sl(r):null!==l?(l.return=a,Zo=l):Sl(r);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=r,Jo=o,$o=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Zo=s):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$o)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}$o||512&t.flags&&sl(t)}catch(p){Tc(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Tc(t,r,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Tc(t,a,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,Tl=Math.ceil,El=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Ml=x.ReactCurrentBatchConfig,Il=0,Al=null,Rl=null,Pl=0,kl=0,Ol=Nr(0),Ll=0,Dl=null,jl=0,Ul=0,zl=0,Fl=null,Vl=null,Bl=0,Hl=1/0,Wl=null,ql=!1,Gl=null,Yl=null,Xl=!1,Kl=null,Jl=0,$l=0,Ql=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ic(e,t,n,i){if(50<$l)throw $l=0,Ql=null,Error(s(185));vt(e,n,i),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(Ul|=n),4===Ll&&lc(e,Pl)),rc(e,i),1===n&&0===Il&&0===(1&t.mode)&&(Hl=$e()+500,zr&&Br()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ht(e,e===Al?Pl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zr=!0,Vr(e)}(cc.bind(null,e)):Vr(cc.bind(null,e)),ar((function(){0===(6&Il)&&Br()})),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var i=ht(e,e===Al?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=vc(e,i);else{t=i;var r=Il;Il|=2;var a=mc();for(Al===e&&Pl===t||(Wl=null,Hl=$e()+500,pc(e,t));;)try{_c();break}catch(l){fc(e,l)}bs(),El.current=a,Il=r,null!==Rl?t=0:(Al=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=ac(e,r))),1===t)throw n=Dl,pc(e,0),lc(e,i),rc(e,$e()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vc(e,i))&&(0!==(a=ft(e))&&(i=a,t=ac(e,a))),1===t))throw n=Dl,pc(e,0),lc(e,i),rc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Wl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Bl+500-$e())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wc.bind(null,e,Vl,Wl),t);break}wc(e,Vl,Wl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tl(i/1960))-i)){e.timeoutHandle=ir(wc.bind(null,e,Vl,Wl),i);break}wc(e,Vl,Wl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~zl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Il))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ac(e,i))}if(1===n)throw n=Dl,pc(e,0),lc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Wl),rc(e,$e()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Hl=$e()+500,zr&&Br())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Il)&&Sc();var t=Il;Il|=1;var n=Ml.transition,i=_t;try{if(Ml.transition=null,_t=1,e)return e()}finally{_t=i,Ml.transition=n,0===(6&(Il=t))&&Br()}}function hc(){kl=Ol.current,Tr(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&kr();break;case 3:ra(),Tr(Ir),Tr(Mr),ua();break;case 5:aa(i);break;case 4:ra();break;case 13:case 19:Tr(oa);break;case 10:ws(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Rl=e=Oc(e.current,null),Pl=kl=t,Ll=0,Dl=null,zl=Ul=jl=0,Vl=Fl=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(i=(n=Es[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Es=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(bs(),da.current=so,va){for(var i=fa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}va=!1}if(pa=0,ga=ma=fa=null,ya=!1,_a=0,Cl.current=null,null===n||null===n.return){Ll=1,Dl=t,Rl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=vo(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&go(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),fs(co(c,l));break e}}a=c=co(c,l),4!==Ll&&(Ll=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ds(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,Ds(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(x){t=x,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=so,null===e?so:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&jl)&&0===(268435455&Ul)||lc(Al,Pl)}function vc(e,t){var n=Il;Il|=2;var i=mc();for(Al===e&&Pl===t||(Wl=null,pc(e,t));;)try{yc();break}catch(r){fc(e,r)}if(bs(),Il=n,El.current=i,null!==Rl)throw Error(s(261));return Al=null,Pl=0,Ll}function yc(){for(;null!==Rl;)xc(Rl)}function _c(){for(;null!==Rl&&!Ke();)xc(Rl)}function xc(e){var t=Nl(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,kl)))return void(Rl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var i=_t,r=Ml.transition;try{Ml.transition=null,_t=1,function(e,t,n,i){do{Sc()}while(null!==Kl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Al&&(Rl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Ac(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var o=_t;_t=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(er=Wt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===a&&++d===i&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(b){Tc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),vl(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,_l(n,e,r),Je(),Il=l,_t=o,Ml.transition=a}else e.current=n;if(Xl&&(Xl=!1,Kl=e,Jl=r),a=e.pendingLanes,0===a&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ql?$l++:($l=0,Ql=e):$l=0,Br()}(e,t,n,i)}finally{Ml.transition=r,_t=i}return null}function Sc(){if(null!==Kl){var e=xt(Jl),t=Ml.transition,n=_t;try{if(Ml.transition=null,_t=16>e?16:e,null===Kl)var i=!1;else{if(e=Kl,Kl=null,Jl=0,0!==(6&Il))throw Error(s(331));var r=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var p=(d=Zo).sibling,f=d.return;if(al(d),d===u){Zo=null;break}if(null!==p){p.return=f,Zo=p;break}Zo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zo=y;break e}Zo=a.return}}var _=e.current;for(Zo=_;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=_;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Tc(l,l.return,w)}if(l===o){Zo=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Zo=b;break e}Zo=l.return}}if(Il=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{_t=n,Ml.transition=t}}return!1}function Nc(e,t,n){e=Os(e,t=fo(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){t=Os(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>$e()-Bl?pc(e,0):zl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Is(e,t))&&(vt(e,t,n),rc(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Cc(e,n)}function Ac(e,t){return Ye(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,i){return new Rc(e,t,n,i)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)kc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Dc(n.children,r,a,t);case N:o=8,r|=8;break;case T:return(e=Pc(12,n,t,2|r)).elementType=T,e.lanes=a,e;case I:return(e=Pc(13,n,t,r)).elementType=I,e.lanes=a,e;case A:return(e=Pc(19,n,t,r)).elementType=A,e.lanes=a,e;case k:return jc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case M:o=11;break e;case R:o=14;break e;case P:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Dc(e,t,n,i){return(e=Pc(7,e,i,t)).lanes=n,e}function jc(e,t,n,i){return(e=Pc(22,e,i,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,i,r,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Bc(e){if(!e)return Cr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pr(n))return Lr(e,n,t)}return t}function Hc(e,t,n,i,r,s,a,o,l){return(e=Vc(n,i,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=ks(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,r),e.current.lanes=r,vt(e,r,i),rc(e,i),e}function Wc(e,t,n,i){var r=t.current,s=tc(),a=nc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ks(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Os(r,t,a))&&(ic(e,r,a,s),Ls(e,r,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),ps();break;case 5:sa(t);break;case 1:Pr(t.type)&&Dr(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(vs,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Er(oa,1&oa.current),null!==(e=qo(e,t,n))?e.sibling:null);Er(oa,1&oa.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(oa,oa.current),i)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wo(e,t),e=t.pendingProps;var r=Rr(t,Mr.current);Ns(t,n),r=Sa(null,t,i,e,r,n);var a=Na();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pr(i)?(a=!0,Dr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Rs(t),r.updater=Vs,t.stateNode=r,r._reactInternals=t,qs(t,i,e,n),t=Io(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),bo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return kc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(i),e=gs(i,e),r){case 0:t=Co(null,t,i,e,n);break e;case 1:t=Mo(null,t,i,e,n);break e;case 11:t=wo(null,t,i,e,n);break e;case 14:t=So(null,t,i,gs(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 1:return i=t.type,r=t.pendingProps,Mo(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 3:e:{if(Ao(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ps(e,t),js(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ro(e,t,i,n,r=co(Error(s(423)),t));break e}if(i!==r){t=Ro(e,t,i,n,r=co(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=$s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=qo(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return sa(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Uo(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Js(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wo(e,t,i,r=t.elementType===i?r:gs(i,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Er(vs,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Ir.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=ks(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ss(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ns(t,n),i=i(r=Ts(r)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return r=gs(i=t.type,t.pendingProps),So(e,t,i,r=gs(i.type,r),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:gs(i,r),Wo(e,t),t.tag=1,Pr(i)?(e=!0,Dr(t)):e=!1,Ns(t,n),Hs(t,i,r),qs(t,i,r,n),Io(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=qc(a);o.call(e)}}Wc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=qc(a);s.call(e)}}var a=Hc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fr]=a.current,Bi(8===e.nodeType?e.parentNode:e),dc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=qc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,Bi(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,l,n,i)})),l}(n,t,e,r,i);return qc(a)}Jc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Jc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[fr]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&Il)&&(Hl=$e()+500,Br()))}break;case 13:dc((function(){var t=Is(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Yc(e,1)}},wt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)ic(t,e,134217728,tc());Yc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Is(e,t);if(null!==n)ic(n,e,t,tc());Yc(e,t)}},Nt=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(s(90));Y(i),Q(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[_r,xr,br,Ee,Ce,uc]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,a,o),e[fr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Jc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},5323:(e,t,n)=>{"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=n(1688),s=i(n(5043)),a=n(7321);n(5173),n(8620);var o=i(n(2213));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}var h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=a.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return s.createElement(r.Router,{history:this.history,children:this.props.children})},t}(s.Component),p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=a.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return s.createElement(r.Router,{history:this.history,children:this.props.children})},t}(s.Component),f=function(e,t){return"function"==typeof e?e(t):e},m=function(e,t){return"string"==typeof e?a.createLocation(e,null,null,t):e},g=function(e){return e},v=s.forwardRef;void 0===v&&(v=g);var y=v((function(e,t){var n=e.innerRef,i=e.navigate,r=e.onClick,a=d(e,["innerRef","navigate","onClick"]),o=a.target,c=l({},a,{onClick:function(t){try{r&&r(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),i())}});return c.ref=g!==v&&t||n,s.createElement("a",c)})),_=v((function(e,t){var n=e.component,i=void 0===n?y:n,c=e.replace,u=e.to,h=e.innerRef,p=d(e,["component","replace","to","innerRef"]);return s.createElement(r.__RouterContext.Consumer,null,(function(e){e||o(!1);var n=e.history,r=m(f(u,e.location),e.location),d=r?n.createHref(r):"",y=l({},p,{href:d,navigate:function(){var t=f(u,e.location),i=a.createPath(e.location)===a.createPath(m(t));(c||i?n.replace:n.push)(t)}});return g!==v?y.ref=t||h:y.innerRef=h,s.createElement(i,y)}))})),x=function(e){return e},b=s.forwardRef;void 0===b&&(b=x);var w=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,c=void 0===a?"active":a,u=e.activeStyle,h=e.className,p=e.exact,g=e.isActive,v=e.location,y=e.sensitive,w=e.strict,S=e.style,N=e.to,T=e.innerRef,E=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.createElement(r.__RouterContext.Consumer,null,(function(e){e||o(!1);var n=v||e.location,a=m(f(N,n),n),d=a.pathname,C=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),M=C?r.matchPath(n.pathname,{path:C,exact:p,sensitive:y,strict:w}):null,I=!!(g?g(M,n):M),A="function"==typeof h?h(I):h,R="function"==typeof S?S(I):S;I&&(A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(A,c),R=l({},R,u));var P=l({"aria-current":I&&i||null,className:A,style:R,to:a},E);return x!==b?P.ref=t||T:P.innerRef=T,s.createElement(_,P)}))}));Object.defineProperty(t,"zy",{enumerable:!0,get:function(){return r.useLocation}})},1688:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MemoryRouter:()=>w,Prompt:()=>N,Redirect:()=>I,Route:()=>O,Router:()=>b,StaticRouter:()=>F,Switch:()=>V,__HistoryContext:()=>_,__RouterContext:()=>x,generatePath:()=>M,matchPath:()=>k,useHistory:()=>W,useLocation:()=>q,useParams:()=>G,useRouteMatch:()=>Y,withRouter:()=>B});var i=n(5540),r=n(5043),s=n(5173),a=n.n(s),o=n(7321),l=n(3404),c=n(8168),u=n(8123),d=n.n(u),h=(n(7681),n(8587)),p=n(219),f=n.n(p),m=1073741823,g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var v=r.createContext||function(e,t){var n,s,o="__create-react-context-"+function(){var e="__global_unique_id__";return g[e]=(g[e]||0)+1}()+"__",l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,i){e=n,t.forEach((function(t){return t(e,i)}))}}}(t.props.value),t}(0,i.A)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;((s=i)===(a=r)?0!==s||1/s===1/a:s!==s&&a!==a)?n=0:(n="function"===typeof t?t(i,r):m,0!==(n|=0)&&this.emitter.set(e.value,n))}var s,a},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[o]=a().object.isRequired,n);var c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,i.A)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?m:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?m:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return c.contextTypes=((s={})[o]=a().object,s),{Provider:l,Consumer:c}},y=function(e){var t=v();return t.displayName=e,t},_=y("Router-History"),x=y("Router"),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,i.A)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return r.createElement(x.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(_.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);var w=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=(0,o.createMemoryHistory)(t.props),t}return(0,i.A)(t,e),t.prototype.render=function(){return r.createElement(b,{history:this.history,children:this.props.children})},t}(r.Component);var S=function(e){function t(){return e.apply(this,arguments)||this}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(r.Component);function N(e){var t=e.message,n=e.when,i=void 0===n||n;return r.createElement(x.Consumer,null,(function(e){if(e||(0,l.A)(!1),!i||e.staticContext)return null;var n=e.history.block;return r.createElement(S,{onMount:function(e){e.release=n(t)},onUpdate:function(e,i){i.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var T={},E=1e4,C=0;function M(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(T[e])return T[e];var t=d().compile(e);return C<E&&(T[e]=t,C++),t}(e)(t,{pretty:!0})}function I(e){var t=e.computedMatch,n=e.to,i=e.push,s=void 0!==i&&i;return r.createElement(x.Consumer,null,(function(e){e||(0,l.A)(!1);var i=e.history,a=e.staticContext,u=s?i.push:i.replace,d=(0,o.createLocation)(t?"string"===typeof n?M(n,t.params):(0,c.A)({},n,{pathname:M(n.pathname,t.params)}):n);return a?(u(d),null):r.createElement(S,{onMount:function(){u(d)},onUpdate:function(e,t){var n=(0,o.createLocation)(t.to);(0,o.locationsAreEqual)(n,(0,c.A)({},d,{key:n.key}))||u(d)},to:n})}))}var A={},R=1e4,P=0;function k(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,s=void 0!==r&&r,a=n.strict,o=void 0!==a&&a,l=n.sensitive,c=void 0!==l&&l;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=A[n]||(A[n]={});if(i[e])return i[e];var r=[],s={regexp:d()(e,r,t),keys:r};return P<R&&(i[e]=s,P++),s}(n,{end:s,strict:o,sensitive:c}),r=i.regexp,a=i.keys,l=r.exec(e);if(!l)return null;var u=l[0],h=l.slice(1),p=e===u;return s&&!p?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:p,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var O=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(x.Consumer,null,(function(t){t||(0,l.A)(!1);var n=e.props.location||t.location,i=e.props.computedMatch?e.props.computedMatch:e.props.path?k(n.pathname,e.props):t.match,s=(0,c.A)({},t,{location:n,match:i}),a=e.props,o=a.children,u=a.component,d=a.render;return Array.isArray(o)&&function(e){return 0===r.Children.count(e)}(o)&&(o=null),r.createElement(x.Provider,{value:s},s.match?o?"function"===typeof o?o(s):o:u?r.createElement(u,s):d?d(s):null:"function"===typeof o?o(s):null)}))},t}(r.Component);function L(e){return"/"===e.charAt(0)?e:"/"+e}function D(e,t){if(!e)return t;var n=L(e);return 0!==t.pathname.indexOf(n)?t:(0,c.A)({},t,{pathname:t.pathname.substr(n.length)})}function j(e){return"string"===typeof e?e:(0,o.createPath)(e)}function U(e){return function(){(0,l.A)(!1)}}function z(){}var F=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return z},t.handleBlock=function(){return z},t}(0,i.A)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,i=n.basename,r=void 0===i?"":i,s=n.context,a=void 0===s?{}:s;a.action=t,a.location=function(e,t){return e?(0,c.A)({},t,{pathname:L(e)+t.pathname}):t}(r,(0,o.createLocation)(e)),a.url=j(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,i=e.context,s=void 0===i?{}:i,a=e.location,l=void 0===a?"/":a,u=(0,h.A)(e,["basename","context","location"]),d={createHref:function(e){return L(n+j(e))},action:"POP",location:D(n,(0,o.createLocation)(l)),push:this.handlePush,replace:this.handleReplace,go:U(),goBack:U(),goForward:U(),listen:this.handleListen,block:this.handleBlock};return r.createElement(b,(0,c.A)({},u,{history:d,staticContext:s}))},t}(r.Component);var V=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(x.Consumer,null,(function(t){t||(0,l.A)(!1);var n,i,s=e.props.location||t.location;return r.Children.forEach(e.props.children,(function(e){if(null==i&&r.isValidElement(e)){n=e;var a=e.props.path||e.props.from;i=a?k(s.pathname,(0,c.A)({},e.props,{path:a})):t.match}})),i?r.cloneElement(n,{location:s,computedMatch:i}):null}))},t}(r.Component);function B(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,i=(0,h.A)(t,["wrappedComponentRef"]);return r.createElement(x.Consumer,null,(function(t){return t||(0,l.A)(!1),r.createElement(e,(0,c.A)({},i,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,f()(n,e)}var H=r.useContext;function W(){return H(_)}function q(){return H(x).location}function G(){var e=H(x).match;return e?e.params:{}}function Y(e){var t=q(),n=H(x).match;return e?k(t.pathname,e):n}},9005:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case s:case o:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case r:return t}}}function w(e){return b(e)===d}},7681:(e,t,n)=>{"use strict";n(9005)},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=_.prototype=new y;x.constructor=_,m(x,v.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!N.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+M(l,0):s,b(a)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),I(a,t,r,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+M(o=e[c],c);l+=I(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,r,u=s+M(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},k={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!N.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,k(w);else{var t=i(u);null!==t&&O(b,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),f=!0;var s=p;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&O(b,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,N=!1,T=null,E=-1,C=5,M=-1;function I(){return!(t.unstable_now()-M<C)}function A(){if(null!==T){var e=t.unstable_now();M=e;var n=!0;try{n=T(!0,e)}finally{n?S():(N=!1,T=null)}}else N=!1}if("function"===typeof _)S=function(){_(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,S=function(){P.postMessage(null)}}else S=function(){v(A,0)};function k(e){T=e,N||(N=!0,S())}function O(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(E),E=-1):g=!0,O(b,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,k(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},2213:e=>{"use strict";var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},8620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=function(e,t){}},8365:(e,t,n)=>{"use strict";var i=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=i.useRef,o=i.useEffect,l=i.useMemo,c=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,u){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!o){if(o=!0,s=e,e=i(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return a=t}return a=e}if(t=a,r(s,e))return t;var n=i(e);return void 0!==u&&u(t,n)?(s=e,t):(s=e,a=n)}var s,a,o=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,i,u]);var p=s(e,d[0],d[1]);return o((function(){h.hasValue=!0,h.value=p}),[p]),c(p),p}},7237:(e,t,n)=>{"use strict";e.exports=n(8365)},8168:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}n.d(t,{A:()=>i})},5540:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function i(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}n.d(t,{A:()=>i})},3404:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=!0,r="Invariant failed";function s(e,t){if(!e){if(i)throw new Error(r);var n="function"===typeof t?t():t,s=n?"".concat(r,": ").concat(n):r;throw new Error(s)}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,n.d(s,a),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Qe,hasStandardBrowserEnv:()=>et,hasStandardBrowserWebWorkerEnv:()=>tt,navigator:()=>Ze,origin:()=>nt});var t=n(4391),i=n(5043);const r=n.p+"static/media/Logo_1pq.97c7a4737b0ec0e161db.png";var s=n(7237),a=i,o=Symbol.for("react-redux-context"),l="undefined"!==typeof globalThis?globalThis:{};function c(){var e;if(!a.createContext)return{};const t=null!==(e=l[o])&&void 0!==e?e:l[o]=new Map;let n=t.get(a.createContext);return n||(n=a.createContext(null),t.set(a.createContext,n)),n}var u=c(),d=()=>{throw new Error("uSES not initialized!")};function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function(){return a.useContext(e)}}var p=h(),f=d,m=(e,t)=>e===t;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?p:h(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:i=m,devModeChecks:r={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:l,stabilityCheck:c,identityFunctionCheck:u}=t(),d=(a.useRef(!0),a.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,r.stabilityCheck])),h=f(o.addNestedSub,s.getState,l||s.getState,d,i);return a.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var v=g();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function y(e){e()}var _={notify(){},get:()=>[]};function x(e,t){let n,i=_,r=0,s=!1;function a(){c.onStateChange&&c.onStateChange()}function o(){r++,n||(n=t?t.addNestedSub(a):e.subscribe(a),i=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){y((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,i.clear(),i=_)}const c={addNestedSub:function(e){o();const t=i.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:a,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>i};return c}var b=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),w="undefined"!==typeof navigator&&"ReactNative"===navigator.product,S=b||w?a.useLayoutEffect:a.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var N=function(e){let{store:t,context:n,children:i,serverState:r,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const l=a.useMemo((()=>{const e=x(t);return{store:t,subscription:e,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,r,s,o]),c=a.useMemo((()=>t.getState()),[t]);S((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,c]);const d=n||u;return a.createElement(d.Provider,{value:l},i)};function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?p:h(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var E=T();function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?E:T(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var M,I=C();M=s.useSyncExternalStoreWithSelector,f=M,(e=>{e})(i.useSyncExternalStore);const A="/u/home",R="/u/packs",P="/u/benefits",k="/u/My-net-genealogy",O="/u/My-net",L="E-comerce",D="/u/Support",j="/u/Profile",U="/u/withdrawals",z="/u/bill-payment",F="/u/internal-transfers",V="/u/corporate-credit",B="/u/tools",H="/Admin",W="/Register/:r?",q="/u",G="/recovery_password",Y="/";function X(e,t){return function(){return e.apply(t,arguments)}}const{toString:K}=Object.prototype,{getPrototypeOf:J}=Object,$=(e=>t=>{const n=K.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Q=e=>(e=e.toLowerCase(),t=>$(t)===e),Z=e=>t=>typeof t===e,{isArray:ee}=Array,te=Z("undefined");const ne=Q("ArrayBuffer");const ie=Z("string"),re=Z("function"),se=Z("number"),ae=e=>null!==e&&"object"===typeof e,oe=e=>{if("object"!==$(e))return!1;const t=J(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},le=Q("Date"),ce=Q("File"),ue=Q("Blob"),de=Q("FileList"),he=Q("URLSearchParams"),[pe,fe,me,ge]=["ReadableStream","Request","Response","Headers"].map(Q);function ve(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ee(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(n=0;n<s;n++)a=i[n],t.call(null,e[a],a,e)}}function ye(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const _e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,xe=e=>!te(e)&&e!==_e;const be=(we="undefined"!==typeof Uint8Array&&J(Uint8Array),e=>we&&e instanceof we);var we;const Se=Q("HTMLFormElement"),Ne=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Te=Q("RegExp"),Ee=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};ve(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},Ce="abcdefghijklmnopqrstuvwxyz",Me="0123456789",Ie={DIGIT:Me,ALPHA:Ce,ALPHA_DIGIT:Ce+Ce.toUpperCase()+Me};const Ae=Q("AsyncFunction"),Re=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],_e.addEventListener("message",(e=>{let{source:t,data:r}=e;t===_e&&r===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),_e.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,re(_e.postMessage)),Pe="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_e):"undefined"!==typeof process&&process.nextTick||Re,ke={isArray:ee,isArrayBuffer:ne,isBuffer:function(e){return null!==e&&!te(e)&&null!==e.constructor&&!te(e.constructor)&&re(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||re(e.append)&&("formdata"===(t=$(e))||"object"===t&&re(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ne(e.buffer),t},isString:ie,isNumber:se,isBoolean:e=>!0===e||!1===e,isObject:ae,isPlainObject:oe,isReadableStream:pe,isRequest:fe,isResponse:me,isHeaders:ge,isUndefined:te,isDate:le,isFile:ce,isBlob:ue,isRegExp:Te,isFunction:re,isStream:e=>ae(e)&&re(e.pipe),isURLSearchParams:he,isTypedArray:be,isFileList:de,forEach:ve,merge:function e(){const{caseless:t}=xe(this)&&this||{},n={},i=(i,r)=>{const s=t&&ye(n,r)||r;oe(n[s])&&oe(i)?n[s]=e(n[s],i):oe(i)?n[s]=e({},i):ee(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ve(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ve(t,((t,i)=>{n&&re(t)?e[i]=X(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,a;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)a=r[s],i&&!i(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&J(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:$,kindOfTest:Q,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(ee(e))return e;let t=e.length;if(!se(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:Se,hasOwnProperty:Ne,hasOwnProp:Ne,reduceDescriptors:Ee,freezeMethods:e=>{Ee(e,((t,n)=>{if(re(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];re(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return ee(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ye,global:_e,isContextDefined:xe,ALPHABET:Ie,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&re(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(ae(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=ee(e)?[]:{};return ve(e,((e,t)=>{const s=n(e,i+1);!te(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:Ae,isThenable:e=>e&&(ae(e)||re(e))&&re(e.then)&&re(e.catch),setImmediate:Re,asap:Pe};function Oe(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}ke.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.status}}});const Le=Oe.prototype,De={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{De[e]={value:e}})),Object.defineProperties(Oe,De),Object.defineProperty(Le,"isAxiosError",{value:!0}),Oe.from=(e,t,n,i,r,s)=>{const a=Object.create(Le);return ke.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Oe.call(a,e.message,t,n,i,r),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const je=Oe;function Ue(e){return ke.isPlainObject(e)||ke.isArray(e)}function ze(e){return ke.endsWith(e,"[]")?e.slice(0,-2):e}function Fe(e,t,n){return e?e.concat(t).map((function(e,t){return e=ze(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Ve=ke.toFlatObject(ke,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Be=function(e,t,n){if(!ke.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=ke.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ke.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&ke.isSpecCompliantForm(t);if(!ke.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ke.isDate(e))return e.toISOString();if(!o&&ke.isBlob(e))throw new je("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(e)||ke.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(ke.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(ke.isArray(e)&&function(e){return ke.isArray(e)&&!e.some(Ue)}(e)||(ke.isFileList(e)||ke.endsWith(n,"[]"))&&(o=ke.toArray(e)))return n=ze(n),o.forEach((function(e,i){!ke.isUndefined(e)&&null!==e&&t.append(!0===a?Fe([n],i,s):null===a?n:n+"[]",l(e))})),!1;return!!Ue(e)||(t.append(Fe(r,n,s),l(e)),!1)}const u=[],d=Object.assign(Ve,{defaultVisitor:c,convertValue:l,isVisitable:Ue});if(!ke.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!ke.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),ke.forEach(n,(function(n,s){!0===(!(ke.isUndefined(n)||null===n)&&r.call(t,n,ke.isString(s)?s.trim():s,i,d))&&e(n,i?i.concat(s):[s])})),u.pop()}}(e),t};function He(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function We(e,t){this._pairs=[],e&&Be(e,this,t)}const qe=We.prototype;qe.append=function(e,t){this._pairs.push([e,t])},qe.toString=function(e){const t=e?function(t){return e.call(this,t,He)}:He;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ge=We;function Ye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xe(e,t,n){if(!t)return e;const i=n&&n.encode||Ye,r=n&&n.serialize;let s;if(s=r?r(t,n):ke.isURLSearchParams(t)?t.toString():new Ge(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Ke=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ke.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Je={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$e={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ge,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Qe="undefined"!==typeof window&&"undefined"!==typeof document,Ze="object"===typeof navigator&&navigator||void 0,et=Qe&&(!Ze||["ReactNative","NativeScript","NS"].indexOf(Ze.product)<0),tt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,nt=Qe&&window.location.href||"http://localhost",it={...e,...$e};const rt=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=e.length;if(s=!s&&ke.isArray(i)?i.length:s,o)return ke.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&ke.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&ke.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!a}if(ke.isFormData(e)&&ke.isFunction(e.entries)){const n={};return ke.forEachEntry(e,((e,i)=>{t(function(e){return ke.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const st={transitional:Je,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=ke.isObject(e);r&&ke.isHTMLForm(e)&&(e=new FormData(e));if(ke.isFormData(e))return i?JSON.stringify(rt(e)):e;if(ke.isArrayBuffer(e)||ke.isBuffer(e)||ke.isStream(e)||ke.isFile(e)||ke.isBlob(e)||ke.isReadableStream(e))return e;if(ke.isArrayBufferView(e))return e.buffer;if(ke.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Be(e,new it.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return it.isNode&&ke.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=ke.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Be(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(ke.isString(e))try{return(t||JSON.parse)(e),ke.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||st.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(ke.isResponse(e)||ke.isReadableStream(e))return e;if(e&&ke.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(r){if(n){if("SyntaxError"===r.name)throw je.from(r,je.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ke.forEach(["delete","get","head","post","put","patch"],(e=>{st.headers[e]={}}));const at=st,ot=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lt=Symbol("internals");function ct(e){return e&&String(e).trim().toLowerCase()}function ut(e){return!1===e||null==e?e:ke.isArray(e)?e.map(ut):String(e)}function dt(e,t,n,i,r){return ke.isFunction(i)?i.call(this,t,n):(r&&(t=n),ke.isString(t)?ke.isString(i)?-1!==t.indexOf(i):ke.isRegExp(i)?i.test(t):void 0:void 0)}class ht{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=ct(t);if(!r)throw new Error("header name must be a non-empty string");const s=ke.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=ut(e))}const s=(e,t)=>ke.forEach(e,((e,n)=>r(e,n,t)));if(ke.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(ke.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&ot[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(ke.isHeaders(e))for(const[a,o]of e.entries())r(o,a,n);else null!=e&&r(t,e,n);return this}get(e,t){if(e=ct(e)){const n=ke.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(ke.isFunction(t))return t.call(this,e,n);if(ke.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ct(e)){const n=ke.findKey(this,e);return!(!n||void 0===this[n]||t&&!dt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=ct(e)){const r=ke.findKey(n,e);!r||t&&!dt(0,n[r],r,t)||(delete n[r],i=!0)}}return ke.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!dt(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return ke.forEach(this,((i,r)=>{const s=ke.findKey(n,r);if(s)return t[s]=ut(i),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();a!==r&&delete t[r],t[a]=ut(i),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return ke.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&ke.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[lt]=this[lt]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=ct(e);t[i]||(!function(e,t){const n=ke.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return ke.isArray(e)?e.forEach(i):i(e),this}}ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ke.reduceDescriptors(ht.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),ke.freezeMethods(ht);const pt=ht;function ft(e,t){const n=this||at,i=t||n,r=pt.from(i.headers);let s=i.data;return ke.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function mt(e){return!(!e||!e.__CANCEL__)}function gt(e,t,n){je.call(this,null==e?"canceled":e,je.ERR_CANCELED,t,n),this.name="CanceledError"}ke.inherits(gt,je,{__CANCEL__:!0});const vt=gt;function yt(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new je("Request failed with status code "+n.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const _t=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[a];r||(r=l),n[s]=o,i[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const xt=function(e,t){let n,i,r=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,i||(i=setTimeout((()=>{i=null,a(n)}),s-t)))},()=>n&&a(n)]},bt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=_t(50,250);return xt((n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o);i=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},wt=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},St=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ke.asap((()=>e(...n)))},Nt=it.hasStandardBrowserEnv?function(){const e=it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=ke.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Tt=it.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const a=[e+"="+encodeURIComponent(t)];ke.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ke.isString(i)&&a.push("path="+i),ke.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Et(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ct=e=>e instanceof pt?{...e}:e;function Mt(e,t){t=t||{};const n={};function i(e,t,n){return ke.isPlainObject(e)&&ke.isPlainObject(t)?ke.merge.call({caseless:n},e,t):ke.isPlainObject(t)?ke.merge({},t):ke.isArray(t)?t.slice():t}function r(e,t,n){return ke.isUndefined(t)?ke.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!ke.isUndefined(t))return i(void 0,t)}function a(e,t){return ke.isUndefined(t)?ke.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t)=>r(Ct(e),Ct(t),!0)};return ke.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=l[i]||r,a=s(e[i],t[i],i);ke.isUndefined(a)&&s!==o||(n[i]=a)})),n}const It=e=>{const t=Mt({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=pt.from(o),t.url=Xe(Et(t.baseURL,t.url),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ke.isFormData(i))if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(it.hasStandardBrowserEnv&&(r&&ke.isFunction(r)&&(r=r(t)),r||!1!==r&&Nt(t.url))){const e=s&&a&&Tt.read(a);e&&o.set(s,e)}return t},At="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=It(e);let r=i.data;const s=pt.from(i.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function f(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=pt.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());yt((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new je("Request aborted",je.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new je("Network Error",je.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||Je;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new je(t,r.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,e,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&ke.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),ke.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),d&&"json"!==d&&(m.responseType=i.responseType),p&&([l,u]=bt(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=bt(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{m&&(n(!t||t.type?new vt(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===it.protocols.indexOf(v)?n(new je("Unsupported protocol "+v+":",je.ERR_BAD_REQUEST,e)):m.send(r||null)}))},Rt=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof je?t:new vt(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,r(new je("timeout ".concat(t," of ms exceeded"),je.ETIMEDOUT))}),t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:o}=i;return o.unsubscribe=()=>ke.asap(a),o}},Pt=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},kt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Ot=(e,t,n,i)=>{const r=async function*(e,t){for await(const n of kt(e))yield*Pt(n,t)}(e,t);let s,a=0,o=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return o(),void e.close();let s=i.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},Lt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Dt=Lt&&"function"===typeof ReadableStream,jt=Lt&&("function"===typeof TextEncoder?(Ut=new TextEncoder,e=>Ut.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ut;const zt=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(r){return!1}},Ft=Dt&&zt((()=>{let e=!1;const t=new Request(it.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Vt=Dt&&zt((()=>ke.isReadableStream(new Response("").body))),Bt={stream:Vt&&(e=>e.body)};var Ht;Lt&&(Ht=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Bt[e]&&(Bt[e]=ke.isFunction(Ht[e])?t=>t[e]():(t,n)=>{throw new je("Response type '".concat(e,"' is not supported"),je.ERR_NOT_SUPPORT,n)})})));const Wt=async(e,t)=>{const n=ke.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(ke.isBlob(e))return e.size;if(ke.isSpecCompliantForm(e)){const t=new Request(it.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ke.isArrayBufferView(e)||ke.isArrayBuffer(e)?e.byteLength:(ke.isURLSearchParams(e)&&(e+=""),ke.isString(e)?(await jt(e)).byteLength:void 0)})(t):n},qt={http:null,xhr:At,fetch:Lt&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=It(e);c=c?(c+"").toLowerCase():"text";let p,f=Rt([r,s&&s.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Ft&&"get"!==n&&"head"!==n&&0!==(g=await Wt(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(ke.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=wt(g,bt(St(l)));i=Ot(n.body,65536,e,t)}}ke.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:r?d:void 0});let s=await fetch(p);const a=Vt&&("stream"===c||"response"===c);if(Vt&&(o||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=ke.toFiniteNumber(s.headers.get("content-length")),[n,i]=o&&wt(t,bt(St(o),!0))||[];s=new Response(Ot(s.body,65536,n,(()=>{i&&i(),m&&m()})),e)}c=c||"text";let v=await Bt[ke.findKey(Bt,c)||"text"](s,e);return!a&&m&&m(),await new Promise(((t,n)=>{yt(t,n,{data:v,headers:pt.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new je("Network Error",je.ERR_NETWORK,e,p),{cause:v.cause||v});throw je.from(v,v&&v.code,e,p)}})};ke.forEach(qt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Gt=e=>"- ".concat(e),Yt=e=>ke.isFunction(e)||null===e||!1===e,Xt=e=>{e=ke.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!Yt(n)&&(i=qt[(t=String(n)).toLowerCase()],void 0===i))throw new je("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Gt).join("\n"):" "+Gt(e[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function Kt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vt(null,e)}function Jt(e){Kt(e),e.headers=pt.from(e.headers),e.data=ft.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Xt(e.adapter||at.adapter)(e).then((function(t){return Kt(e),t.data=ft.call(e,e.transformResponse,t),t.headers=pt.from(t.headers),t}),(function(t){return mt(t)||(Kt(e),t&&t.response&&(t.response.data=ft.call(e,e.transformResponse,t.response),t.response.headers=pt.from(t.response.headers))),Promise.reject(t)}))}const $t="1.7.7",Qt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Qt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Zt={};Qt.transitional=function(e,t,n){function i(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new je(i(r," has been removed"+(t?" in "+t:"")),je.ERR_DEPRECATED);return t&&!Zt[r]&&(Zt[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};const en={assertOptions:function(e,t,n){if("object"!==typeof e)throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new je("option "+s+" must be "+n,je.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new je("Unknown option "+s,je.ERR_BAD_OPTION)}},validators:Qt},tn=en.validators;class nn{constructor(e){this.defaults=e,this.interceptors={request:new Ke,response:new Ke}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(i){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Mt(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&en.assertOptions(n,{silentJSONParsing:tn.transitional(tn.boolean),forcedJSONParsing:tn.transitional(tn.boolean),clarifyTimeoutError:tn.transitional(tn.boolean)},!1),null!=i&&(ke.isFunction(i)?t.paramsSerializer={serialize:i}:en.assertOptions(i,{encode:tn.function,serialize:tn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&ke.merge(r.common,r[t.method]);r&&ke.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=pt.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[Jt.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(yo){t.call(this,yo);break}}try{c=Jt.call(this,h)}catch(yo){return Promise.reject(yo)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Xe(Et((e=Mt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ke.forEach(["delete","get","head","options"],(function(e){nn.prototype[e]=function(t,n){return this.request(Mt(n||{},{method:e,url:t,data:(n||{}).data}))}})),ke.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Mt(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}nn.prototype[e]=t(),nn.prototype[e+"Form"]=t(!0)}));const rn=nn;class sn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new vt(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sn((function(t){e=t})),cancel:e}}}const an=sn;const on={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(on).forEach((e=>{let[t,n]=e;on[n]=t}));const ln=on;const cn=function e(t){const n=new rn(t),i=X(rn.prototype.request,n);return ke.extend(i,rn.prototype,n,{allOwnKeys:!0}),ke.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Mt(t,n))},i}(at);cn.Axios=rn,cn.CanceledError=vt,cn.CancelToken=an,cn.isCancel=mt,cn.VERSION=$t,cn.toFormData=Be,cn.AxiosError=je,cn.Cancel=cn.CanceledError,cn.all=function(e){return Promise.all(e)},cn.spread=function(e){return function(t){return e.apply(null,t)}},cn.isAxiosError=function(e){return ke.isObject(e)&&!0===e.isAxiosError},cn.mergeConfig=Mt,cn.AxiosHeaders=pt,cn.formToJSON=e=>rt(ke.isHTMLForm(e)?new FormData(e):e),cn.getAdapter=Xt,cn.HttpStatusCode=ln,cn.default=cn;const un=cn,dn="http://vps-4676674-x.dattaweb.com:8080/lcc/user",hn="http://vps-4676674-x.dattaweb.com:8080/lcc/peticion",pn="http://vps-4676674-x.dattaweb.com:8080/lcc/permiso",fn="http://vps-4676674-x.dattaweb.com:8080/lcc/hist",mn=un.create({baseURL:dn}),gn=async e=>{try{return await mn.get("".concat(dn,"/cardUser/").concat(e))}catch(yo){console.error(yo)}},vn=un.create({baseURL:pn});function yn(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var _n=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),xn=()=>Math.random().toString(36).substring(7).split("").join("."),bn={INIT:"@@redux/INIT".concat(xn()),REPLACE:"@@redux/REPLACE".concat(xn()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(xn())};function wn(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Sn(e,t,n){if("function"!==typeof e)throw new Error(yn(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(yn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(yn(1));return n(Sn)(e,t)}let i=e,r=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach(((e,t)=>{a.set(t,e)})))}function u(){if(l)throw new Error(yn(3));return r}function d(e){if("function"!==typeof e)throw new Error(yn(4));if(l)throw new Error(yn(5));let t=!0;c();const n=o++;return a.set(n,e),function(){if(t){if(l)throw new Error(yn(6));t=!1,c(),a.delete(n),s=null}}}function h(e){if(!wn(e))throw new Error(yn(7));if("undefined"===typeof e.type)throw new Error(yn(8));if("string"!==typeof e.type)throw new Error(yn(17));if(l)throw new Error(yn(9));try{l=!0,r=i(r,e)}finally{l=!1}return(s=a).forEach((e=>{e()})),e}h({type:bn.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(yn(10));i=e,h({type:bn.REPLACE})},[_n]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(yn(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[_n](){return this}}}}}function Nn(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const i=t[a];0,"function"===typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:bn.INIT}))throw new Error(yn(12));if("undefined"===typeof n(void 0,{type:bn.PROBE_UNKNOWN_ACTION()}))throw new Error(yn(13))}))}(n)}catch(s){r=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(r)throw r;let s=!1;const a={};for(let r=0;r<i.length;r++){const o=i[r],l=n[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(yn(14))}a[o]=u,s=s||u!==c}return s=s||i.length!==Object.keys(e).length,s?a:e}}function Tn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function En(e){return t=>{let{dispatch:n,getState:i}=t;return t=>r=>"function"===typeof r?r(n,i,e):t(r)}}var Cn=En(),Mn=En,In=Symbol.for("immer-nothing"),An=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function Pn(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var kn=Object.getPrototypeOf;function On(e){return!!e&&!!e[Rn]}function Ln(e){var t;return!!e&&(jn(e)||Array.isArray(e)||!!e[An]||!(null===(t=e.constructor)||void 0===t||!t[An])||Bn(e)||Hn(e))}var Dn=Object.prototype.constructor.toString();function jn(e){if(!e||"object"!==typeof e)return!1;const t=kn(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Dn}function Un(e,t){0===zn(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,i)=>t(i,n,e)))}function zn(e){const t=e[Rn];return t?t.type_:Array.isArray(e)?1:Bn(e)?2:Hn(e)?3:0}function Fn(e,t){return 2===zn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vn(e,t,n){const i=zn(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function Bn(e){return e instanceof Map}function Hn(e){return e instanceof Set}function Wn(e){return e.copy_||e.base_}function qn(e,t){if(Bn(e))return new Map(e);if(Hn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=jn(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Rn];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(kn(e),t)}{const t=kn(e);if(null!==t&&n)return{...e};const i=Object.create(t);return Object.assign(i,e)}}function Gn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xn(e)||On(e)||!Ln(e)||(zn(e)>1&&(e.set=e.add=e.clear=e.delete=Yn),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return Gn(n,!0)}))),e}function Yn(){Pn(2)}function Xn(e){return Object.isFrozen(e)}var Kn,Jn={};function $n(e){const t=Jn[e];return t||Pn(0),t}function Qn(){return Kn}function Zn(e,t){t&&($n("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ei(e){ti(e),e.drafts_.forEach(ii),e.drafts_=null}function ti(e){e===Kn&&(Kn=e.parent_)}function ni(e){return Kn={drafts_:[],parent_:Kn,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ii(e){const t=e[Rn];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ri(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Rn].modified_&&(ei(t),Pn(4)),Ln(e)&&(e=si(t,e),t.parent_||oi(t,e)),t.patches_&&$n("Patches").generateReplacementPatches_(n[Rn].base_,e,t.patches_,t.inversePatches_)):e=si(t,n,[]),ei(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==In?e:void 0}function si(e,t,n){if(Xn(t))return t;const i=t[Rn];if(!i)return Un(t,((r,s)=>ai(e,i,t,r,s,n))),t;if(i.scope_!==e)return t;if(!i.modified_)return oi(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let r=t,s=!1;3===i.type_&&(r=new Set(t),t.clear(),s=!0),Un(r,((r,a)=>ai(e,i,t,r,a,n,s))),oi(e,t,!1),n&&e.patches_&&$n("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function ai(e,t,n,i,r,s,a){if(On(r)){const a=si(e,r,s&&t&&3!==t.type_&&!Fn(t.assigned_,i)?s.concat(i):void 0);if(Vn(n,i,a),!On(a))return;e.canAutoFreeze_=!1}else a&&n.add(r);if(Ln(r)&&!Xn(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;si(e,r),t&&t.scope_.parent_||"symbol"===typeof i||!Object.prototype.propertyIsEnumerable.call(n,i)||oi(e,r)}}function oi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gn(t,n)}var li={get(e,t){if(t===Rn)return e;const n=Wn(e);if(!Fn(n,t))return function(e,t,n){var i;const r=di(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!Ln(i)?i:i===ui(e.base_,t)?(pi(e),e.copy_[t]=fi(i,e)):i},has:(e,t)=>t in Wn(e),ownKeys:e=>Reflect.ownKeys(Wn(e)),set(e,t,n){const i=di(Wn(e),t);if(null!==i&&void 0!==i&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=ui(Wn(e),t),a=null===i||void 0===i?void 0:i[Rn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(s=i)?0!==r||1/r===1/s:r!==r&&s!==s)&&(void 0!==n||Fn(e.base_,t)))return!0;pi(e),hi(e)}var r,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ui(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,pi(e),hi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Wn(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){Pn(11)},getPrototypeOf:e=>kn(e.base_),setPrototypeOf(){Pn(12)}},ci={};function ui(e,t){const n=e[Rn];return(n?Wn(n):e)[t]}function di(e,t){if(!(t in e))return;let n=kn(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=kn(n)}}function hi(e){e.modified_||(e.modified_=!0,e.parent_&&hi(e.parent_))}function pi(e){e.copy_||(e.copy_=qn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Un(li,((e,t)=>{ci[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ci.deleteProperty=function(e,t){return ci.set.call(this,e,t,void 0)},ci.set=function(e,t,n){return li.set.call(this,e[0],t,n,e[0])};function fi(e,t){const n=Bn(e)?$n("MapSet").proxyMap_(e,t):Hn(e)?$n("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:Qn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=li;n&&(r=[i],s=ci);const{revoke:a,proxy:o}=Proxy.revocable(r,s);return i.draft_=o,i.revoke_=a,o}(e,t);return(t?t.scope_:Qn()).drafts_.push(n),n}function mi(e){if(!Ln(e)||Xn(e))return e;const t=e[Rn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=qn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=qn(e,!0);return Un(n,((e,t)=>{Vn(n,e,mi(t))})),t&&(t.finalized_=!1),n}var gi=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const i=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return i.produce(e,(e=>t.call(this,e,...s)))}}let i;if("function"!==typeof t&&Pn(6),void 0!==n&&"function"!==typeof n&&Pn(7),Ln(e)){const r=ni(this),s=fi(e,void 0);let a=!0;try{i=t(s),a=!1}finally{a?ei(r):ti(r)}return Zn(r,n),ri(i,r)}if(!e||"object"!==typeof e){if(i=t(e),void 0===i&&(i=e),i===In&&(i=void 0),this.autoFreeze_&&Gn(i,!0),n){const t=[],r=[];$n("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}Pn(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...r)))};let i,r;return[this.produce(e,n,((e,t)=>{i=e,r=t})),i,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ln(e)||Pn(8),On(e)&&(e=function(e){On(e)||Pn(10);return mi(e)}(e));const t=ni(this),n=fi(e,void 0);return n[Rn].isManual_=!0,ti(t),n}finishDraft(e,t){const n=e&&e[Rn];n&&n.isManual_||Pn(9);const{scope_:i}=n;return Zn(i,t),ri(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=$n("Patches").applyPatches_;return On(e)?i(e,t):this.produce(e,(e=>i(e,t)))}},vi=gi.produce;gi.produceWithPatches.bind(gi),gi.setAutoFreeze.bind(gi),gi.setUseStrictShallowCopy.bind(gi),gi.applyPatches.bind(gi),gi.createDraft.bind(gi),gi.finishDraft.bind(gi);var yi="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Tn:Tn.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function _i(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Fi(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return wn(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var xi=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function bi(e){return Ln(e)?vi(e,(()=>{})):e}function wi(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Si="RTK_autoBatch",Ni=e=>t=>{setTimeout(t,e)},Ti=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let i=new xi(e);return n&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let i=!0,r=!1,s=!1;const a=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ni(10):"callback"===e.type?e.queueNotification:Ni(e.timeout),l=()=>{s=!1,r&&(r=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>i&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{var t;return i=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Si]),r=!i,r&&(s||(s=!0,o(l))),n.dispatch(e)}finally{i=!0}}})}}("object"===typeof n?n:void 0)),i};function Ei(e){const t={},n=[];let i;const r={addCase(e,n){const i="string"===typeof e?e:e.type;if(!i)throw new Error(Fi(28));if(i in t)throw new Error(Fi(29));return t[i]=n,r},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(i=e,r)};return e(r),[t,n,i]}var Ci=Symbol.for("rtk-slice-createasyncthunk");function Mi(e,t){return"".concat(e,"/").concat(t)}function Ii(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Ci];return function(e){const{name:t,reducerPath:i=t}=e;if(!t)throw new Error(Fi(11));const r=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(r),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Fi(12));if(n in a.sliceCaseReducersByType)throw new Error(Fi(13));return a.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],i]="function"===typeof e.extraReducers?Ei(e.extraReducers):[e.extraReducers],r={...t,...a.sliceCaseReducersByType};return function(e,t){let n,[i,r,s]=Ei(t);if("function"===typeof e)n=()=>bi(e());else{const t=bi(e);n=()=>t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,a=[i[t.type],...r.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===a.filter((e=>!!e)).length&&(a=[s]),a.reduce(((e,n)=>{if(n){if(On(e)){const i=n(e,t);return void 0===i?e:i}if(Ln(e))return vi(e,(e=>n(e,t)));{const i=n(e,t);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}}return e}),e)}return a.getInitialState=n,a}(e.initialState,(e=>{for(let t in r)e.addCase(t,r[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)}))}s.forEach((i=>{const s=r[i],a={reducerName:i,type:Mi(t,i),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let i,r,{type:s,reducerName:a,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Fi(17));i=t.reducer,r=t.prepare}else i=t;n.addCase(s,i).exposeCaseReducer(a,i).exposeAction(a,r?_i(s,r):_i(s))}(a,s,o):function(e,t,n,i){let{type:r,reducerName:s}=e;if(!i)throw new Error(Fi(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=i(r,a,d);n.exposeAction(s,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(s,{fulfilled:o||Pi,pending:l||Pi,rejected:c||Pi,settled:u||Pi})}(a,s,o,n)}));const c=e=>e,u=new Map;let d;function h(e,t){return d||(d=l()),d(e,t)}function p(){return d||(d=l()),d.getInitialState()}function f(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function i(e){let i=e[t];return"undefined"===typeof i&&n&&(i=p()),i}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const i=wi(u,n,(()=>new WeakMap));return wi(i,t,(()=>{const i={};for(const[s,a]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;i[s]=Ai(a,t,p,n)}return i}))}return{reducerPath:t,getSelectors:r,get selectors(){return r(i)},selectSlice:i}}const m={name:t,reducer:h,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...f(i),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null!==t&&void 0!==t?t:i;return e.inject({reducerPath:r,reducer:h},n),{...m,...f(r,!0)}}};return m}}function Ai(e,t,n,i){function r(r){let s=t(r);"undefined"===typeof s&&i&&(s=n());for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return e(s,...o)}return r.unwrapped=e,r}var Ri=Ii();function Pi(){}var ki="listener",Oi="completed",Li="cancelled";"task-".concat(Li),"task-".concat(Oi),"".concat(ki,"-").concat(Li),"".concat(ki,"-").concat(Oi);var{assign:Di}=Object,ji="listenerMiddleware",Ui=Di(_i("".concat(ji,"/add")),{withTypes:()=>Ui}),zi=("".concat(ji,"/removeAll"),Di(_i("".concat(ji,"/remove")),{withTypes:()=>zi}));Symbol.for("rtk-state-proxy-original");function Fi(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const Vi=(e,t,n)=>e={...e,[t]:n},Bi=e=>{switch(e){case 1:return[0,100,200,300,400];case 2:return[0,500,600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400];case 3:return[0,2500,2600,2700,2800,2900,3e3,3100,3200,3300,3400,3500,3600,3700,3800,3900,4e3,4100,4200,4300,4400,4500,4600,4700,4800,4900];case 4:return[5e3,5100,5200,5300,5400,5500,5600,5700,5800,5900,6e3,6100,6200,6300,6400,6500,6600,6700,6800,6900,7e3,7100,7200,7300,7400,7500,7600,7700,7800,7900,8e3,8100,8200,8300,8400,8500,8600,8700,8800,8900,9e3,9100,9200,9300,9400,9500,9600,9700,9800,9900];default:return[0]}},Hi=(e,t,n)=>{e((e=>({...e,[t]:n})))},Wi={id:0,email:"",username:"",apellidos_user:"",nombre_user:"",password:"",rol:"",wallet:{fecha_ingreso:"",ganancia_total:0,mensualidad:"",rango:0,referido:"",retiro_total:0,wallet_address:"",wallet_com:0,wallet_div:0,wallet_ec:0,staterpack:0,deuda:{deuda:0,wallet_deuda:0},interesCompuesto:[],permisos:[],bonos:{fast_track:0,matching:0,membresia_mensual:0,rango_res:0,ref_direct:0,update_st:0}}},qi={usersList:[],userSelect:Wi,userLogged:Wi,userSelectOrignial:Wi,cardUser:{rango:"",referidosDirectos:0,referidosTotal:0,teamCapital:0,imgRango:""},loginRequest:{credencial:"",password:""},registerRequest:{email:"",password:"",username:"",referido:""},loading:!0,logged:!1,myNet:[],myNetGen:[]},Gi=Ri({name:"user",initialState:qi,reducers:{loadingUsers:(e,t)=>{let{payload:n}=t;e.usersList=n},loadingSelectUser:(e,t)=>{let{payload:n}=t;const i={...e.userSelect,...n};e.userSelect=i,e.userSelectOrignial=i},handleChange:(e,t)=>{var n;let{payload:i}=t;switch(i.nodo){case null:e.userSelect=Vi(e.userSelect,i.name,i.value);break;case"wallet":e.userSelect.wallet=Vi(e.userSelect.wallet,i.name,i.value);break;case"bonos":e.userSelect.wallet.bonos=Vi(e.userSelect.wallet.bonos,i.name,i.value);break;case"deuda":e.userSelect.wallet.deuda=Vi(e.userSelect.wallet.deuda,i.name,i.value);break;case"login":e.loginRequest=Vi(e.loginRequest,i.name,i.value);break;case"register":e.registerRequest=Vi(e.registerRequest,i.name,i.value);case"userLog":e.userLogged=Vi(e.userLogged,i.name,i.value);case"log":e.logged=i;case"myNet":e.myNet=i;case"myNetGen":e.myNetGen=i;case"permisos":e.userLogged||(e.userLogged={}),(n=e.userLogged).wallet||(n.wallet={}),e.userLogged.wallet.permisos=(null===i||void 0===i?void 0:i.value)||[]}},loadingLoggedUser:(e,t)=>{let{payload:n}=t;e.userLogged=n},loadingCardUser:(e,t)=>{let{payload:n}=t;e.cardUser=n},changeLoadingSlice:(e,t)=>{let{payload:n}=t;e.loading=n},resetState:(e,t)=>{let{payload:n}=t}}}),{loadingUsers:Yi,loadingSelectUser:Xi,userLogged:Ki,cardUser:Ji,userSelectOrignial:$i,handleChange:Qi,loadingLoggedUser:Zi,loadingCardUser:er,changeLoading:tr,resetState:nr}=Gi.actions,ir=Gi.reducer;var rr=n(1688);const sr=()=>{const e=I(),t=(0,rr.useHistory)(),{usersList:n,userSelect:i,userLogged:r,userSelectOrignial:s,cardUser:a,loginRequest:o,registerRequest:l,loading:c,changeLoadingSlice:u}=v((e=>e.user)),d=(t,n,i)=>{e(Qi({name:t,value:n,nodo:i}))},h=e=>{t.push(e)},p=async()=>{const t=await(async e=>{try{return await mn.post("".concat(dn,"/login"),e)}catch(yo){return console.log(yo),yo.response}})(o);return 200!=(null===t||void 0===t?void 0:t.status)||(localStorage.setItem("user",null===t||void 0===t?void 0:t.data.username),localStorage.setItem("pass",null===t||void 0===t?void 0:t.data.password),e(Zi(null===t||void 0===t?void 0:t.data))),t};return{usersList:n,userSelect:i,userLogged:r,cardUser:a,loginRequest:o,registerRequest:l,loading:c,getCardUserData:gn,changeLoading:t=>{e(u(t))},getAllUsers:async()=>{try{const t=await(async()=>{try{return await mn.get("".concat(dn,"/all"))}catch(yo){console.error(yo)}})();if(null!==t&&void 0!==t&&t.data)return void e(Yi(null===t||void 0===t?void 0:t.data));e(Yi([]))}catch(yo){console.log(yo)}},getSelectUser:async t=>{try{const n=await(async e=>{try{return await mn.get("".concat(dn,"/").concat(e))}catch(yo){console.error(yo)}})(t);e(Xi(null===n||void 0===n?void 0:n.data)),console.log(null===n||void 0===n?void 0:n.data)}catch(yo){console.log(yo)}},handleChangeState:d,updateByAdmin:async e=>{const t=i;await(async(e,t)=>{try{return await mn.patch("".concat(dn,"/").concat(e),t)}catch(yo){console.error(yo)}})(e,t)},tryLogin:p,navigateTo:h,registerUser:async()=>{try{const e=await(async e=>{try{return await mn.post("".concat(dn),e)}catch(yo){console.error(yo)}})(l);null!==e&&void 0!==e&&e.status&&201==(null===e||void 0===e?void 0:e.status)&&(d("credencial",l.username,"login"),d("password",l.password,"login"),await p(),h(A))}catch(yo){alert("Error"),console.log(yo)}},getMyNet:async e=>{var t;const n=await(async e=>{try{return await mn.get("".concat(dn,"/myNet/").concat(e))}catch(yo){console.error(yo)}})(e);return null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.length?n.data:[]},updatePermiso:async e=>{const t=await(async e=>{try{return await vn.post("".concat(pn),e)}catch(yo){console.log(yo)}})(e);return null===t||void 0===t||!t.status||200!=(null===t||void 0===t?void 0:t.status)||t},saveIc:async e=>{const t=await(async e=>{try{return await mn.post("".concat(dn,"/ic/save"),e)}catch(yo){return console.error(yo),yo.response}})(e);if(null!==t&&void 0!==t&&t.status&&200==(null===t||void 0===t?void 0:t.status))return await p(),t},logOut:()=>{e(nr()),h(Y)},validateNip:async e=>{const t=await(async(e,t)=>{try{return await mn.post("".concat(dn,"/validateNip/").concat(e),null,{params:{nip:t}})}catch(yo){return console.error(yo),yo.response}})(null===r||void 0===r?void 0:r.username,e);return!(null===t||void 0===t||!t.status||200!=(null===t||void 0===t?void 0:t.status))},update:async e=>{const t=await(async e=>{try{return await mn.put("".concat(dn,"/update"),e)}catch(yo){return console.error(yo),yo.response}})(e);return null!==t&&void 0!==t&&t.status&&200==(null===t||void 0===t?void 0:t.status)?200:400},sendEmail:async(e,t)=>{const n=await(async(e,t)=>{try{return await mn.post("".concat(dn,"/sendEmail"),{template:e,bodyParams:t})}catch(yo){return console.error(yo),yo.response}})(e,t);return null!==n&&void 0!==n&&n.status&&200==(null===n||void 0===n?void 0:n.status)?200:400},updateNip:async e=>{const t=await(async(e,t,n)=>{try{return await mn.put("".concat(dn,"/updateNip/").concat(e,"/").concat(t),{newNip:n})}catch(yo){return console.error(yo),yo.response}})(r.wallet.wallet_id,r.id,e);return null!==t&&void 0!==t&&t.status&&200==(null===t||void 0===t?void 0:t.status)?200:400}}},ar=n.p+"static/media/rank-1.6cea7685b9be44369842.png",or=n.p+"static/media/Rank-2.f63ea47233f4b58a37c7.png",lr=n.p+"static/media/Rank-3.2360e3d232f0d189438d.png",cr=n.p+"static/media/Rank-4.2c882b173e21a34f20f7.png",ur=n.p+"static/media/Rank-5.1f46908c5afe5efc91ce.png",dr=n.p+"static/media/Rank-6.0cfeb0c4567c691755e7.png",hr=n.p+"static/media/Rank-7.f5268433f530dc9537c9.png",pr=n.p+"static/media/Rank-8.e3234e1ce151d95e61e3.png",fr=n.p+"static/media/Rank-9.88cfdfc55832aa05393b.png",mr=e=>{switch(e){case 1:return{rango:"Zafiro Ejecutivo",imgRank:ar};case 2:return{rango:"Ruby Ejecutivo",imgRank:or};case 3:return{rango:"Esmeralda Ejecutivo",imgRank:lr};case 4:return{rango:"Ejecutivo Diamante",imgRank:cr};case 5:return{rango:"Diamante Azul",imgRank:ur};case 6:return{rango:"Diamante Negro",imgRank:dr};case 7:return{rango:"Diamante Royal",imgRank:hr};case 8:return{rango:"Diamante Corona",imgRank:pr};case 9:return{rango:"Presidente Royal",imgRank:fr};default:return{rango:"No Rank",imgRank:r}}},gr=e=>{switch(!0){case e>99&&e<500:return"BUILDER";case e>499&&e<2500:return"BRONZE";case e>2499&&e<5e3:return"SILVER";case e>4999&&e<1e4:return"GOLD";case e>=1e4:return"PLATINUM";default:return"No pack"}};var vr=n(579);const yr=()=>{const{userLogged:e,getCardUserData:t}=sr(),[n,s]=(0,i.useState)({rango:null,teamCapital:"",imgRank:null,referidosDirectos:"",referidosTotal:"",loading:!0});(0,i.useEffect)((()=>{a()}),[e]);const a=async()=>{const n=await t(e.username),{rango:i,imgRank:r}=mr(e.wallet.rango);s((e=>({...e,teamCapital:(null===n||void 0===n?void 0:n.data.teamCapital)||0,referidosDirectos:(null===n||void 0===n?void 0:n.data.referidosDirectos)||0,referidosTotal:(null===n||void 0===n?void 0:n.data.referidosTotal)||0,rango:i,imgRank:r,loading:!1})))};return(0,vr.jsx)("section",{className:"userDetail",children:n.loading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("div",{className:"sec1",children:[(0,vr.jsx)("p",{children:"Your rank"}),(0,vr.jsx)("span",{children:(null===n||void 0===n?void 0:n.rango)||"no rank"})]}),(0,vr.jsx)("div",{className:"sec2",children:(0,vr.jsx)("img",{className:"rangoImg",src:(null===n||void 0===n?void 0:n.imgRank)||r,alt:"rango"})}),(0,vr.jsxs)("div",{className:"sec3",children:[(0,vr.jsx)("span",{children:(null===e||void 0===e?void 0:e.username)||""}),(0,vr.jsxs)("p",{children:["Team capital: $",null===n||void 0===n?void 0:n.teamCapital,(0,vr.jsx)("img",{alt:"logo_usdt"})]}),(0,vr.jsxs)("p",{children:["Joined on: ",(null===e||void 0===e?void 0:e.wallet.fecha_ingreso)||""]})]}),(0,vr.jsx)("div",{className:"sec4",children:(0,vr.jsxs)("div",{className:"datosRedes",children:[(0,vr.jsx)("p",{className:"titulo",children:"Direct"}),(0,vr.jsx)("p",{className:"datoRed",children:null===n||void 0===n?void 0:n.referidosDirectos})]})}),(0,vr.jsx)("div",{className:"sec5",children:(0,vr.jsxs)("div",{className:"datosRedes",children:[(0,vr.jsx)("p",{className:"titulo",children:"Total network"}),(0,vr.jsx)("p",{className:"datoRed",children:null===n||void 0===n?void 0:n.referidosTotal})]})})]})})},_r=e=>{const[t,n]=(0,i.useState)(3);(0,i.useEffect)((()=>{let i;return e.visible&&t>0?i=setInterval((()=>{n((e=>e-1))}),1e3):0===t&&(r(),e.setVisible(!1)),()=>clearInterval(i)}),[e.visible,t]);const r=()=>{n(3),e.setVisible(!1)};return(0,vr.jsxs)("div",{className:e.visible?"success":"none",children:[(0,vr.jsx)("div",{className:"success__icon",children:(0,vr.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,vr.jsx)("path",{"clip-rule":"evenodd",d:"m12 1c-6.075 0-11 4.925-11 11s4.925 11 11 11 11-4.925 11-11-4.925-11-11-11zm4.768 9.14c.0878-.1004.1546-.21726.1966-.34383.0419-.12657.0581-.26026.0477-.39319-.0105-.13293-.0475-.26242-.1087-.38085-.0613-.11844-.1456-.22342-.2481-.30879-.1024-.08536-.2209-.14938-.3484-.18828s-.2616-.0519-.3942-.03823c-.1327.01366-.2612.05372-.3782.1178-.1169.06409-.2198.15091-.3027.25537l-4.3 5.159-2.225-2.226c-.1886-.1822-.4412-.283-.7034-.2807s-.51301.1075-.69842.2929-.29058.4362-.29285.6984c-.00228.2622.09851.5148.28067.7034l3 3c.0983.0982.2159.1748.3454.2251.1295.0502.2681.0729.4069.0665.1387-.0063.2747-.0414.3991-.1032.1244-.0617.2347-.1487.3236-.2554z",fill:"#393a37","fill-rule":"evenodd"})})}),(0,vr.jsx)("div",{className:"success__title",children:e.texto}),(0,vr.jsx)("div",{className:"success__close",onClick:()=>{e.setVisible(!1)},children:(0,vr.jsx)("svg",{height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,vr.jsx)("path",{d:"m15.8333 5.34166-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z",fill:"#393a37"})})})]})},xr=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),{userLogged:s}=sr();return(0,vr.jsxs)("div",{className:"contain-link",children:[(0,vr.jsx)(_r,{visible:e,setVisible:t,texto:n}),(0,vr.jsx)("div",{className:"sec1-cl",children:(0,vr.jsxs)("h4",{children:[(0,vr.jsx)("i",{class:"bi bi-person-fill-add"})," Invite members"]})}),(0,vr.jsxs)("div",{className:"sec2-cl",children:[(0,vr.jsxs)("button",{onClick:()=>{document.getElementById("invitationLink").select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),t(!0),r("Invitation link copied")},children:[(0,vr.jsx)("i",{class:"bi bi-copy"})," Copy invite link"]}),(0,vr.jsx)("p",{children:"Share this link with your friends to invite them to join."})]}),(0,vr.jsx)("div",{className:"sec3-cl",children:(0,vr.jsx)("input",{id:"invitationLink",type:"text",value:"https://legalcapital-corp.com/register/"+(null===s||void 0===s?void 0:s.username)||0,readOnly:!0})})]})},br=n.p+"static/media/usdt.176daf5b0e7615e72cd2.png",wr=e=>{let{titulo:t,dato:n}=e;const[r,s]=(0,i.useState)(0);return(0,i.useEffect)((()=>{s(n||0)}),[n]),(0,vr.jsx)("section",{className:"contain-data-home",children:(0,vr.jsxs)("div",{className:"case",children:[(0,vr.jsx)("p",{class:"text-sm text-muted-foreground",children:t}),(0,vr.jsxs)("div",{className:"case2",children:[(0,vr.jsx)("img",{src:br,alt:"logo_usdt"}),(0,vr.jsxs)("h3",{class:"whitespace-nowrap text-2xl font-semibold leading-none tracking-tight",children:[n," USDT"]})]})]})})},Sr=e=>{const[t,n]=(0,i.useState)("");(0,i.useEffect)((()=>{n(r(e.dato))}),[e.dato]);const r=e=>{switch(!0){case e>99&&e<500:return"BUILDER";case e>499&&e<2500:return"BRONZE";case e>2499&&e<5e3:return"SILVER";case e>4999&&e<1e4:return"GOLD";case e>=1e4:return"PLATINUM";default:return"No pack"}};return(0,vr.jsxs)("section",{className:"cardpack",children:[(0,vr.jsxs)("div",{className:"cardpack-s1",children:[(0,vr.jsx)("p",{className:"pcp1",children:"YOUR PACKAGE TOTAL: "}),(0,vr.jsx)("p",{className:"pcp2",children:t})]}),(0,vr.jsx)("div",{className:"cardpack-s2",children:(0,vr.jsxs)("div",{className:"cardpack-s3",children:[(0,vr.jsx)("img",{src:br,alt:"logo_usdt"}),(0,vr.jsxs)("p",{className:"pcp3",children:[e.dato.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]})})]})},Nr=e=>{var t,n;let{isOpen:r,closeModal:s}=e;const[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(500),[u,d]=(0,i.useState)(12);(0,i.useEffect)((()=>{o([]),h()}),[l,u]);const h=()=>{const e=p(l);let t=Math.round(100*l)/100,n=[];for(let i=0;i<u;i++){const r={};r.periodo=i+1,r.startBalance=t;const s=t+t*e/100;r.balanceFinal=Math.round(100*s)/100,t=Math.round(100*s)/100;const a=100*(t-l)/l;r.ganciaMensual=Math.round(100*a)/100||0,n=[...n,r]}o(n)},p=e=>{switch(!0){case e>99&&e<500:return 5;case e>499&&e<2500:return 6;case e>2499&&e<5e3:return 7;case e>4999&&e<1e4:return 8;case e>=1e4:return 9;default:return 0}};return r?(0,vr.jsxs)("section",{className:"IntCFor",children:[(0,vr.jsx)("div",{className:"overlay"}),(0,vr.jsxs)("div",{className:"content-ICF",children:[(0,vr.jsxs)("div",{className:"header",children:[(0,vr.jsx)("button",{onClick:s,children:(0,vr.jsx)("i",{class:"bi bi-x"})}),(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{children:"Compounding Calculator"})})]}),(0,vr.jsxs)("div",{className:"inputs",children:[(0,vr.jsx)("p",{children:"Starting balance"}),(0,vr.jsx)("input",{type:"text",value:l,onChange:e=>{c(e.target.value)}}),(0,vr.jsx)("p",{children:"Number of periods"}),(0,vr.jsxs)("select",{name:"periodos",value:u,onChange:e=>{d(e.target.value)},children:[(0,vr.jsx)("option",{value:12,children:"12"}),(0,vr.jsx)("option",{value:24,children:"24"}),(0,vr.jsx)("option",{value:36,children:"36"}),(0,vr.jsx)("option",{value:48,children:"48"})]})]}),(0,vr.jsxs)("div",{className:"resultados",children:[(0,vr.jsx)("div",{className:"resultadosFinal",children:(0,vr.jsxs)("table",{children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{children:"Ending balance"}),(0,vr.jsx)("th",{children:"Total gain"})]})}),(0,vr.jsx)("tbody",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsxs)("td",{children:[(null===(t=a[a.length-1])||void 0===t?void 0:t.ganciaMensual)||0,"%"]}),(0,vr.jsx)("td",{children:(null===(n=a[a.length-1])||void 0===n?void 0:n.balanceFinal)||0})]})})]})}),(0,vr.jsx)("div",{className:"resultado",children:(0,vr.jsxs)("table",{children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{children:"Period"}),(0,vr.jsx)("th",{children:"Starting balance"}),(0,vr.jsx)("th",{children:"Montlhy reward"}),(0,vr.jsx)("th",{children:"Ending balance"})]})}),(0,vr.jsx)("tbody",{children:a.map((e=>(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{children:e.periodo}),(0,vr.jsx)("td",{children:e.startBalance}),(0,vr.jsxs)("td",{children:[e.ganciaMensual," %"]}),(0,vr.jsx)("td",{children:e.balanceFinal})]},e.periodo)))})]})})]})]})]}):null},Tr=(0,i.forwardRef)(((e,t)=>{let{duration:n=3e3}=e;const[r,s]=(0,i.useState)({visible:!1,texto:"",success:!1}),[a,o]=(0,i.useState)(n/1e3),l=(e,t)=>{s((n=>({...n,[e]:t})))};(0,i.useImperativeHandle)(t,(()=>({showAlert(e,t){l("visible",!0),l("texto",e),l("success",t),o(n/1e3)}}))),(0,i.useEffect)((()=>{let e;return r.visible&&(e=setTimeout((()=>l("visible",!1)),n)),()=>clearTimeout(e)}),[r.visible,n]),(0,i.useEffect)((()=>{if(r.visible&&a>0){const e=setInterval((()=>{o((e=>e-1))}),1e3);return()=>clearInterval(e)}}),[r.visible,a]);return r.visible?(0,vr.jsxs)("div",{className:"alert "+(r.success?"success":"error"),children:[(0,vr.jsx)("div",{className:"icon",children:r.success?(0,vr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e8eaed",children:(0,vr.jsx)("path",{d:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"})}):(0,vr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",viewBox:"0 0 24 24",height:"24",fill:"none",children:(0,vr.jsx)("path",{fill:"#393a37",d:"m13 13h-2v-6h2zm0 4h-2v-2h2zm-1-15c-1.3132 0-2.61358.25866-3.82683.7612-1.21326.50255-2.31565 1.23915-3.24424 2.16773-1.87536 1.87537-2.92893 4.41891-2.92893 7.07107 0 2.6522 1.05357 5.1957 2.92893 7.0711.92859.9286 2.03098 1.6651 3.24424 2.1677 1.21325.5025 2.51363.7612 3.82683.7612 2.6522 0 5.1957-1.0536 7.0711-2.9289 1.8753-1.8754 2.9289-4.4189 2.9289-7.0711 0-1.3132-.2587-2.61358-.7612-3.82683-.5026-1.21326-1.2391-2.31565-2.1677-3.24424-.9286-.92858-2.031-1.66518-3.2443-2.16773-1.2132-.50254-2.5136-.7612-3.8268-.7612z"})})}),(0,vr.jsxs)("div",{className:"title",children:[r.texto,(0,vr.jsx)("div",{className:"close",onClick:()=>{l("visible",!1)},children:(0,vr.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,vr.jsx)("path",{d:"m15.8333 5.34166-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z",fill:"#393a37"})})})]})]}):null})),Er=Tr,Cr=(e,t)=>204==e?"ususario no encontrado":204==e&&"pcf"==t?"factura no encontrada":400==e?"Error desconocido":404==e&&"factura"==t?"Factura no encontrada":404==e?"Usuario no encontrado":406==e&&"nip"==t?"contrase;a incorrecta":201==e&&"facturar"==t?"Factura creada correctamente":406==e?"contrase;a incorrecta":void 0,Mr=()=>{const[e,t]=(0,i.useState)({periodos:12,calcularModal:!1,activarModal:!1,isActivo:!1,acumulado:0,fin:""}),n=(0,i.useRef)(),{userLogged:r,saveIc:s,tryLogin:a}=sr();(0,i.useEffect)((()=>{var e;if(null!==r&&void 0!==r&&null!==(e=r.wallet)&&void 0!==e&&e.interesCompuesto){var n;const e=null===r||void 0===r||null===(n=r.wallet)||void 0===n?void 0:n.interesCompuesto.find((e=>"div"==e.tipo));e&&(e.isActivo&&Hi(t,"isActivo",!0),Hi(t,"acumulado",e.acumulado),Hi(t,"fin",e.fecha_fin))}}),[r]);const o=async()=>{const e={wallet_id:r.wallet.wallet_id,tipo:"div",activo:!0,fecha_fin:l()},i=await s(e);null!==i&&void 0!==i&&i.status&&200==(null===i||void 0===i?void 0:i.status)?(await a(),n.current.showAlert("Compound interest activated",!0)):n.current.showAlert(Cr((null===i||void 0===i?void 0:i.status)||400),!1),Hi(t,"activarModal",!1)},l=()=>{const t=e.periodos/12,n=new Date;n.setFullYear(n.getFullYear()+t);const i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return"".concat(i,"-").concat(r,"-").concat(s)};return(0,vr.jsxs)("section",{className:"IComp",children:[(0,vr.jsx)(Nr,{isOpen:e.calcularModal,closeModal:()=>Hi(t,"calcularModal",!e.calcularModal)}),(0,vr.jsx)(Er,{ref:n}),e.activarModal&&(0,vr.jsxs)("div",{className:"modal1",children:[(0,vr.jsx)("div",{className:"overlay"}),(0,vr.jsxs)("div",{className:"modal1-content",children:[(0,vr.jsx)("div",{className:"header",children:(0,vr.jsx)("button",{onClick:()=>Hi(t,"activarModal",!e.activarModal),children:(0,vr.jsx)("i",{className:"bi bi-x"})})}),(0,vr.jsxs)("div",{className:"body",children:[(0,vr.jsx)("p",{children:"By activating compound interest you will not be able to make withdrawals."}),(0,vr.jsxs)("div",{className:"inputs",children:[(0,vr.jsx)("span",{children:"Select the number of periods"}),(0,vr.jsxs)("select",{name:"periodos",value:e.periodos,onChange:e=>Hi(t,"periodos",e.target.value),children:[(0,vr.jsx)("option",{value:12,children:"12 Month"}),(0,vr.jsx)("option",{value:24,children:"24 Month"}),(0,vr.jsx)("option",{value:36,children:"36 Month"}),(0,vr.jsx)("option",{value:48,children:"48 Month"})]})]})]}),(0,vr.jsxs)("div",{className:"botones",children:[(0,vr.jsx)("button",{onClick:()=>Hi(t,"activarModal",!e.activarModal),className:"boton1",children:(0,vr.jsx)("p",{className:"button_top",children:"Cancel"})}),(0,vr.jsx)("button",{onClick:o,className:"boton1",children:(0,vr.jsx)("p",{className:"button_top",children:"Save"})})]})]})]}),(0,vr.jsx)("header",{children:(0,vr.jsx)("p",{children:"Compound interest in mandatory terms"})}),(0,vr.jsxs)("div",{className:"datos",children:[(0,vr.jsxs)("div",{className:"datoDiv",children:[(0,vr.jsxs)("div",{className:"dato",children:[(0,vr.jsx)("span",{children:"Accumulated capital"}),(0,vr.jsx)("input",{type:"text",value:e.acumulado||0,readOnly:!0})]}),(0,vr.jsxs)("div",{className:"dato",children:[(0,vr.jsx)("span",{children:"End of term"}),(0,vr.jsx)("input",{type:"text",value:e.fin||"---",readOnly:!0})]})]}),(0,vr.jsxs)("div",{className:"state",children:[(0,vr.jsx)("p",{children:"State:"}),e.isActivo?(0,vr.jsxs)("span",{className:"green",children:[(0,vr.jsx)("i",{class:"bi bi-circle-fill"})," Active"]}):(0,vr.jsxs)("span",{className:"red",children:[(0,vr.jsx)("i",{class:"bi bi-circle-fill"})," Disable"]})]}),(0,vr.jsxs)("div",{className:"botones",children:[(0,vr.jsx)("button",{className:"azul",onClick:()=>Hi(t,"calcularModal",!e.calcularModal),children:"Calculate"}),(0,vr.jsxs)("button",{disabled:e.isActivo,onClick:()=>Hi(t,"activarModal",!e.activarModal),children:[(0,vr.jsx)("i",{class:"bi bi-power"})," Activate"]})]})]})]})},Ir=()=>{const{userLogged:e,loading:t,tryLogin:n}=sr();(0,i.useEffect)((()=>{r()}),[]);const r=async()=>{localStorage.getItem("userState")&&await n()};return(0,vr.jsx)("div",{className:"seccion-main",children:t?(0,vr.jsx)("div",{class:"spinner"}):(0,vr.jsxs)("section",{className:"dashboard",children:[(0,vr.jsxs)("div",{className:"sec0",children:["|",(0,vr.jsx)("i",{className:"bi bi-bank"}),(0,vr.jsx)("span",{children:"DASHBOARD"})]}),(0,vr.jsx)("div",{className:"item-grid sec1",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.ganancia_total)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"TOTAL EARNINGS"})}),(0,vr.jsx)("div",{className:"item-grid sec2",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.retiro_total)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"TOTAL WITHDRAWALS"})}),(0,vr.jsx)("div",{className:"item-grid sec3",children:(0,vr.jsx)(Sr,{dato:(null===e||void 0===e?void 0:e.wallet.staterpack)||0})}),(0,vr.jsx)("div",{className:"item-grid sec5",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.wallet_com)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"COMMISSION WALLET"})}),(0,vr.jsx)("div",{className:"item-grid sec4",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.wallet_div)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"DIVIDEND WALLET"})}),(0,vr.jsx)("div",{className:"item-grid sec6",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.bonos.rango_res)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"RESIDUAL RANK"})}),(0,vr.jsx)("div",{className:"item-grid sec7",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.bonos.ref_direct)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"DIRECT REFERRAL BONUS"})}),(0,vr.jsx)("div",{className:"item-grid sec8",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.bonos.membresia_mensual)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"RESIDUAL INCOME FEES"})}),(0,vr.jsx)("div",{className:"item-grid sec9",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.bonos.matching)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"MATCHING BONUS"})}),(0,vr.jsx)("div",{className:"item-grid sec10",children:(0,vr.jsx)(wr,{dato:((null===e||void 0===e?void 0:e.wallet.bonos.fast_track)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",","."),type:!1,titulo:"FASTRACK BONUS"})}),(0,vr.jsx)("div",{className:"item-grid sec11",children:(0,vr.jsx)(Mr,{})}),(0,vr.jsx)("div",{className:"item-grid sec12",children:(0,vr.jsx)(xr,{})}),(0,vr.jsx)("div",{className:"item-grid sec14",children:(0,vr.jsx)(yr,{})})]})})},Ar={STARTER_PACK:"stp",PAGO_STARTER_PACK_FACTURA:"stppf",PAGO_FACTURA:"pf",PAGO_MANTENIMIENTO:"pm",INTERES_COMPUESTO:"ic",RETIRO:"r",RETIRO_WALLET_COMISION:"rwc",RETIRO_WALLET_DIVIDENDO:"rwd",TRANSFERENCIA_INTERNA:"ti",TRANSFERENCIA_INTERNA_WALLET_DIV:"tiwd",TRANSFERENCIA_INTERNA_WALLET_COM:"tiwc",DIVIDENDO_DIARIO:"dd",BONO_PAGO_MANTENIMIENTO:"bpm",BONO_REFERENCIA_DIRECTA:"bdf",BONO_RANGO_RESIDUAL:"brr",BONO_MATCHING:"mb",BONO_FAST_TRACK:"bft",BONO_FAST_TRACK_BRONCE:"bftb",BONO_FAST_TRACK_SILVER:"sfts"},Rr=e=>{let{historial:t,fetchHistory:n,children:r,titulo:s,ic:a}=e;const[o,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(!1);(0,i.useEffect)((()=>{l(!t)}),[t]);return(0,vr.jsxs)("section",{className:"tableContainer",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsxs)("h5",{children:[(0,vr.jsx)("i",{class:a||"bi bi-clock-history"})," ",s||"Historial"]}),(0,vr.jsx)("svg",{onClick:()=>{u(!c),c||n()},xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#000",children:(0,vr.jsx)("path",{d:"M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"})})]}),c&&(0,vr.jsx)("table",{children:(0,vr.jsx)("tbody",{children:o?(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{children:(0,vr.jsx)("div",{className:"spinner"})})}):0!=t.length?t.map((e=>r(e))):(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{children:(0,vr.jsx)("span",{children:"You have not yet made a transaccion"})})})})})]})},Pr=e=>{let{item:t}=e;return(0,vr.jsx)("div",{className:"item-content",children:(0,vr.jsxs)("div",{className:"item-header",children:[(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Monto"}),(0,vr.jsx)("div",{className:"item-value",children:t.monto})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Concepto"}),(0,vr.jsx)("div",{className:"item-value",children:t.emisor})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Fecha"}),(0,vr.jsx)("div",{className:"item-value",children:t.fecha})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Hora"}),(0,vr.jsx)("div",{className:"item-value",children:t.hora})]})]})})},kr=!1,Or=!1,Lr="${JSCORE_VERSION}",Dr=function(e,t){if(!e)throw jr(t)},jr=function(e){return new Error("Firebase Database ("+Lr+") INTERNAL ASSERT FAILED: "+e)},Ur=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},zr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),i.push(n[c],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ur(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new Fr;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vr=function(e){const t=Ur(e);return zr.encodeByteArray(t,!0)},Br=function(e){return Vr(e).replace(/\./g,"")},Hr=function(e){try{return zr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Wr(e){return qr(void 0,e)}function qr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=qr(e[n],t[n]));return e}const Gr=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Yr=()=>{try{return Gr()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Hr(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Xr=e=>{var t,n;return null===(n=null===(t=Yr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Kr=()=>{var e;return null===(e=Yr())||void 0===e?void 0:e.config},Jr=e=>{var t;return null===(t=Yr())||void 0===t?void 0:t["_".concat(e)]};class $r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Qr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Zr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qr())}function es(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ts(){return!0===kr||!0===Or}class ns extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,is.prototype.create)}}class is{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(rs,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ns(n,s,t)}}const rs=/\{\$([^}]+)}/g;function ss(e){return JSON.parse(e)}function as(e){return JSON.stringify(e)}const os=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=ss(Hr(s[0])||""),n=ss(Hr(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}};function ls(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cs(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function us(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ds(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function hs(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(ps(n)&&ps(s)){if(!hs(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ps(e){return null!==e&&"object"===typeof e}function fs(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ms(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function gs(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class vs{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^a&(o^l),r=1518500249):(i=a^o^l,r=1859775393):u<60?(i=a&o|l&(a|o),r=2400959708):(i=a^o^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}class ys{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=_s),void 0===i.error&&(i.error=_s),void 0===i.complete&&(i.complete=_s);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function _s(){}function xs(e,t){return"".concat(e," failed: ").concat(t," argument ")}const bs=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ws(e){return e&&e._delegate?e._delegate:e}class Ss{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ns="[DEFAULT]";class Ts{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new $r;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Ns?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns;return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Es{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ts(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Cs=[];var Ms;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ms||(Ms={}));const Is={debug:Ms.DEBUG,verbose:Ms.VERBOSE,info:Ms.INFO,warn:Ms.WARN,error:Ms.ERROR,silent:Ms.SILENT},As=Ms.INFO,Rs={[Ms.DEBUG]:"log",[Ms.VERBOSE]:"log",[Ms.INFO]:"info",[Ms.WARN]:"warn",[Ms.ERROR]:"error"},Ps=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Rs[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ks{constructor(e){this.name=e,this._logLevel=As,this._logHandler=Ps,this._userLogHandler=null,Cs.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ms))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Is[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ms.DEBUG,...t),this._logHandler(this,Ms.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ms.VERBOSE,...t),this._logHandler(this,Ms.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ms.INFO,...t),this._logHandler(this,Ms.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ms.WARN,...t),this._logHandler(this,Ms.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ms.ERROR,...t),this._logHandler(this,Ms.ERROR,...t)}}const Os=(e,t)=>t.some((t=>e instanceof t));let Ls,Ds;const js=new WeakMap,Us=new WeakMap,zs=new WeakMap,Fs=new WeakMap,Vs=new WeakMap;let Bs={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Us.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Hs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ds||(Ds=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(Gs(this),n),qs(js.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return qs(e.apply(Gs(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(Gs(this),t,...i);return zs.set(s,t.sort?t.sort():[t]),qs(s)}}function Ws(e){return"function"===typeof e?Hs(e):(e instanceof IDBTransaction&&function(e){if(Us.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Us.set(e,t)}(e),Os(e,Ls||(Ls=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Bs):e)}function qs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(qs(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&js.set(t,e)})).catch((()=>{})),Vs.set(t,e),t}(e);if(Fs.has(e))return Fs.get(e);const t=Ws(e);return t!==e&&(Fs.set(e,t),Vs.set(t,e)),t}const Gs=e=>Vs.get(e);const Ys=["get","getKey","getAll","getAllKeys","count"],Xs=["put","add","delete","clear"],Ks=new Map;function Js(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ks.get(t))return Ks.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Xs.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ys.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return Ks.set(t,s),s}Bs=(e=>({...e,get:(t,n,i)=>Js(t,n)||e.get(t,n,i),has:(t,n)=>!!Js(t,n)||e.has(t,n)}))(Bs);class $s{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Qs="@firebase/app",Zs="0.10.1",ea=new ks("@firebase/app"),ta="@firebase/app-compat",na="@firebase/analytics-compat",ia="@firebase/analytics",ra="@firebase/app-check-compat",sa="@firebase/app-check",aa="@firebase/auth",oa="@firebase/auth-compat",la="@firebase/database",ca="@firebase/database-compat",ua="@firebase/functions",da="@firebase/functions-compat",ha="@firebase/installations",pa="@firebase/installations-compat",fa="@firebase/messaging",ma="@firebase/messaging-compat",ga="@firebase/performance",va="@firebase/performance-compat",ya="@firebase/remote-config",_a="@firebase/remote-config-compat",xa="@firebase/storage",ba="@firebase/storage-compat",wa="@firebase/firestore",Sa="@firebase/firestore-compat",Na="firebase",Ta="[DEFAULT]",Ea={[Qs]:"fire-core",[ta]:"fire-core-compat",[ia]:"fire-analytics",[na]:"fire-analytics-compat",[sa]:"fire-app-check",[ra]:"fire-app-check-compat",[aa]:"fire-auth",[oa]:"fire-auth-compat",[la]:"fire-rtdb",[ca]:"fire-rtdb-compat",[ua]:"fire-fn",[da]:"fire-fn-compat",[ha]:"fire-iid",[pa]:"fire-iid-compat",[fa]:"fire-fcm",[ma]:"fire-fcm-compat",[ga]:"fire-perf",[va]:"fire-perf-compat",[ya]:"fire-rc",[_a]:"fire-rc-compat",[xa]:"fire-gcs",[ba]:"fire-gcs-compat",[wa]:"fire-fst",[Sa]:"fire-fst-compat","fire-js":"fire-js",[Na]:"fire-js-all"},Ca=new Map,Ma=new Map,Ia=new Map;function Aa(e,t){try{e.container.addComponent(t)}catch(n){ea.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ra(e){const t=e.name;if(Ia.has(t))return ea.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ia.set(t,e);for(const n of Ca.values())Aa(n,e);for(const n of Ma.values())Aa(n,e);return!0}function Pa(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ka(e){return void 0!==e.settings}const Oa=new is("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class La{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ss("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}const Da="10.11.0";function ja(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Ta,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Oa.create("bad-app-name",{appName:String(r)});if(n||(n=Kr()),!n)throw Oa.create("no-options");const s=Ca.get(r);if(s){if(hs(n,s.options)&&hs(i,s.config))return s;throw Oa.create("duplicate-app",{appName:r})}const a=new Es(r);for(const l of Ia.values())a.addComponent(l);const o=new La(n,i,a);return Ca.set(r,o),o}function Ua(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta;const t=Ca.get(e);if(!t&&e===Ta&&Kr())return ja();if(!t)throw Oa.create("no-app",{appName:e});return t}function za(e,t,n){var i;let r=null!==(i=Ea[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ea.warn(e.join(" "))}Ra(new Ss("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const Fa="firebase-heartbeat-database",Va=1,Ba="firebase-heartbeat-store";let Ha=null;function Wa(){return Ha||(Ha=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=qs(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(qs(a.result),e.oldVersion,e.newVersion,qs(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Fa,Va,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ba)}catch(n){console.warn(n)}}}).catch((e=>{throw Oa.create("idb-open",{originalErrorMessage:e.message})}))),Ha}async function qa(e,t){try{const n=(await Wa()).transaction(Ba,"readwrite"),i=n.objectStore(Ba);await i.put(t,Ga(e)),await n.done}catch(n){if(n instanceof ns)ea.warn(n.message);else{const e=Oa.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ea.warn(e.message)}}}function Ga(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ya{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ka(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xa();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Xa(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Ja(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ja(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Br(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Xa(){return(new Date).toISOString().substring(0,10)}class Ka{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(yo){t(yo)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Wa()).transaction(Ba),n=await t.objectStore(Ba).get(Ga(e));return await t.done,n}catch(t){if(t instanceof ns)ea.warn(t.message);else{const e=Oa.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ea.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ja(e){return Br(JSON.stringify({version:2,heartbeats:e})).length}var $a;$a="",Ra(new Ss("platform-logger",(e=>new $s(e)),"PRIVATE")),Ra(new Ss("heartbeat",(e=>new Ya(e)),"PRIVATE")),za(Qs,Zs,$a),za(Qs,Zs,"esm2017"),za("fire-js","");za("firebase","10.11.0","app");const Qa=ja({apiKey:"AIzaSyA93BtPlPo7f8ZK8HSRpLrklCbLfs5Sv_Q",authDomain:"lcc-test-26ffe.firebaseapp.com",databaseURL:"https://lcc-test-26ffe-default-rtdb.firebaseio.com/",projectId:"lcc-test-26ffe",storageBucket:"lcc-test-26ffe.appspot.com",messagingSenderId:"308292454007",appId:"1:308292454007:web:cea1512701f7727f802872"}),Za="@firebase/database",eo="1.0.4";let to="";function no(e){to=e}class io{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),as(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ss(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ro{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ls(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const so=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new io(t)}}catch(t){}return new ro},ao=so("localStorage"),oo=so("sessionStorage"),lo=new ks("@firebase/database"),co=function(){let e=1;return function(){return e++}}(),uo=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,Dr(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new vs;n.update(t);const i=n.digest();return zr.encodeByteArray(i)},ho=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ho.apply(null,n):e+="object"===typeof n?as(n):n,e+=" "}return e};let po=null,fo=!0;const mo=function(e,t){Dr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(lo.logLevel=Ms.VERBOSE,po=lo.log.bind(lo),t&&oo.set("logging_enabled",!0)):"function"===typeof e?po=e:(po=null,oo.remove("logging_enabled"))},go=function(){if(!0===fo&&(fo=!1,null===po&&!0===oo.get("logging_enabled")&&mo(!0)),po){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=ho.apply(null,t);po(i)}},vo=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];go(e,...n)}},yo=function(){const e="FIREBASE INTERNAL ERROR: "+ho(...arguments);lo.error(e)},_o=function(){const e="FIREBASE FATAL ERROR: ".concat(ho(...arguments));throw lo.error(e),new Error(e)},xo=function(){const e="FIREBASE WARNING: "+ho(...arguments);lo.warn(e)},bo=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},wo="[MIN_NAME]",So="[MAX_NAME]",No=function(e,t){if(e===t)return 0;if(e===wo||t===So)return-1;if(t===wo||e===So)return 1;{const n=Po(e),i=Po(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},To=function(e,t){return e===t?0:e<t?-1:1},Eo=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+as(t))},Co=function(e){if("object"!==typeof e||null===e)return as(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=as(t[i]),n+=":",n+=Co(e[t[i]]);return n+="}",n},Mo=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Io(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ao=function(e){Dr(!bo(e),"Invalid JSON number");const t=1023;let n,i,r,s,a;0===e?(i=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Ro=new RegExp("^-?(0*)\\d{1,10}$"),Po=function(e){if(Ro.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ko=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw xo("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Oo=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Lo{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){xo('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Do{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(go("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xo(e)}}class jo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jo.OWNER="owner";const Uo="5",zo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fo="ac",Vo="websocket",Bo="long_polling";class Ho{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ao.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ao.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Wo(e,t,n){let i;if(Dr("string"===typeof t,"typeof type must == string"),Dr("object"===typeof n,"typeof params must == object"),t===Vo)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Bo)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Io(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class qo{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ls(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Wr(this.counters_)}}const Go={},Yo={};function Xo(e){const t=e.toString();return Go[t]||(Go[t]=new qo),Go[t]}class Ko{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ko((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Jo="start";class $o{constructor(e,t,n,i,r,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vo(e),this.stats_=Xo(t),this.urlFn=e=>(this.appCheckToken&&(e[Fo]=this.appCheckToken),Wo(t,Bo,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ko(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ts()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qo((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===Jo)n.id=s,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Jo]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Uo,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Fo]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&zo.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$o.forceAllow_=!0}static forceDisallow(){$o.forceDisallow_=!0}static isAvailable(){return!ts()&&(!!$o.forceAllow_||!$o.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=as(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Vr(t),i=Mo(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ts())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=as(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qo{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ts())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=co(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qo.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){go("frame writing exception"),r.stack&&go(r.stack),go(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||go("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){ts()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{go("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let Zo=null;"undefined"!==typeof MozWebSocket?Zo=MozWebSocket:"undefined"!==typeof WebSocket&&(Zo=WebSocket);class el{constructor(e,t,n,i,r,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vo(this.connId),this.stats_=Xo(t),this.connURL=el.connectionURL_(t,s,a,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=Uo,!ts()&&"undefined"!==typeof location&&location.hostname&&zo.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[Fo]=i),r&&(s.p=r),Wo(e,Vo,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ao.set("previous_websocket_failure",!0);try{let e;if(ts()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Uo,"/").concat(to,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new Zo(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){el.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Zo&&!el.forceDisallow_}static previouslyFailed(){return ao.isInMemoryStorage||!0===ao.get("previous_websocket_failure")}markConnectionHealthy(){ao.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ss(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Dr(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=as(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Mo(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}el.responsesRequiredToBeHealthy=2,el.healthyTimeout=3e4;class tl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$o,el]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=el&&el.isAvailable();let n=t&&!el.previouslyFailed();if(e.webSocketOnly&&(t||xo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[el];else{const e=this.transports_=[];for(const t of tl.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);tl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tl.globalTransportInitialized_=!1;class nl{constructor(e,t,n,i,r,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vo("c:"+this.id+":"),this.transportManager_=new tl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Oo((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Eo("t",e),n=Eo("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Eo("t",e),n=Eo("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Eo("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?yo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yo("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Uo!==n&&xo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Oo((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oo((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class il{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class rl{constructor(e){this.allowedEvents_=e,this.listeners_={},Dr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){Dr(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class sl extends rl{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Zr()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new sl}getInitialEvent(e){return Dr("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const al=32,ol=768;class ll{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function cl(){return new ll("")}function ul(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function dl(e){return e.pieces_.length-e.pieceNum_}function hl(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ll(e.pieces_,t)}function pl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function fl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ml(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ll(t,0)}function gl(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ll)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ll(n,0)}function vl(e){return e.pieceNum_>=e.pieces_.length}function yl(e,t){const n=ul(e),i=ul(t);if(null===n)return t;if(n===i)return yl(hl(e),hl(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function _l(e,t){if(dl(e)!==dl(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function xl(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(dl(e)>dl(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class bl{constructor(e,t){this.errorPrefix_=t,this.parts_=fl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=bs(this.parts_[n]);wl(this)}}function wl(e){if(e.byteLength_>ol)throw new Error(e.errorPrefix_+"has a key path longer than "+ol+" bytes ("+e.byteLength_+").");if(e.parts_.length>al)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+al+") or object contains a cycle "+Sl(e))}function Sl(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Nl extends rl{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Nl}getInitialEvent(e){return Dr("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Tl=1e3;class El extends il{constructor(e,t,n,i,r,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=El.nextPersistentConnectionId_++,this.log_=vo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!ts())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nl.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&sl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(as(r)),Dr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new $r,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Dr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Dr(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,a=r.s;El.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==a&&this.removeListen_(n,i),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ls(e,"w")){const n=cs(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();xo("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=os(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=os(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Dr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+as(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):yo("Unrecognized action received from server: "+as(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Dr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Tl),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+El.nextConnectionId_++,r=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){Dr(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?go("getToken() completed but was canceled"):(go("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new nl(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{xo(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(yo){this.log_("Failed to get token: "+yo),s||(this.repoInfo_.nodeAdmin&&xo(yo),o())}}}interrupt(e){go("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){go("Resuming connection for reason: "+e),delete this.interruptReasons_[e],us(this.interruptReasons_)&&(this.reconnectDelay_=Tl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Co(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new ll(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){go("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){go("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ts()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+to.replace(/\./g,"-")]=1,Zr()?e["framework.cordova"]=1:es()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=sl.getInstance().currentlyOnline();return us(this.interruptReasons_)&&e}}El.nextPersistentConnectionId_=0,El.nextConnectionId_=0;class Cl{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cl(e,t)}}class Ml{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Cl(wo,e),i=new Cl(wo,t);return 0!==this.compare(n,i)}minPost(){return Cl.MIN}}let Il;class Al extends Ml{static get __EMPTY_NODE(){return Il}static set __EMPTY_NODE(e){Il=e}compare(e,t){return No(e.name,t.name)}isDefinedOn(e){throw jr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cl.MIN}maxPost(){return new Cl(So,Il)}makePost(e,t){return Dr("string"===typeof e,"KeyIndex indexValue must always be a string."),new Cl(e,Il)}toString(){return".key"}}const Rl=new Al;class Pl{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class kl{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:kl.RED,this.left=null!=i?i:Ol.EMPTY_NODE,this.right=null!=r?r:Ol.EMPTY_NODE}copy(e,t,n,i,r){return new kl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ol.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ol.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,kl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,kl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}kl.RED=!0,kl.BLACK=!1;class Ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ol.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ol(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,kl.BLACK,null,null))}remove(e){return new Ol(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kl.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Pl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Pl(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Pl(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Pl(this.root_,null,this.comparator_,!0,e)}}function Ll(e,t){return No(e.name,t.name)}function Dl(e,t){return No(e,t)}let jl;Ol.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new kl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ul=function(e){return"number"===typeof e?"number:"+Ao(e):"string:"+e},zl=function(e){if(e.isLeafNode()){const t=e.val();Dr("string"===typeof t||"number"===typeof t||"object"===typeof t&&ls(t,".sv"),"Priority must be a string or number.")}else Dr(e===jl||e.isEmpty(),"priority of unexpected type.");Dr(e===jl||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Fl,Vl,Bl;class Hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hl.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Dr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),zl(this.priorityNode_)}static set __childrenNodeConstructor(e){Fl=e}static get __childrenNodeConstructor(){return Fl}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Hl(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Hl.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return vl(e)?this:".priority"===ul(e)?this.priorityNode_:Hl.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Hl.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ul(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Dr(".priority"!==n||1===dl(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Hl.__childrenNodeConstructor.EMPTY_NODE.updateChild(hl(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ul(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Ao(this.value_):this.value_,this.lazyHash_=uo(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Hl.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Hl.__childrenNodeConstructor?-1:(Dr(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Hl.VALUE_TYPE_ORDER.indexOf(t),r=Hl.VALUE_TYPE_ORDER.indexOf(n);return Dr(i>=0,"Unknown leaf type: "+t),Dr(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Hl.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Wl=new class extends Ml{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?No(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cl.MIN}maxPost(){return new Cl(So,new Hl("[PRIORITY-POST]",Bl))}makePost(e,t){const n=Vl(e);return new Cl(t,new Hl("[PRIORITY-POST]",n))}toString(){return".priority"}},ql=Math.log(2);class Gl{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/ql,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yl=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new kl(o,a.node,kl.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return a=e[l],o=n?n(a):a,new kl(o,a.node,kl.BLACK,c,u)}},s=function(t){let i=null,s=null,a=e.length;const o=function(t,i){const s=a-t,o=a;a-=t;const c=r(s+1,o),u=e[s],d=n?n(u):u;l(new kl(d,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?o(i,kl.BLACK):(o(i,kl.BLACK),o(i,kl.RED))}return s}(new Gl(e.length));return new Ol(i||t,s)};let Xl;const Kl={};class Jl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Dr(Kl&&Wl,"ChildrenNode.ts has not been loaded"),Xl=Xl||new Jl({".priority":Kl},{".priority":Wl}),Xl}get(e){const t=cs(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ol?t:null}hasIndex(e){return ls(this.indexSet_,e.toString())}addIndex(e,t){Dr(e!==Rl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(Cl.Wrap);let s,a=r.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=r.getNext();s=i?Yl(n,e.getCompare()):Kl;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new Jl(c,l)}addToIndexes(e,t){const n=ds(this.indexes_,((n,i)=>{const r=cs(this.indexSet_,i);if(Dr(r,"Missing index implementation for "+i),n===Kl){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(Cl.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Yl(n,r.getCompare())}return Kl}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new Cl(e.name,i))),r.insert(e,e.node)}}));return new Jl(n,this.indexSet_)}removeFromIndexes(e,t){const n=ds(this.indexes_,(n=>{if(n===Kl)return n;{const i=t.get(e.name);return i?n.remove(new Cl(e.name,i)):n}}));return new Jl(n,this.indexSet_)}}let $l;class Ql{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&zl(this.priorityNode_),this.children_.isEmpty()&&Dr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $l||($l=new Ql(new Ol(Dl),null,Jl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$l}updatePriority(e){return this.children_.isEmpty()?this:new Ql(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?$l:t}}getChild(e){const t=ul(e);return null===t?this:this.getImmediateChild(t).getChild(hl(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Dr(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Cl(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?$l:this.priorityNode_;return new Ql(i,s,r)}}updateChild(e,t){const n=ul(e);if(null===n)return t;{Dr(".priority"!==ul(e)||1===dl(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(hl(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Wl,((s,a)=>{t[s]=a.val(e),n++,r&&Ql.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ul(this.getPriority().val())+":"),this.forEachChild(Wl,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":uo(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Cl(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Cl(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Cl(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Cl.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Cl.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zl?-1:0}withIndex(e){if(e===Rl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ql(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Rl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Wl),n=t.getIterator(Wl);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Rl?null:this.indexMap_.get(e.toString())}}Ql.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Zl=new class extends Ql{constructor(){super(new Ol(Dl),Ql.EMPTY_NODE,Jl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ql.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Cl,{MIN:{value:new Cl(wo,Ql.EMPTY_NODE)},MAX:{value:new Cl(So,Zl)}}),Al.__EMPTY_NODE=Ql.EMPTY_NODE,Hl.__childrenNodeConstructor=Ql,jl=Zl,function(e){Bl=e}(Zl);const ec=!0;function tc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ql.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Dr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Hl(e,tc(t))}if(e instanceof Array||!ec){let n=Ql.EMPTY_NODE;return Io(e,((t,i)=>{if(ls(e,t)&&"."!==t.substring(0,1)){const e=tc(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(tc(t))}{const n=[];let i=!1;if(Io(e,((e,t)=>{if("."!==e.substring(0,1)){const r=tc(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Cl(e,r)))}})),0===n.length)return Ql.EMPTY_NODE;const r=Yl(n,Ll,(e=>e.name),Dl);if(i){const e=Yl(n,Wl.getCompare());return new Ql(r,tc(t),new Jl({".priority":e},{".priority":Wl}))}return new Ql(r,tc(t),Jl.Default)}}!function(e){Vl=e}(tc);class nc extends Ml{constructor(e){super(),this.indexPath_=e,Dr(!vl(e)&&".priority"!==ul(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?No(e.name,t.name):r}makePost(e,t){const n=tc(e),i=Ql.EMPTY_NODE.updateChild(this.indexPath_,n);return new Cl(t,i)}maxPost(){const e=Ql.EMPTY_NODE.updateChild(this.indexPath_,Zl);return new Cl(So,e)}toString(){return fl(this.indexPath_,0).join("/")}}const ic=new class extends Ml{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?No(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cl.MIN}maxPost(){return Cl.MAX}makePost(e,t){const n=tc(e);return new Cl(t,n)}toString(){return".value"}};function rc(e){return{type:"value",snapshotNode:e}}function sc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ac(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function oc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class lc{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){Dr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(ac(t,a)):Dr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(sc(t,n)):s.trackChildChange(oc(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Wl,((e,i)=>{t.hasChild(e)||n.trackChildChange(ac(e,i))})),t.isLeafNode()||t.forEachChild(Wl,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(oc(t,i,r))}else n.trackChildChange(sc(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ql.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cc{constructor(e){this.indexedFilter_=new lc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cc.getStartPost_(e),this.endPost_=cc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new Cl(t,n))||(n=Ql.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ql.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ql.EMPTY_NODE);const r=this;return t.forEachChild(Wl,((e,t)=>{r.matches(new Cl(e,t))||(i=i.updateImmediateChild(e,Ql.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class uc{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new cc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new Cl(t,n))||(n=Ql.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=Ql.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=Ql.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(Ql.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,Ql.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;Dr(a.numChildren()===this.limit_,"");const o=new Cl(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=r&&r.trackChildChange(oc(t,n,e)),a.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(ac(t,e));const n=a.updateImmediateChild(t,Ql.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(sc(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=r&&(r.trackChildChange(ac(l.name,l.node)),r.trackChildChange(sc(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,Ql.EMPTY_NODE)):e}}class dc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wl}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Dr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Dr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wo}hasEnd(){return this.endSet_}getIndexEndValue(){return Dr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Dr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:So}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Dr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wl}copy(){const e=new dc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hc(e,t,n){const i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function pc(e,t,n){const i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function fc(e,t){const n=e.copy();return n.index_=t,n}function mc(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Wl?n="$priority":e.index_===ic?n="$value":e.index_===Rl?n="$key":(Dr(e.index_ instanceof nc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=as(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=as(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+as(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=as(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+as(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function gc(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Wl&&(t.i=e.index_.toString()),t}class vc extends il{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=vo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Dr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=vc.getListenId_(e,n),a={};this.listens_[s]=a;const o=mc(e._queryParams);this.restRequest_(r+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(r,o,!1,n),cs(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=vc.getListenId_(e,t);delete this.listens_[n]}get(e){const t=mc(e._queryParams),n=e._path.toString(),i=new $r;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((i=>{let[r,s]=i;r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fs(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=ss(o.responseText)}catch(e){xo("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&xo("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class yc{constructor(){this.rootNode_=Ql.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function _c(){return{value:null,children:new Map}}function xc(e,t,n){if(vl(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ul(t);e.children.has(i)||e.children.set(i,_c());xc(e.children.get(i),t=hl(t),n)}}function bc(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{bc(i,new ll(t.toString()+"/"+e),n)}))}class wc{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Io(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Sc{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wc(e);const n=1e4+2e4*Math.random();Oo(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Io(e,((e,i)=>{i>0&&ls(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),Oo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nc;function Tc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Nc||(Nc={}));class Ec{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Nc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vl(this.path)){if(null!=this.affectedTree.value)return Dr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ll(e));return new Ec(cl(),t,this.revert)}}return Dr(ul(this.path)===e,"operationForChild called for unrelated child."),new Ec(hl(this.path),this.affectedTree,this.revert)}}class Cc{constructor(e,t){this.source=e,this.path=t,this.type=Nc.LISTEN_COMPLETE}operationForChild(e){return vl(this.path)?new Cc(this.source,cl()):new Cc(this.source,hl(this.path))}}class Mc{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Nc.OVERWRITE}operationForChild(e){return vl(this.path)?new Mc(this.source,cl(),this.snap.getImmediateChild(e)):new Mc(this.source,hl(this.path),this.snap)}}class Ic{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Nc.MERGE}operationForChild(e){if(vl(this.path)){const t=this.children.subtree(new ll(e));return t.isEmpty()?null:t.value?new Mc(this.source,cl(),t.value):new Ic(this.source,cl(),t)}return Dr(ul(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ic(this.source,hl(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ac{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vl(e))return this.isFullyInitialized()&&!this.filtered_;const t=ul(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Rc{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Pc(e,t,n,i,r,s){const a=i.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw jr("Should only compare child_ events.");const i=new Cl(t.childName,t.snapshotNode),r=new Cl(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),a.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function kc(e,t){return{eventCache:e,serverCache:t}}function Oc(e,t,n,i){return kc(new Ac(t,n,i),e.serverCache)}function Lc(e,t,n,i){return kc(e.eventCache,new Ac(t,n,i))}function Dc(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function jc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Uc;class zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Uc||(Uc=new Ol(To)),Uc);this.value=e,this.children=t}static fromObject(e){let t=new zc(null);return Io(e,((e,n)=>{t=t.set(new ll(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:cl(),value:this.value};if(vl(e))return null;{const n=ul(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(hl(e),t);if(null!=r){return{path:gl(new ll(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(vl(e))return this;{const t=ul(e),n=this.children.get(t);return null!==n?n.subtree(hl(e)):new zc(null)}}set(e,t){if(vl(e))return new zc(t,this.children);{const n=ul(e),i=(this.children.get(n)||new zc(null)).set(hl(e),t),r=this.children.insert(n,i);return new zc(this.value,r)}}remove(e){if(vl(e))return this.children.isEmpty()?new zc(null):new zc(null,this.children);{const t=ul(e),n=this.children.get(t);if(n){const i=n.remove(hl(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new zc(null):new zc(this.value,r)}return this}}get(e){if(vl(e))return this.value;{const t=ul(e),n=this.children.get(t);return n?n.get(hl(e)):null}}setTree(e,t){if(vl(e))return t;{const n=ul(e),i=(this.children.get(n)||new zc(null)).setTree(hl(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new zc(this.value,r)}}fold(e){return this.fold_(cl(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(gl(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,cl(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(vl(e))return null;{const i=ul(e),r=this.children.get(i);return r?r.findOnPath_(hl(e),gl(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,cl(),t)}foreachOnPath_(e,t,n){if(vl(e))return this;{this.value&&n(t,this.value);const i=ul(e),r=this.children.get(i);return r?r.foreachOnPath_(hl(e),gl(t,i),n):new zc(null)}}foreach(e){this.foreach_(cl(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(gl(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Fc{constructor(e){this.writeTree_=e}static empty(){return new Fc(new zc(null))}}function Vc(e,t,n){if(vl(t))return new Fc(new zc(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const a=yl(r,t);return s=s.updateChild(a,n),new Fc(e.writeTree_.set(r,s))}{const i=new zc(n),r=e.writeTree_.setTree(t,i);return new Fc(r)}}}function Bc(e,t,n){let i=e;return Io(n,((e,n)=>{i=Vc(i,gl(t,e),n)})),i}function Hc(e,t){if(vl(t))return Fc.empty();{const n=e.writeTree_.setTree(t,new zc(null));return new Fc(n)}}function Wc(e,t){return null!=qc(e,t)}function qc(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(yl(n.path,t)):null}function Gc(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Wl,((e,n)=>{t.push(new Cl(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Cl(e,n.value))})),t}function Yc(e,t){if(vl(t))return e;{const n=qc(e,t);return new Fc(null!=n?new zc(n):e.writeTree_.subtree(t))}}function Xc(e){return e.writeTree_.isEmpty()}function Kc(e,t){return Jc(cl(),e.writeTree_,t)}function Jc(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(Dr(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Jc(gl(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(gl(e,".priority"),i)),n}}function $c(e,t){return uu(t,e)}function Qc(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Dr(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Zc(t,i.path)?r=!1:xl(i.path,t.path)&&(s=!0)),a--}if(r){if(s)return function(e){e.visibleWrites=tu(e.allWrites,eu,cl()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=Hc(e.visibleWrites,i.path);else{Io(i.children,(t=>{e.visibleWrites=Hc(e.visibleWrites,gl(i.path,t))}))}return!0}return!1}function Zc(e,t){if(e.snap)return xl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&xl(gl(e.path,n),t))return!0;return!1}function eu(e){return e.visible}function tu(e,t,n){let i=Fc.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)xl(n,e)?(t=yl(n,e),i=Vc(i,t,s.snap)):xl(e,n)&&(t=yl(e,n),i=Vc(i,cl(),s.snap.getChild(t)));else{if(!s.children)throw jr("WriteRecord should have .snap or .children");if(xl(n,e))t=yl(n,e),i=Bc(i,t,s.children);else if(xl(e,n))if(t=yl(e,n),vl(t))i=Bc(i,cl(),s.children);else{const e=cs(s.children,ul(t));if(e){const n=e.getChild(hl(t));i=Vc(i,cl(),n)}}}}}return i}function nu(e,t,n,i,r){if(i||r){const s=Yc(e.visibleWrites,t);if(!r&&Xc(s))return n;if(r||null!=n||Wc(s,cl())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(xl(e.path,t)||xl(t,e.path))};return Kc(tu(e.allWrites,s,t),n||Ql.EMPTY_NODE)}return null}{const i=qc(e.visibleWrites,t);if(null!=i)return i;{const i=Yc(e.visibleWrites,t);if(Xc(i))return n;if(null!=n||Wc(i,cl())){return Kc(i,n||Ql.EMPTY_NODE)}return null}}}function iu(e,t,n,i){return nu(e.writeTree,e.treePath,t,n,i)}function ru(e,t){return function(e,t,n){let i=Ql.EMPTY_NODE;const r=qc(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Wl,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=Yc(e.visibleWrites,t);return n.forEachChild(Wl,((e,t)=>{const n=Kc(Yc(r,new ll(e)),t);i=i.updateImmediateChild(e,n)})),Gc(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return Gc(Yc(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function su(e,t,n,i){return function(e,t,n,i,r){Dr(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=gl(t,n);if(Wc(e.visibleWrites,s))return null;{const t=Yc(e.visibleWrites,s);return Xc(t)?r.getChild(n):Kc(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function au(e,t){return function(e,t){return qc(e.visibleWrites,t)}(e.writeTree,gl(e.treePath,t))}function ou(e,t,n,i,r,s){return function(e,t,n,i,r,s,a){let o;const l=Yc(e.visibleWrites,t),c=qc(l,cl());if(null!=c)o=c;else{if(null==n)return[];o=Kc(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function lu(e,t,n){return function(e,t,n,i){const r=gl(t,n),s=qc(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return Kc(Yc(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function cu(e,t){return uu(gl(e.treePath,t),e.writeTree)}function uu(e,t){return{treePath:e,writeTree:t}}class du{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Dr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Dr(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,oc(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,ac(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,sc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw jr("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,oc(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const hu=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class pu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ac(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lu(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jc(this.viewCache_),r=ou(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function fu(e,t,n,i,r){const s=new du;let a,o;if(n.type===Nc.OVERWRITE){const l=n;l.source.fromUser?a=vu(e,t,l.path,l.snap,i,r,s):(Dr(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!vl(l.path),a=gu(e,t,l.path,l.snap,i,r,o,s))}else if(n.type===Nc.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,i,r,s,a){let o=t;return i.foreach(((i,l)=>{const c=gl(n,i);yu(t,ul(c))&&(o=vu(e,o,c,l,r,s,a))})),i.foreach(((i,l)=>{const c=gl(n,i);yu(t,ul(c))||(o=vu(e,o,c,l,r,s,a))})),o}(e,t,l.path,l.children,i,r,s):(Dr(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=xu(e,t,l.path,l.children,i,r,o,s))}else if(n.type===Nc.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,i,r,s){let a;if(null!=au(i,n))return t;{const o=new pu(i,t,r),l=t.eventCache.getNode();let c;if(vl(n)||".priority"===ul(n)){let n;if(t.serverCache.isFullyInitialized())n=iu(i,jc(t));else{const e=t.serverCache.getNode();Dr(e instanceof Ql,"serverChildren would be complete if leaf node"),n=ru(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=ul(n);let u=lu(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,hl(n),o,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,Ql.EMPTY_NODE,hl(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=iu(i,jc(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=au(i,cl()),Oc(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,i,r,s):function(e,t,n,i,r,s,a){if(null!=au(r,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(vl(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gu(e,t,n,l.getNode().getChild(n),r,s,o,a);if(vl(n)){let i=new zc(null);return l.getNode().forEachChild(Rl,((e,t)=>{i=i.set(new ll(e),t)})),xu(e,t,n,i,r,s,o,a)}return t}{let c=new zc(null);return i.foreach(((e,t)=>{const i=gl(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),xu(e,t,n,c,r,s,o,a)}}(e,t,o.path,o.affectedTree,i,r,s)}else{if(n.type!==Nc.LISTEN_COMPLETE)throw jr("Unknown operation type: "+n.type);a=function(e,t,n,i,r){const s=t.serverCache,a=Lc(t,s.getNode(),s.isFullyInitialized()||vl(n),s.isFiltered());return mu(e,a,n,i,hu,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Dc(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(rc(Dc(t)))}}(t,a,l),{viewCache:a,changes:l}}function mu(e,t,n,i,r,s){const a=t.eventCache;if(null!=au(i,n))return t;{let o,l;if(vl(n))if(Dr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=jc(t),r=ru(i,n instanceof Ql?n:Ql.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=iu(i,jc(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ul(n);if(".priority"===c){Dr(1===dl(n),"Can't have a priority with additional path components");const r=a.getNode();l=t.serverCache.getNode();const s=su(i,n,r,l);o=null!=s?e.filter.updatePriority(r,s):a.getNode()}else{const u=hl(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=su(i,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=lu(i,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,r,s):a.getNode()}}return Oc(t,o,a.isFullyInitialized()||vl(n),e.filter.filtersNodes())}}function gu(e,t,n,i,r,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(vl(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ul(n);if(!l.isCompleteForPath(n)&&dl(n)>1)return t;const r=hl(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,hu,null)}const d=Lc(t,c,l.isFullyInitialized()||vl(n),u.filtersNodes());return mu(e,d,n,r,new pu(r,d,s),o)}function vu(e,t,n,i,r,s,a){const o=t.eventCache;let l,c;const u=new pu(r,t,s);if(vl(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,a),l=Oc(t,c,!0,e.filter.filtersNodes());else{const r=ul(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Oc(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=hl(n),c=o.getNode().getImmediateChild(r);let d;if(vl(s))d=i;else{const e=u.getCompleteChild(r);d=null!=e?".priority"===pl(s)&&e.getChild(ml(s)).isEmpty()?e:e.updateChild(s,i):Ql.EMPTY_NODE}if(c.equals(d))l=t;else{l=Oc(t,e.filter.updateChild(o.getNode(),r,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function yu(e,t){return e.eventCache.isCompleteForChild(t)}function _u(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function xu(e,t,n,i,r,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=vl(n)?i:new zc(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const l=_u(0,t.serverCache.getNode().getImmediateChild(n),i);c=gu(e,c,new ll(n),l,r,s,a,o)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=_u(0,t.serverCache.getNode().getImmediateChild(n),i);c=gu(e,c,new ll(n),l,r,s,a,o)}})),c}class bu{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new lc(n.getIndex()),r=(s=n).loadsAllData()?new lc(s.getIndex()):s.hasLimit()?new uc(s):new cc(s);var s;this.processor_=function(e){return{filter:e}}(r);const a=t.serverCache,o=t.eventCache,l=i.updateFullNode(Ql.EMPTY_NODE,a.getNode(),null),c=r.updateFullNode(Ql.EMPTY_NODE,o.getNode(),null),u=new Ac(l,a.isFullyInitialized(),i.filtersNodes()),d=new Ac(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=kc(d,u),this.eventGenerator_=new Rc(this.query_)}get query(){return this.query_}}function wu(e,t){const n=jc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!vl(t)&&!n.getImmediateChild(ul(t)).isEmpty())?n.getChild(t):null}function Su(e){return 0===e.eventRegistrations_.length}function Nu(e,t,n){const i=[];if(n){Dr(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Tu(e,t,n,i){t.type===Nc.MERGE&&null!==t.source.queryId&&(Dr(jc(e.viewCache_),"We should always have a full cache before handling merges"),Dr(Dc(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=fu(e.processor_,r,t,n,i);var a,o;return a=e.processor_,o=s.viewCache,Dr(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Dr(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Dr(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Eu(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Eu(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Pc(e,r,"child_removed",t,i,n),Pc(e,r,"child_added",t,i,n),Pc(e,r,"child_moved",s,i,n),Pc(e,r,"child_changed",t,i,n),Pc(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Cu,Mu;class Iu{constructor(){this.views=new Map}}function Au(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return Dr(null!=s,"SyncTree gave us an op for an invalid query."),Tu(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Tu(s,t,n,i));return r}}function Ru(e,t,n,i,r){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=iu(n,r?i:null),s=!1;e?s=!0:i instanceof Ql?(e=ru(n,i),s=!1):(e=Ql.EMPTY_NODE,s=!1);const a=kc(new Ac(e,s,!1),new Ac(i,r,!1));return new bu(t,a)}return a}function Pu(e,t,n,i,r,s){const a=Ru(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Wl,((e,t)=>{i.push(sc(e,t))}));return n.isFullyInitialized()&&i.push(rc(n.getNode())),Eu(e,i,n.getNode(),t)}(a,n)}function ku(e,t,n,i){const r=t._queryIdentifier,s=[];let a=[];const o=Uu(e);if("default"===r)for(const[l,c]of e.views.entries())a=a.concat(Nu(c,n,i)),Su(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(a=a.concat(Nu(t,n,i)),Su(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Uu(e)&&s.push(new(Dr(Cu,"Reference.ts has not been loaded"),Cu)(t._repo,t._path)),{removed:s,events:a}}function Ou(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Lu(e,t){let n=null;for(const i of e.views.values())n=n||wu(i,t);return n}function Du(e,t){if(t._queryParams.loadsAllData())return zu(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ju(e,t){return null!=Du(e,t)}function Uu(e){return null!=zu(e)}function zu(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Fu=1;class Vu{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zc(null),this.pendingWriteTree_={visibleWrites:Fc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bu(e,t,n,i,r){return function(e,t,n,i,r){Dr(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Vc(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?Ju(e,new Mc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Hu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(Qc(e.pendingWriteTree_,t)){let t=new zc(null);return null!=i.snap?t=t.set(cl(),!0):Io(i.children,(e=>{t=t.set(new ll(e),!0)})),Ju(e,new Ec(i.path,t,n))}return[]}function Wu(e,t,n){return Ju(e,new Mc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function qu(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||ju(a,t))){const l=ku(a,t,n,i);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!r){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(s,((e,t)=>Uu(t)));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Uu(t)){return[zu(t)]}{let e=[];return t&&(e=Ou(t)),Io(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=Zu(e,i);e.listenProvider_.startListening(sd(r),ed(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(sd(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(td(t));e.listenProvider_.stopListening(sd(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=td(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Gu(e,t,n,i){const r=nd(e,i);if(null!=r){const i=id(r),s=i.path,a=i.queryId,o=yl(s,t);return rd(e,s,new Mc(Tc(a),o,n))}return[]}function Yu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=yl(e,r);s=s||Lu(t,n),a=a||Uu(t)}));let o,l=e.syncPointTree_.get(r);if(l?(a=a||Uu(l),s=s||Lu(l,cl())):(l=new Iu,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s)o=!0;else{o=!1,s=Ql.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=Lu(t,cl());n&&(s=s.updateImmediateChild(e,n))}))}const c=ju(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=td(t);Dr(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=Fu++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let u=Pu(l,t,n,$c(e.pendingWriteTree_,r),s,o);if(!c&&!a&&!i){const n=Du(l,t);u=u.concat(function(e,t,n){const i=t._path,r=ed(e,t),s=Zu(e,n),a=e.listenProvider_.startListening(sd(t),r,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(i);if(r)Dr(!Uu(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!vl(e)&&t&&Uu(t))return[zu(t).query];{let e=[];return t&&(e=e.concat(Ou(t).map((e=>e.query)))),Io(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(sd(i),ed(e,i))}}return a}(e,t,n))}return u}function Xu(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=Lu(n,yl(e,t));if(i)return i}));return nu(i,t,r,n,!0)}function Ku(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const r=yl(e,n);i=i||Lu(t,r)}));let r=e.syncPointTree_.get(n);r?i=i||Lu(r,cl()):(r=new Iu,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,a=s?new Ac(i,!0,!1):null;return function(e){return Dc(e.viewCache_)}(Ru(r,t,$c(e.pendingWriteTree_,t._path),s?a.getNode():Ql.EMPTY_NODE,s))}function Ju(e,t){return $u(t,e.syncPointTree_,null,$c(e.pendingWriteTree_,cl()))}function $u(e,t,n,i){if(vl(e.path))return Qu(e,t,n,i);{const r=t.get(cl());null==n&&null!=r&&(n=Lu(r,cl()));let s=[];const a=ul(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=cu(i,a);s=s.concat($u(o,l,e,t))}return r&&(s=s.concat(Au(r,e,i,n))),s}}function Qu(e,t,n,i){const r=t.get(cl());null==n&&null!=r&&(n=Lu(r,cl()));let s=[];return t.children.inorderTraversal(((t,r)=>{const a=n?n.getImmediateChild(t):null,o=cu(i,t),l=e.operationForChild(t);l&&(s=s.concat(Qu(l,r,a,o)))})),r&&(s=s.concat(Au(r,e,i,n))),s}function Zu(e,t){const n=t.query,i=ed(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ql.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=nd(e,n);if(i){const n=id(i),r=n.path,s=n.queryId,a=yl(r,t);return rd(e,r,new Cc(Tc(s),a))}return[]}(e,n._path,i):function(e,t){return Ju(e,new Cc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return qu(e,n,null,i)}}}}function ed(e,t){const n=td(t);return e.queryToTagMap.get(n)}function td(e){return e._path.toString()+"$"+e._queryIdentifier}function nd(e,t){return e.tagToQueryMap.get(t)}function id(e){const t=e.indexOf("$");return Dr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ll(e.substr(0,t))}}function rd(e,t,n){const i=e.syncPointTree_.get(t);Dr(i,"Missing sync point for query tag that we're tracking");return Au(i,n,$c(e.pendingWriteTree_,t),null)}function sd(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Dr(Mu,"Reference.ts has not been loaded"),Mu)(e._repo,e._path):e}class ad{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ad(t)}node(){return this.node_}}class od{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gl(this.path_,e);return new od(this.syncTree_,t)}node(){return Xu(this.syncTree_,this.path_)}}const ld=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},cd=function(e,t,n){return e&&"object"===typeof e?(Dr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ud(e[".sv"],t,n):"object"===typeof e[".sv"]?dd(e[".sv"],t):void Dr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ud=function(e,t,n){if("timestamp"===e)return n.timestamp;Dr(!1,"Unexpected server value: "+e)},dd=function(e,t,n){e.hasOwnProperty("increment")||Dr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&Dr(!1,"Unexpected increment value: "+i);const r=t.node();if(Dr(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!==typeof s?i:s+i},hd=function(e,t,n,i){return fd(t,new od(n,e),i)},pd=function(e,t,n){return fd(e,new ad(t),n)};function fd(e,t,n){const i=e.getPriority().val(),r=cd(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=cd(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new Hl(s,tc(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Hl(r))),i.forEachChild(Wl,((e,i)=>{const r=fd(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class md{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function gd(e,t){let n=t instanceof ll?t:new ll(t),i=e,r=ul(n);for(;null!==r;){const e=cs(i.node.children,r)||{children:{},childCount:0};i=new md(r,i,e),n=hl(n),r=ul(n)}return i}function vd(e){return e.node.value}function yd(e,t){e.node.value=t,Sd(e)}function _d(e){return e.node.childCount>0}function xd(e,t){Io(e.node.children,((n,i)=>{t(new md(n,e,i))}))}function bd(e,t,n,i){n&&!i&&t(e),xd(e,(e=>{bd(e,t,!0,i)})),n&&i&&t(e)}function wd(e){return new ll(null===e.parent?e.name:wd(e.parent)+"/"+e.name)}function Sd(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===vd(e)&&!_d(e)}(n),r=ls(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Sd(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Sd(e))}(e.parent,e.name,e)}const Nd=/[\[\].#$\/\u0000-\u001F\u007F]/,Td=/[\[\].#$\u0000-\u001F\u007F]/,Ed=10485760,Cd=function(e){return"string"===typeof e&&0!==e.length&&!Nd.test(e)},Md=function(e){return"string"===typeof e&&0!==e.length&&!Td.test(e)},Id=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!bo(e)||e&&"object"===typeof e&&ls(e,".sv")},Ad=function(e,t,n,i){i&&void 0===t||Rd(xs(e,"value"),t,n)},Rd=function(e,t,n){const i=n instanceof ll?new bl(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Sl(i));if("function"===typeof t)throw new Error(e+"contains a function "+Sl(i)+" with contents = "+t.toString());if(bo(t))throw new Error(e+"contains "+t.toString()+" "+Sl(i));if("string"===typeof t&&t.length>Ed/3&&bs(t)>Ed)throw new Error(e+"contains a string greater than "+Ed+" utf8 bytes "+Sl(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(Io(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Cd(t)))throw new Error(e+" contains an invalid key ("+t+") "+Sl(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=bs(t),wl(e)}(i,t),Rd(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=bs(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Sl(i)+" in addition to actual children.")}},Pd=function(e,t,n,i){if((!i||void 0!==n)&&!Cd(n))throw new Error(xs(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kd=function(e,t,n,i){if((!i||void 0!==n)&&!Md(n))throw new Error(xs(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Od=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kd(e,t,n,i)},Ld=function(e,t){if(".info"===ul(t))throw new Error(e+" failed = Can't modify data under /.info/")},Dd=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Cd(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Md(e)}(n))throw new Error(xs(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class jd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ud(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||_l(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function zd(e,t,n){Ud(e,n),Vd(e,(e=>_l(e,t)))}function Fd(e,t,n){Ud(e,n),Vd(e,(e=>xl(e,t)||xl(t,e)))}function Vd(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(Bd(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Bd(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();po&&go("event: "+n.toString()),ko(i)}}}const Hd="repo_interrupt",Wd=25;class qd{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_c(),this.transactionQueueTree_=new md,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gd(e,t,n){if(e.stats_=Xo(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new vc(e.repoInfo_,((t,n,i,r)=>{Kd(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Jd(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{as(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new El(e.repoInfo_,t,((t,n,i,r)=>{Kd(e,t,n,i,r)}),(t=>{Jd(e,t)}),(t=>{!function(e,t){Io(t,((t,n)=>{$d(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Yo[n]||(Yo[n]=t()),Yo[n]}(e.repoInfo_,(()=>new Sc(e.stats_,e.server_))),e.infoData_=new yc,e.infoSyncTree_=new Vu({startListening:(t,n,i,r)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=Wu(e.infoSyncTree_,t._path,a),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),$d(e,"connected",!1),e.serverSyncTree_=new Vu({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);Fd(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Yd(e){const t=e.infoData_.getNode(new ll(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Xd(e){return ld({timestamp:Yd(e)})}function Kd(e,t,n,i,r){e.dataUpdateCount++;const s=new ll(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const t=ds(n,(e=>tc(e)));a=function(e,t,n,i){const r=nd(e,i);if(r){const i=id(r),s=i.path,a=i.queryId,o=yl(s,t),l=zc.fromObject(n);return rd(e,s,new Ic(Tc(a),o,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=tc(n);a=Gu(e.serverSyncTree_,s,t,r)}else if(i){const t=ds(n,(e=>tc(e)));a=function(e,t,n){const i=zc.fromObject(n);return Ju(e,new Ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=tc(n);a=Wu(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=ah(e,s)),Fd(e.eventQueue_,o,a)}function Jd(e,t){$d(e,"connected",t),!1===t&&function(e){nh(e,"onDisconnectEvents");const t=Xd(e),n=_c();bc(e.onDisconnect_,cl(),((i,r)=>{const s=hd(i,r,e.serverSyncTree_,t);xc(n,i,s)}));let i=[];bc(n,cl(),((t,n)=>{i=i.concat(Wu(e.serverSyncTree_,t,n));const r=dh(e,t);ah(e,r)})),e.onDisconnect_=_c(),Fd(e.eventQueue_,cl(),i)}(e)}function $d(e,t,n){const i=new ll("/.info/"+t),r=tc(n);e.infoData_.updateSnapshot(i,r);const s=Wu(e.infoSyncTree_,i,r);Fd(e.eventQueue_,i,s)}function Qd(e){return e.nextWriteId_++}function Zd(e,t,n,i,r){nh(e,"set",{path:t.toString(),value:n,priority:i});const s=Xd(e),a=tc(n,i),o=Xu(e.serverSyncTree_,t),l=pd(a,o,s),c=Qd(e),u=Bu(e.serverSyncTree_,t,l,c,!0);Ud(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,i)=>{const s="ok"===n;s||xo("set at "+t+" failed: "+n);const a=Hu(e.serverSyncTree_,c,!s);Fd(e.eventQueue_,t,a),ih(e,r,n,i)}));const d=dh(e,t);ah(e,d),Fd(e.eventQueue_,d,[])}function eh(e,t,n){let i;i=".info"===ul(t._path)?qu(e.infoSyncTree_,t,n):qu(e.serverSyncTree_,t,n),zd(e.eventQueue_,t._path,i)}function th(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Hd)}function nh(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];go(t,...i)}function ih(e,t,n,i){t&&ko((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}function rh(e,t,n){return Xu(e.serverSyncTree_,t,n)||Ql.EMPTY_NODE}function sh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||uh(e,t),vd(t)){const n=lh(e,t);Dr(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=rh(e,t,i);let s=r;const a=r.hash();for(let c=0;c<n.length;c++){const e=n[c];Dr(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=yl(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(i=>{nh(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(Hu(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();uh(e,gd(e.transactionQueueTree_,t)),sh(e,e.transactionQueueTree_),Fd(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)ko(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{xo("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}ah(e,t)}}),a)}(e,wd(t),n)}else _d(t)&&xd(t,(t=>{sh(e,t)}))}function ah(e,t){const n=oh(e,t),i=wd(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=yl(n,s.path);let u,d=!1;if(Dr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,r=r.concat(Hu(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=Wd)d=!0,u="maxretry",r=r.concat(Hu(e.serverSyncTree_,s.currentWriteId,!0));else{const n=rh(e,s.path,a);s.currentInputSnapshot=n;const i=t[l].update(n.val());if(void 0!==i){Rd("transaction failed: Data returned ",i,s.path);let t=tc(i);"object"===typeof i&&null!=i&&ls(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=Xd(e),c=pd(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Qd(e),a.splice(a.indexOf(o),1),r=r.concat(Bu(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),r=r.concat(Hu(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",r=r.concat(Hu(e.serverSyncTree_,s.currentWriteId,!0))}Fd(e.eventQueue_,n,r),r=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?i.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):i.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;uh(e,e.transactionQueueTree_);for(let l=0;l<i.length;l++)ko(i[l]);sh(e,e.transactionQueueTree_)}(e,lh(e,n),i),i}function oh(e,t){let n,i=e.transactionQueueTree_;for(n=ul(t);null!==n&&void 0===vd(i);)i=gd(i,n),n=ul(t=hl(t));return i}function lh(e,t){const n=[];return ch(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function ch(e,t,n){const i=vd(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);xd(t,(t=>{ch(e,t,n)}))}function uh(e,t){const n=vd(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,yd(t,n.length>0?n:void 0)}xd(t,(t=>{uh(e,t)}))}function dh(e,t){const n=wd(oh(e,t)),i=gd(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{hh(e,t)})),hh(e,i),bd(i,(t=>{hh(e,t)})),n}function hh(e,t){const n=vd(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Dr(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Dr(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(Hu(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?yd(t,void 0):n.length=s+1,Fd(e.eventQueue_,wd(t),r);for(let e=0;e<i.length;e++)ko(i[e])}}const ph=function(e,t){const n=fh(e),i=n.namespace;"firebase.com"===n.domain&&_o(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||_o("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ho(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new ll(n.pathString)}},fh=function(e){let t="",n="",i="",r="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):xo("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:a,scheme:o,pathString:r,namespace:s}},mh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gh=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=mh.charAt(n%64),n=Math.floor(n/64);Dr(0===n,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=mh.charAt(t[r]);return Dr(20===a.length,"nextPushId: Length should be 20."),a}}();class vh{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+as(this.snapshot.exportVal())}}class yh{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _h{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Dr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xh{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return vl(this._path)?null:pl(this._path)}get ref(){return new Nh(this._repo,this._path)}get _queryIdentifier(){const e=gc(this._queryParams),t=Co(e);return"{}"===t?"default":t}get _queryObject(){return gc(this._queryParams)}isEqual(e){if(!((e=ws(e))instanceof xh))return!1;const t=this._repo===e._repo,n=_l(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function bh(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function wh(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Rl){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==wo)throw new Error(i);if("string"!==typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==So)throw new Error(i);if("string"!==typeof n)throw new Error(r)}}else if(e.getIndex()===Wl){if(null!=t&&!Id(t)||null!=n&&!Id(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Dr(e.getIndex()instanceof nc||e.getIndex()===ic,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Sh(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Nh extends xh{constructor(e,t){super(e,t,new dc,!1)}get parent(){const e=ml(this._path);return null===e?null:new Nh(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Th{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ll(e),n=Ch(this.ref,e);return new Th(this._node.getChild(t),n,Wl)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Th(n,Ch(this.ref,t),Wl))))}hasChild(e){const t=new ll(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Eh(e,t){return(e=ws(e))._checkNotDeleted("ref"),void 0!==t?Ch(e._root,t):e._root}function Ch(e,t){return null===ul((e=ws(e))._path)?Od("child","path",t,!1):kd("child","path",t,!1),new Nh(e._repo,gl(e._path,t))}function Mh(e,t){e=ws(e),Ld("push",e._path),Ad("push",t,e._path,!0);const n=Yd(e._repo),i=gh(n),r=Ch(e,i),s=Ch(e,i);let a;return a=null!=t?Ah(s,t).then((()=>s)):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Ih(e){return Ld("remove",e._path),Ah(e,null)}function Ah(e,t){e=ws(e),Ld("set",e._path),Ad("set",t,e._path,!1);const n=new $r;return Zd(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Rh(e){e=ws(e);const t=new _h((()=>{})),n=new Ph(t);return function(e,t,n){const i=Ku(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then((i=>{const r=tc(i).withIndex(t._queryParams.getIndex());let s;if(Yu(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Wu(e.serverSyncTree_,t._path,r);else{const n=ed(e.serverSyncTree_,t);s=Gu(e.serverSyncTree_,t._path,r,n)}return Fd(e.eventQueue_,t._path,s),qu(e.serverSyncTree_,t,n,null,!0),r}),(n=>(nh(e,"get for query "+as(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Th(t,new Nh(e._repo,e._path),e._queryParams.getIndex())))}class Ph{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new vh("value",this,new Th(e.snapshotNode,new Nh(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yh(this,e,t):null}matches(e){return e instanceof Ph&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kh{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yh(this,e,t):null}createEvent(e,t){Dr(null!=e.childName,"Child events should have a childName.");const n=Ch(new Nh(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new vh(e.type,this,new Th(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kh&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Oh(e,t,n,i,r){let s;if("object"===typeof i&&(s=void 0,r=i),"function"===typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{eh(e._repo,e,o),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const a=new _h(n,s||void 0),o="value"===t?new Ph(a):new kh(t,a);return function(e,t,n){let i;i=".info"===ul(t._path)?Yu(e.infoSyncTree_,t,n):Yu(e.serverSyncTree_,t,n),zd(e.eventQueue_,t._path,i)}(e._repo,e,o),()=>eh(e._repo,e,o)}function Lh(e,t,n,i){return Oh(e,"value",t,n,i)}class Dh{}class jh extends Dh{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Ad("endAt",this._value,e._path,!0);const t=pc(e._queryParams,this._value,this._key);if(Sh(t),wh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xh(e._repo,e._path,t,e._orderByCalled)}}class Uh extends Dh{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Ad("startAt",this._value,e._path,!0);const t=hc(e._queryParams,this._value,this._key);if(Sh(t),wh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xh(e._repo,e._path,t,e._orderByCalled)}}class zh extends Dh{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){bh(e,"orderByChild");const t=new ll(this._path);if(vl(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new nc(t),i=fc(e._queryParams,n);return wh(i),new xh(e._repo,e._path,i,!0)}}function Fh(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kd("orderByChild","path",e,!1),new zh(e)}class Vh extends Dh{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Ad("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jh(this._value,this._key)._apply(new Uh(this._value,this._key)._apply(e))}}function Bh(e,t){return Pd("equalTo","key",t,!0),new Vh(e,t)}function Hh(e){let t=ws(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(const s of i)t=s._apply(t);return t}!function(e){Dr(!Cu,"__referenceConstructor has already been defined"),Cu=e}(Nh),function(e){Dr(!Mu,"__referenceConstructor has already been defined"),Mu=e}(Nh);const Wh="FIREBASE_DATABASE_EMULATOR_HOST",qh={};let Gh=!1;function Yh(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||_o("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),go("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=ph(s,r),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Wh]),o?(a=!0,s="http://".concat(o,"?ns=").concat(c.namespace),l=ph(s,r),c=l.repoInfo):a=!l.repoInfo.secure;const u=r&&a?new jo(jo.OWNER):new Do(e.name,e.options,t);Dd("Invalid Firebase Database URL",l),vl(l.path)||_o("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,i){let r=qh[t.name];r||(r={},qh[t.name]=r);let s=r[e.toURLString()];s&&_o("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new qd(e,Gh,n,i),r[e.toURLString()]=s,s}(c,e,u,new Lo(e.name,n));return new Xh(d,e)}class Xh{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gd(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nh(this._repo,cl())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=qh[t];n&&n[e.key]===e||_o("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),th(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_o("Cannot call "+e+" on a deleted database.")}}function Kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua(),t=arguments.length>1?arguments[1]:void 0;const n=Pa(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(e=>{const t=Xr(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ws(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&_o("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&_o('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new jo(jo.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Br(JSON.stringify({alg:"none",type:"JWT"})),Br(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new jo(t)}!function(e,t,n,i){e.repoInfo_=new Ho("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(n,...e)}return n}El.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},El.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){no(Da),Ra(new Ss("database",((e,t)=>{let{instanceIdentifier:n}=t;return Yh(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),za(Za,eo,e),za(Za,eo,"esm2017")}();function Jh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function $h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qh=$h,Zh=new is("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ep=new ks("@firebase/auth");function tp(e){if(ep.logLevel<=Ms.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ep.error("Auth (".concat(Da,"): ").concat(e),...n)}}function np(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw ap(e,...n)}function ip(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ap(e,...n)}function rp(e,t,n){const i=Object.assign(Object.assign({},Qh()),{[t]:n});return new is("auth","Firebase",i).create(t,{appName:e.name})}function sp(e){return rp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ap(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Zh.create(e,...n)}function op(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw ap(t,...i)}}function lp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw tp(t),new Error(t)}function cp(e,t){e||lp(t)}function up(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dp(){return"http:"===hp()||"https:"===hp()}function hp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function pp(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dp()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class fp{constructor(e,t){this.shortDelay=e,this.longDelay=t,cp(t>e,"Short delay should be less than long delay!"),this.isMobile=Zr()||es()}get(){return pp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mp(e,t){cp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class gp{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void lp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void lp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void lp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yp=new fp(3e4,6e4);function _p(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function xp(e,t,n,i){return bp(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const a=fs(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),gp.fetch()(Sp(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},r))}))}async function bp(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},vp),t);try{const t=new Tp(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Ep(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ep(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ep(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ep(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw rp(e,o,a);np(e,o)}}catch(r){if(r instanceof ns)throw r;np(e,"network-request-failed",{message:String(r)})}}async function wp(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await xp(e,t,n,i,r);return"mfaPendingCredential"in s&&np(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Sp(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?mp(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function Np(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tp{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ip(this.auth,"network-request-failed"))),yp.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ep(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ip(e,t,i);return r.customData._tokenResponse=n,r}function Cp(e){return void 0!==e&&void 0!==e.enterprise}class Mp{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Np(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ip(e,t){return xp(e,"GET","/v2/recaptchaConfig",_p(e,t))}async function Ap(e,t){return xp(e,"POST","/v1/accounts:lookup",t)}function Rp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Pp(e){return 1e3*Number(e)}function kp(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return tp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Hr(n);return e?JSON.parse(e):(tp("Failed to decode base64 JWT payload"),null)}catch(r){return tp("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Op(e){const t=kp(e);return op(t,"internal-error"),op("undefined"!==typeof t.exp,"internal-error"),op("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lp(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ns&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Dp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rp(this.lastLoginAt),this.creationTime=Rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Up(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Lp(e,Ap(n,{idToken:i}));op(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?zp(s.providerUserInfo):[],o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function zp(e){return e.map((e=>{var{providerId:t}=e,n=Jh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Fp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){op(e.idToken,"internal-error"),op("undefined"!==typeof e.idToken,"internal-error"),op("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Op(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){op(0!==e.length,"internal-error");const t=Op(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(op(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await bp(e,{},(async()=>{const n=fs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Sp(e,i,"/v1/token","key=".concat(r)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gp.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Fp;return n&&(op("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(op("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(op("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fp,this.toJSON())}_performRefresh(){return lp("not implemented")}}function Vp(e,t){op("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Bp{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Jh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Lp(this,this.stsTokenManager.getToken(this.auth,e));return op(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ws(e),i=await n.getIdToken(t),r=kp(i);op(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Rp(Pp(r.auth_time)),issuedAtTime:Rp(Pp(r.iat)),expirationTime:Rp(Pp(r.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ws(e);await Up(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(op(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bp(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){op(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Up(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ka(this.auth.app))return Promise.reject(sp(this.auth));const e=await this.getIdToken();return await Lp(this,async function(e,t){return xp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:x,providerData:b,stsTokenManager:w}=t;op(y&&w,e,"internal-error");const S=Fp.fromJSON(this.name,w);op("string"===typeof y,e,"internal-error"),Vp(u,e.name),Vp(d,e.name),op("boolean"===typeof _,e,"internal-error"),op("boolean"===typeof x,e,"internal-error"),Vp(h,e.name),Vp(p,e.name),Vp(f,e.name),Vp(m,e.name),Vp(g,e.name),Vp(v,e.name);const N=new Bp({uid:y,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(N.providerData=b.map((e=>Object.assign({},e)))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Fp;i.updateFromServerResponse(t);const r=new Bp({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Up(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];op(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?zp(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),a=new Fp;a.updateFromIdToken(n);const o=new Bp({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new jp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(o,l),o}}const Hp=new Map;function Wp(e){cp(e instanceof Function,"Expected a class definition");let t=Hp.get(e);return t?(cp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hp.set(e,t),t)}class qp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qp.type="NONE";const Gp=qp;function Yp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Xp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Yp(this.userKey,i.apiKey,r),this.fullPersistenceKey=Yp("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bp._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Xp(Wp(Gp),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Wp(Gp);const s=Yp(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Bp._fromJSON(e,t);c!==r&&(a=n),r=c;break}}catch(l){}const o=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(l){}}))),new Xp(r,e,n)):new Xp(r,e,n)}}function Kp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tf(t))return"Blackberry";if(nf(t))return"Webos";if($p(t))return"Safari";if((t.includes("chrome/")||Qp(t))&&!t.includes("edge/"))return"Chrome";if(ef(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Jp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/firefox\//i.test(e)}function $p(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/crios\//i.test(e)}function Zp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/iemobile/i.test(e)}function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/android/i.test(e)}function tf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/blackberry/i.test(e)}function nf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/webos/i.test(e)}function rf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sf(){return function(){const e=Qr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function af(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return rf(e)||ef(e)||nf(e)||tf(e)||/windows phone/i.test(e)||Zp(e)}function of(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kp(Qr());break;case"Worker":t="".concat(Kp(Qr()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Da,"/").concat(i)}class lf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class cf{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsLowercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(r=o.containsUppercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class uf{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new lf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wp(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Xp.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ap(this,{idToken:e}),n=await Bp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ka(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return op(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Up(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ka(this.app))return Promise.reject(sp(this));const t=e?ws(e):null;return t&&op(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&op(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ka(this.app)?Promise.reject(sp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ka(this.app)?Promise.reject(sp(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Wp(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return xp(e,"GET","/v2/passwordPolicy",_p(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new cf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new is("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return xp(e,"POST","/v2/accounts:revokeToken",_p(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wp(e)||this._popupRedirectResolver;op(t,this,"argument-error"),this.redirectPersistenceManager=await Xp.create(this,[Wp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(op(a,this,"internal-error"),a.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return op(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=of(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ep.logLevel<=Ms.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ep.warn("Auth (".concat(Da,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function df(e){return ws(e)}class hf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ys(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return op(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ff(e){return pf.loadJS(e)}function mf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gf{constructor(e){this.type="recaptcha-enterprise",this.auth=df(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;Cp(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ip(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Mp(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&Cp(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=pf.recaptchaEnterpriseScript;0!==t.length&&(t+=r),ff(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function vf(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new gf(e);let s;try{s=await r.verify(n)}catch(yo){s=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yf(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await vf(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await vf(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function _f(e,t,n){const i=df(e);op(i._canInitEmulator,i,"emulator-config-failed"),op(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=xf(t),{host:a,port:o}=function(e){const t=xf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:bf(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:bf(t)}}}(t),l=null===o?"":":".concat(o);i.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function xf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bf(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lp("not implemented")}_getIdTokenResponse(e){return lp("not implemented")}_linkToIdToken(e,t){return lp("not implemented")}_getReauthenticationResolver(e){return lp("not implemented")}}async function Sf(e,t){return xp(e,"POST","/v1/accounts:signUp",t)}async function Nf(e,t){return wp(e,"POST","/v1/accounts:signInWithPassword",_p(e,t))}class Tf extends wf{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Tf(e,t,"password")}static _fromEmailAndCode(e,t){return new Tf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return yf(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Nf);case"emailLink":return async function(e,t){return wp(e,"POST","/v1/accounts:signInWithEmailLink",_p(e,t))}(e,{email:this._email,oobCode:this._password});default:np(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return yf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Sf);case"emailLink":return async function(e,t){return wp(e,"POST","/v1/accounts:signInWithEmailLink",_p(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:np(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ef(e,t){return wp(e,"POST","/v1/accounts:signInWithIdp",_p(e,t))}class Cf extends wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):np("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Jh(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Cf(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return Ef(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ef(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ef(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fs(t)}return e}}const Mf={USER_NOT_FOUND:"user-not-found"};class If extends wf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new If({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new If({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return wp(e,"POST","/v1/accounts:signInWithPhoneNumber",_p(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await wp(e,"POST","/v1/accounts:signInWithPhoneNumber",_p(e,t));if(n.temporaryProof)throw Ep(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return wp(e,"POST","/v1/accounts:signInWithPhoneNumber",_p(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Mf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new If({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Af{constructor(e){var t,n,i,r,s,a;const o=ms(gs(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);op(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=o.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ms(gs(e)).link,n=t?ms(gs(t)).deep_link_id:null,i=ms(gs(e)).deep_link_id;return(i?ms(gs(i)).link:null)||i||n||t||e}(e);try{return new Af(t)}catch(n){return null}}}class Rf{constructor(){this.providerId=Rf.PROVIDER_ID}static credential(e,t){return Tf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Af.parseLink(t);return op(n,"argument-error"),Tf._fromEmailAndCode(e,n.code,n.tenantId)}}Rf.PROVIDER_ID="password",Rf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kf extends Pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Of extends kf{constructor(){super("facebook.com")}static credential(e){return Cf._fromParams({providerId:Of.PROVIDER_ID,signInMethod:Of.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Of.credentialFromTaggedObject(e)}static credentialFromError(e){return Of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Of.credential(t.oauthAccessToken)}catch(n){return null}}}Of.FACEBOOK_SIGN_IN_METHOD="facebook.com",Of.PROVIDER_ID="facebook.com";class Lf extends kf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cf._fromParams({providerId:Lf.PROVIDER_ID,signInMethod:Lf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lf.credentialFromTaggedObject(e)}static credentialFromError(e){return Lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Lf.credential(n,i)}catch(r){return null}}}Lf.GOOGLE_SIGN_IN_METHOD="google.com",Lf.PROVIDER_ID="google.com";class Df extends kf{constructor(){super("github.com")}static credential(e){return Cf._fromParams({providerId:Df.PROVIDER_ID,signInMethod:Df.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Df.credentialFromTaggedObject(e)}static credentialFromError(e){return Df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Df.credential(t.oauthAccessToken)}catch(n){return null}}}Df.GITHUB_SIGN_IN_METHOD="github.com",Df.PROVIDER_ID="github.com";class jf extends kf{constructor(){super("twitter.com")}static credential(e,t){return Cf._fromParams({providerId:jf.PROVIDER_ID,signInMethod:jf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jf.credentialFromTaggedObject(e)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return jf.credential(n,i)}catch(r){return null}}}jf.TWITTER_SIGN_IN_METHOD="twitter.com",jf.PROVIDER_ID="twitter.com";class Uf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Bp._fromIdTokenResponse(e,n,i),s=zf(n);return new Uf({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=zf(n);return new Uf({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function zf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ff extends ns{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Ff(e,t,n,i)}}function Vf(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ff._fromErrorAndOperation(e,n,t,i);throw n}))}async function Bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Lp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Uf._forOperation(e,"link",i)}async function Hf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(ka(i.app))return Promise.reject(sp(i));const r="reauthenticate";try{const s=await Lp(e,Vf(i,r,t,e),n);op(s.idToken,i,"internal-error");const a=kp(s.idToken);op(a,i,"internal-error");const{sub:o}=a;return op(e.uid===o,i,"user-mismatch"),Uf._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&np(i,"user-mismatch"),s}}async function Wf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ka(e.app))return Promise.reject(sp(e));const i="signIn",r=await Vf(e,i,t),s=await Uf._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function qf(e,t){return Wf(df(e),t)}async function Gf(e){const t=df(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Yf(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await Lp(e,async function(e,t){return xp(e,"POST","/v1/accounts:update",t)}(i,r));await e._updateTokensIfNecessary(s,!0)}new WeakMap;const Xf="__sak";class Kf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Jf extends Kf{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Qr();return $p(e)||rf(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=af(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);sf()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jf.type="LOCAL";const $f=Jf;class Qf extends Kf{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qf.type="SESSION";const Zf=Qf;class em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new em(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map((async e=>e(t.origin,r))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}em.receivers=[];class nm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((a,o)=>{const l=tm("",20);i.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function im(){return window}function rm(){return"undefined"!==typeof im().WorkerGlobalScope&&"function"===typeof im().importScripts}const sm="firebaseLocalStorageDb",am="firebaseLocalStorage",om="fbase_key";class lm{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function cm(e,t){return e.transaction([am],t?"readwrite":"readonly").objectStore(am)}function um(){const e=indexedDB.open(sm,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(am,{keyPath:om})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(am)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(sm);return new lm(e).toPromise()}(),t(await um()))}))}))}async function dm(e,t,n){const i=cm(e,!0).put({[om]:t,value:n});return new lm(i).toPromise()}function hm(e,t){const n=cm(e,!0).delete(t);return new lm(n).toPromise()}class pm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await um()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=em._getInstance(rm()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new nm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await dm(e,Xf,"1"),await hm(e,Xf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>dm(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=cm(e,!1).get(t),i=await new lm(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>hm(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=cm(e,!1).getAll();return new lm(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pm.type="LOCAL";const fm=pm;mf("rcb"),new fp(3e4,6e4);const mm="recaptcha";async function gm(e,t,n){var i;const r=await n.verify();try{let s;if(op("string"===typeof r,e,"argument-error"),op(n.type===mm,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){op("enroll"===t.type,e,"internal-error");const n=await function(e,t){return xp(e,"POST","/v2/accounts/mfaEnrollment:start",_p(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{op("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;op(n,e,"missing-multi-factor-info");const a=await function(e,t){return xp(e,"POST","/v2/accounts/mfaSignIn:start",_p(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return xp(e,"POST","/v1/accounts:sendVerificationCode",_p(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class vm{constructor(e){this.providerId=vm.PROVIDER_ID,this.auth=df(e)}verifyPhoneNumber(e,t){return gm(this.auth,e,ws(t))}static credential(e,t){return If._fromVerification(e,t)}static credentialFromResult(e){const t=e;return vm.credentialFromTaggedObject(t)}static credentialFromError(e){return vm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?If._fromTokenResponse(n,i):null}}function ym(e,t){return t?Wp(t):(op(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vm.PROVIDER_ID="phone",vm.PHONE_SIGN_IN_METHOD="phone";class _m extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ef(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ef(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ef(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xm(e){return Wf(e.auth,new _m(e),e.bypassAuthState)}function bm(e){const{auth:t,user:n}=e;return op(n,t,"internal-error"),Hf(n,new _m(e),e.bypassAuthState)}async function wm(e){const{auth:t,user:n}=e;return op(n,t,"internal-error"),Bf(n,new _m(e),e.bypassAuthState)}class Sm{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xm;case"linkViaPopup":case"linkViaRedirect":return wm;case"reauthViaPopup":case"reauthViaRedirect":return bm;default:np(this.auth,"internal-error")}}resolve(e){cp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nm=new fp(2e3,1e4);class Tm extends Sm{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Tm.currentPopupAction&&Tm.currentPopupAction.cancel(),Tm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return op(e,this.auth,"internal-error"),e}async onExecution(){cp(1===this.filter.length,"Popup operations only handle one event");const e=tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ip(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ip(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ip(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Nm.get())};e()}}Tm.currentPopupAction=null;const Em="pendingRedirect",Cm=new Map;class Mm extends Sm{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Cm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Rm(t),i=Am(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Cm.set(this.auth._key(),e)}return this.bypassAuthState||Cm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Im(e,t){Cm.set(e._key(),t)}function Am(e){return Wp(e._redirectPersistence)}function Rm(e){return Yp(Em,e.config.apiKey,e.name)}async function Pm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ka(e.app))return Promise.reject(sp(e));const i=df(e),r=ym(i,t),s=new Mm(i,r,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class km{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Lm(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ip(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Om(e))}saveEventToCache(e){this.cachedEventUids.add(Om(e)),this.lastProcessedEventTime=Date.now()}}function Om(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Lm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Dm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jm=/^https?/;async function Um(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return xp(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(zm(i))return}catch(n){}np(e,"unauthorized-domain")}function zm(e){const t=up(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!jm.test(n))return!1;if(Dm.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Fm=new fp(3e4,6e4);function Vm(){const e=im().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Bm(e){return new Promise(((t,n)=>{var i,r,s;function a(){Vm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vm(),n(ip(e,"network-request-failed"))},timeout:Fm.get()})}if(null===(r=null===(i=im().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=im().gapi)||void 0===s?void 0:s.load)){const t=mf("iframefcb");return im()[t]=()=>{gapi.load?a():n(ip(e,"network-request-failed"))},ff("".concat(pf.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Hm=null,e}))}let Hm=null;const Wm=new fp(5e3,15e3),qm="__/auth/iframe",Gm="emulator/auth/iframe",Ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Km(e){const t=e.config;op(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mp(t,Gm):"https://".concat(e.config.authDomain,"/").concat(qm),i={apiKey:t.apiKey,appName:e.name,v:Da},r=Xm.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(fs(i).slice(1))}async function Jm(e){const t=await function(e){return Hm=Hm||Bm(e),Hm}(e),n=im().gapi;return op(n,e,"internal-error"),t.open({where:document.body,url:Km(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ym,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=ip(e,"network-request-failed"),s=im().setTimeout((()=>{i(r)}),Wm.get());function a(){im().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{i(r)}))}))))}const $m={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Zm(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},$m),{width:i.toString(),height:r.toString(),top:s,left:a}),c=Qr().toLowerCase();n&&(o=Qp(c)?"_blank":n),Jp(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return rf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new Qm(null);const d=window.open(t||"",o,u);op(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Qm(d)}const eg="__/auth/handler",tg="emulator/auth/handler",ng=encodeURIComponent("fac");async function ig(e,t,n,i,r,s){op(e.config.authDomain,e,"auth-domain-config-required"),op(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Da,eventId:r};if(t instanceof Pf){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",us(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof kf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ng,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(eg);return mp(t,tg)}(e),"?").concat(fs(o).slice(1)).concat(c)}const rg="webStorageSupport";const sg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zf,this._completeRedirectFn=Pm,this._overrideRedirectResult=Im}async _openPopup(e,t,n,i){var r;cp(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Zm(e,await ig(e,t,n,up(),i),tm())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){im().location.href=e}(await ig(e,t,n,up(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Jm(e),n=new km(e);return t.register("authEvent",(t=>{op(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rg,{type:rg},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[rg];void 0!==r&&t(!!r),np(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Um(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return af()||$p()||rf()}};var ag="@firebase/auth",og="1.7.1";class lg{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){op(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const cg=Jr("authIdTokenMaxAge")||300;let ug=null;function dg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua();const t=Pa(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Pa(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(hs(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;np(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:sg,persistence:[fm,$f,Zf]}),i=Jr("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>cg)return;const i=null===t||void 0===t?void 0:t.token;ug!==i&&(ug=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){ws(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,i){ws(e).onIdTokenChanged(t,n,i)}(n,(e=>t(e)))}}var r;const s=Xr("auth");return s&&_f(n,"http://".concat(s)),n}var hg,pg;hg={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=ip("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},pf=hg,pg="Browser",Ra(new Ss("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;op(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:pg,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:of(pg)},c=new uf(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Wp);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ra(new Ss("auth-internal",(e=>(e=>new lg(e))(df(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),za(ag,og,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(pg)),za(ag,og,"esm2017");const fg=dg(),mg=(0,i.createContext)(),gg=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{o()}),[]);const o=()=>{const e=function(e,t,n,i){return ws(e).onAuthStateChanged(t,n,i)}(fg,(e=>{if(e){const e=Lh(Hh(Eh(Kh(Qa),"users/"),Fh("email"),Bh(fg.currentUser.email)),(e=>{const t=e.val(),n=Object.values(t)[0];r(n),a(!1)}));return()=>e()}fg.currentUser&&r(null),a(!1)}));return()=>e()};return(0,vr.jsx)(mg.Provider,{value:{userData:n,loading:s,logout:()=>{r(null)}},children:!s&&t})},vg=()=>(0,i.useContext)(mg),yg=e=>{let{item:t}=e;const{userData:n}=vg();return(0,vr.jsx)("div",{className:"item-content",children:(0,vr.jsxs)("div",{className:"item-header",children:[(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Monto"}),(0,vr.jsx)("div",{className:"item-value",children:t.monto})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Fecha"}),(0,vr.jsx)("div",{className:"item-value",children:t.fecha})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Hora"}),(0,vr.jsx)("div",{className:"item-value",children:t.hora})]}),(0,vr.jsxs)("div",{className:"item-column",children:[(0,vr.jsx)("p",{className:"item-title",children:"Emisor"}),(0,vr.jsx)("div",{className:"item-value",children:t.emisor})]})]})})},_g=un.create({baseURL:fn}),xg=()=>({getHistorialByTipo:async(e,t)=>{const n=await(async(e,t)=>{try{return await _g.get("".concat(fn,"/getByTipo/").concat(e,"/").concat(t))}catch(yo){return console.log(yo),[]}})(e,t);return n},getHistorialAbono:async e=>{const t=await(async e=>{try{return await _g.get("".concat(fn,"/getByAbono/").concat(e))}catch(yo){return console.log(yo),null}})(e);return null!==t&&void 0!==t&&t.status&&200==(null===t||void 0===t?void 0:t.status)?null===t||void 0===t?void 0:t.data:[]}}),bg=[{key:"mantenimiento",finder:Ar.PAGO_MANTENIMIENTO,titulo:"Pago mantenimiento",ic:"bi bi-hammer"},{key:"matching",finder:Ar.BONO_MATCHING,titulo:"Bono matching",ic:"bi bi-arrows-angle-contract"},{key:"fasttrack",finder:Ar.BONO_FAST_TRACK_BRONCE,titulo:"Bono fast track",ic:"bi bi-bar-chart-steps"},{key:"rangoRes",finder:Ar.BONO_RANGO_RESIDUAL,titulo:"Bono rango residual",ic:"bi bi-diamond"},{key:"refDirect",finder:Ar.BONO_REFERENCIA_DIRECTA,titulo:"Bono referencia directa",ic:"bi bi-diamond-fill"}],wg=[{key:"divDiario",finder:Ar.DIVIDENDO_DIARIO,titulo:"Dividendo diario",ic:"bi bi-calendar-check-fill"},{key:"stp",finder:Ar.STARTER_PACK,titulo:"Starter pack",ic:"bi bi-flag"},{key:"retiros",finder:Ar.RETIRO_WALLET_COMISION,titulo:"Retiros wallet",ic:"bi bi-wallet"},{key:"transferInter",finder:Ar.TRANSFERENCIA_INTERNA_WALLET_COM,titulo:"Transferencia interna",ic:"bi bi-wallet"},{key:"interes",finder:Ar.INTERES_COMPUESTO,titulo:"Interes compuesto",ic:"bi bi-piggy-bank"},{key:"facturas",finder:Ar.PAGO_STARTER_PACK_FACTURA,titulo:"Pago factura",ic:"bi bi-credit-card-2-front"}],Sg=()=>{const{getHistorialByTipo:e}=xg(),{userLogged:t}=sr(),[n,r]=(0,i.useState)({mantenimiento:[],matching:[],fasttrack:[],rangoRes:[],refDirect:[],divDiario:[],stp:[],transferInter:[],retiros:[],interes:[],facturas:[]}),s=async(n,i)=>{let s=[];const a=await e(n,t.username);null!==a&&void 0!==a&&a.data&&(s=null===a||void 0===a?void 0:a.data.reverse()),Hi(r,i,s||[])};return(0,vr.jsxs)("section",{className:"seccionDividendos",children:[(0,vr.jsxs)("div",{className:"sec1-div",children:[(0,vr.jsx)("i",{className:"bi bi-graph-up-arrow"}),(0,vr.jsx)("h2",{children:"Benefits"})]}),(0,vr.jsxs)("div",{className:"bonos-section",children:[(0,vr.jsxs)("div",{className:"bonos-header",children:[(0,vr.jsx)("h3",{children:"Bonos"}),(0,vr.jsx)("hr",{})]}),(0,vr.jsx)("div",{className:"sec4-div",children:bg.map((e=>(0,vr.jsx)(Rr,{historial:n[e.key],fetchHistory:()=>s(e.finder,e.key),titulo:e.titulo,ic:e.ic,children:e=>(0,vr.jsx)("tr",{children:(0,vr.jsx)(yg,{item:e})})})))}),(0,vr.jsxs)("div",{className:"bonos-section",children:[(0,vr.jsxs)("div",{className:"bonos-header",children:[(0,vr.jsx)("h3",{children:"Transferencias"}),(0,vr.jsx)("hr",{})]}),wg.map((e=>(0,vr.jsx)(Rr,{historial:n[e.key],fetchHistory:()=>s(e.finder,e.key),titulo:e.titulo,ic:e.ic,children:e=>(0,vr.jsx)("tr",{children:(0,vr.jsx)(Pr,{item:e})})})))]})]})]})},Ng=n.p+"static/media/suit.7b9a511a291a1751c8a1.png",Tg=e=>{const{userLogged:t,getMyNet:n}=sr(),[r,s]=(0,i.useState)(!0),[a,o]=(0,i.useState)(0),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)([]);(0,i.useEffect)((()=>{(async()=>{try{const e=await n(t.username);d(e),console.log(e)}catch(yo){console.error("Error al obtener los datos:",yo)}finally{s(!1)}})()}),[]);const h=(e,t,n)=>{const i=[];let r=!1;if(t>7)return;const s=e.filter((e=>e.referido==n));if(0!==s.length){s.length<1&&(r=!0);for(const n of s)i.push((0,vr.jsxs)("li",{children:[(0,vr.jsxs)("a",{href:"#",children:[(0,vr.jsx)("img",{src:Ng,alt:"user"}),(0,vr.jsx)("span",{children:n.username})]}),(0,vr.jsx)("ul",{className:r?"final":"",children:h(e,t+1,n.username)})]},n.id));return i}};return(0,vr.jsxs)("section",{className:"seccionRed",children:[(0,vr.jsx)("div",{className:"divTitulo",children:(0,vr.jsx)("h2",{children:"Genealogy"})}),(0,vr.jsx)("div",{className:"redComponent",children:r?(0,vr.jsx)("div",{class:"spinner"}):(0,vr.jsx)("div",{class:"row",children:(0,vr.jsx)("div",{class:"tree",children:(0,vr.jsx)("ul",{children:(0,vr.jsxs)("li",{children:[" ",(0,vr.jsxs)("a",{href:"#",children:[" ",(0,vr.jsx)("img",{src:Ng,alt:"user"}),(0,vr.jsx)("span",{children:t.username})]}),(0,vr.jsx)("ul",{children:h(u,1,t.username)})]})})})})})]})},Eg=()=>{const{userLogged:e,getMyNet:t}=sr(),[n,r]=(0,i.useState)([!1,!1,!1,!1,!1,!1,!1]),[s,a]=(0,i.useState)([]);(0,i.useEffect)((()=>{(async()=>{try{const n=await t(e.username);a(n)}catch(yo){console.error("Error al obtener los datos:",yo)}})()}),[]);const o=(e,t,n)=>{let i=[],r=0;const s=(t,n,a)=>{if(n>a)return;const o=e.filter((e=>e.referido==t));for(let e of o)n===a&&(i.push(e),r+=Number(e.staterpack)),s(e.username,n+1,a)};return s(t,1,n),{usersInLevel:i,sumaTotal:r}};return(0,vr.jsxs)("section",{className:"seccionMyRed",children:[(0,vr.jsx)("div",{className:"divTitulo",children:(0,vr.jsx)("h2",{children:"My net"})}),(0,vr.jsx)("div",{className:"nivel",children:(()=>{const t=[];for(let i=0;i<7;i++){let{usersInLevel:a,sumaTotal:l}=o(s,e.username,i+1);t.push((0,vr.jsxs)("div",{className:"nivelCard",onClick:()=>{return e=i+1,void r((t=>{const n=[...t];return n[e]=!n[e],n}));var e},children:[(0,vr.jsxs)("div",{className:"nivelCard0-1",children:[(0,vr.jsxs)("div",{className:"nivelCard1",children:[(0,vr.jsx)("div",{className:"nivelCard-2",children:(0,vr.jsx)("span",{children:i+1})}),(0,vr.jsxs)("div",{className:"nivelCard-3",children:[(0,vr.jsxs)("span",{className:"sp1",children:["Nivel ",i+1]}),(0,vr.jsxs)("span",{className:"sp2",children:[a?a.length:0," Users"]})]})]}),(0,vr.jsxs)("div",{className:"nivelCard2",children:[(0,vr.jsx)("span",{className:"sp2",children:" Capital:"}),(0,vr.jsxs)("span",{className:"sp1",children:[(isNaN(l)||null==l?0:l).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]}),(0,vr.jsx)("button",{className:"btnDesTab",type:"button","aria-controls":"radix-:r4:","aria-expanded":"false","data-state":"closed",children:(0,vr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:(0,vr.jsx)("path",{d:"m6 9 6 6 6-6"})})})]}),(0,vr.jsx)("div",{className:"nivelCard0-2",children:n[i+1]&&(0,vr.jsx)("div",{className:"containTable",children:(0,vr.jsxs)("table",{children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{children:"User"}),(0,vr.jsx)("th",{children:"Name"}),(0,vr.jsx)("th",{children:"registration date"}),(0,vr.jsx)("th",{children:"Sponsor"}),(0,vr.jsx)("th",{children:"Capital"}),(0,vr.jsx)("th",{children:"Rank"})]})}),(0,vr.jsx)("tbody",{children:a&&a.length>0?a.map((e=>{var t,n,i,r;return(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.username}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:null!==(t=e.nombres)&&void 0!==t&&t.trim()||null!==(n=e.apellidos)&&void 0!==n&&n.trim()?"".concat(null!==(i=e.nombres)&&void 0!==i?i:""," ").concat(null!==(r=e.apellidos)&&void 0!==r?r:"").trim():'" "'}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.fecha_ingreso}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.referido}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.staterpack.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:mr(e.rango).rango})]},e.userName)})):(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{colSpan:"6",className:"p-4 align-middle",children:"No users in this level"})})})]})})})]},i))}return t})()})]})},Cg=e=>(0,vr.jsxs)("div",{className:e.block?"blockTextInput":"TextInput",children:[(0,vr.jsx)("p",{className:"textoM2",children:e.ti}),(0,vr.jsx)("input",{type:"text",value:e.value,onChange:t=>e.setValue(t.target.value),readOnly:e.block,placeholder:e.pl})]}),Mg=e=>{let{userData:t}=e;const[n,r]=(0,i.useState)(0),[s,a]=(0,i.useState)([]),o=(0,rr.useLocation)();return(0,i.useEffect)((()=>{"/Dashboard/E-comerce"===o.pathname&&(async()=>{try{const e=Hh(Eh(Kh(Qa),"history"),Fh("userName"),Bh(t.userName)),n=await Rh(e);if(n.exists()){const e=Object.values(n.val()).filter((e=>"Purchase commission"===e.concepto)).reverse();a(e)}else console.log("No data available")}catch(yo){console.log(yo)}})()}),[o.pathname,t.userName]),(0,vr.jsxs)("section",{className:"Wallet-ec",children:[(0,vr.jsx)("p",{className:"titulos",children:"Current balance"}),(0,vr.jsx)("div",{className:"wallet",children:(0,vr.jsxs)("div",{children:[(0,vr.jsx)("img",{src:br,alt:"ustd_logo"}),(0,vr.jsxs)("p",{children:[(t.walletEc||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]})}),(0,vr.jsx)("p",{className:"titulo g",children:"transaction history"}),(0,vr.jsx)("div",{className:"historial",children:(0,vr.jsxs)("table",{children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{children:"Date"}),(0,vr.jsx)("th",{children:"Hour"}),(0,vr.jsx)("th",{children:"Amount"}),(0,vr.jsx)("th",{children:"Concepto"}),(0,vr.jsx)("th",{children:"Emisor"})]})}),(0,vr.jsx)("tbody",{children:s&&s.length>0?s.map((e=>(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.date}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.hora}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.cantidad}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.concepto}),(0,vr.jsx)("td",{className:"p-4 align-middle",children:e.emisor})]},e.userName))):(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{colSpan:"6",className:"p-4 align-middle",children:"No history"})})})]})})]})};const Ig=class{constructor(e,t,n,i,r,s,a){this.userName=e,this.firebaseKey=t,this.cantidad=n,this.date=i,this.concepto=r,this.hora=s,this.emisor=a}setDefaultValues(){this.userName="",this.firebaseKey="",this.cantidad=0,this.date="",this.concepto="",this.hora="",this.emisor=""}};const Ag=class{constructor(){this.getCurrentUser=()=>dg().currentUser,this.getUserDataR=async()=>{const e=Kh(Qa),t=this.getCurrentUser().email,n=Hh(Eh(e,"users/"),Fh("email"),Bh(t));if(!t)return;const i=await Rh(n);if(i.exists()){const e=Object.values(i.val());if(e.length>0)return e[0];alert("No se encontr\xf3 el usuario")}else alert("No se encontraron datos en la base de datos")},this.fetchUserData=async()=>{try{const e=Kh(Qa),t=this.getCurrentUser().email;return Rh(Hh(Eh(e,"users/"),Fh("email"),Bh(t))).then((e=>{if(e.exists()){const t=Object.values(e.val());if(t.length>0)return t[0];throw new Error("No se encontr\xf3 el usuario")}throw new Error("No se encontraron datos en la base de datos")})).catch((e=>{throw console.error("Error obteniendo los datos:",e),e}))}catch(yo){console.log(yo)}},this.fetchUserDataByName=async e=>Rh(Hh(Eh(Kh(Qa),"users/"),Fh("email"),Bh(e))).then((e=>{if(e.exists()){const t=Object.values(e.val());if(t.length>0)return t[0];throw new Error("No se encontr\xf3 el usuario")}return null})).catch((e=>{throw console.error("Error obteniendo los datos:",e),e})),this.fetchHistoryByConcept=async(e,t)=>{try{const n=Hh(Eh(Kh(Qa),"history/"),Fh("concepto"),Bh(e)),i=await Rh(n);if(i.exists()){const e=Object.values(i.val());return Object.entries(e).filter((e=>{let[n,i]=e;return i.userName=t})).map((e=>{let[t,n]=e;return{id:t,...n}}))}return console.log("No se encontr\xf3 un usuario con ese nombre."),null}catch(yo){return console.error("Error al obtener el usuario:",yo),null}},this.fetchHistorialRetirosInternos=async e=>{try{const t=Hh(Eh(Kh(Qa),"history/"),Fh("concepto"),Bh("Internal transfer")),n=await Rh(t);if(n.exists()){const t=Object.values(n.val());return Object.entries(t).filter((t=>{let[n,i]=t;return i.userName===e||i.emisor===e})).map((e=>{let[t,n]=e;return{id:t,...n}}))}return console.log("No se encontr\xf3 un usuario con ese nombre."),null}catch(yo){return console.error("Error al obtener el usuario:",yo),null}},this.getUserDataByName=async e=>{try{const t=Hh(Eh(Kh(Qa),"users/"),Fh("userName"),Bh(e)),n=await Rh(t);if(n.exists()){return Object.values(n.val())[0]}return console.log("No se encontr\xf3 un usuario con ese nombre."),null}catch(yo){return console.error("Error al obtener el usuario:",yo),null}},this.editAnyUser=async e=>{try{const t=Eh(Kh(Qa),"users/".concat(e.firebaseKey));await Ah(t,e)}catch(yo){console.error("Error",yo)}},this.saveInHistory=async(e,t,n,i,r,s)=>{const a=new Ig;a.setDefaultValues();const o=Mh(Eh(Kh(Qa),"history/"));a.userName=e,a.cantidad=t,a.concepto=n,a.firebaseKey=o.key,a.hora=this.obtenerHora(),a.date=this.obtenerFecha(),a.emisor=i,a.state=0|r,a.abono=s;try{await Ah(o,a)}catch(yo){console.log(yo)}},this.saveHistory=async e=>{const t=Kh(Qa),n=Mh(Ch(Eh(t),"history")).key;e.firebaseKey=n;try{await Ah(Eh(t,"history/".concat(n)),e)}catch(yo){console.error("Error saving history:",yo)}},this.determinarPaquete=e=>{switch(!0){case e>99&&e<500:return"BUILDER";case e>499&&e<2500:return"BRONZE";case e>2499&&e<5e3:return"SILVER";case e>4999&&e<1e4:return"GOLD";case e>=1e4:return"PLATINUM";default:return"No pack"}}}isNullOrEmpty(e){return null===e||void 0===e||""===e||" "===e}obtenerFecha(){return(new Date).toLocaleString("es-US",{timeZone:"America/New_York",day:"2-digit",month:"2-digit",year:"numeric"})}obtenerHora(){return(new Date).toLocaleString("es-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit"})}obtenerFechaHoraActual(){const e=new Date,t=new Date(e.getTime()+6e4*e.getTimezoneOffset()+-18e6),n=t.getHours(),i=n>=12?"PM":"AM",r=n%12||12,s=t.getMinutes().toString().padStart(2,"0");return{date:t.toLocaleDateString("en-US"),hora:"".concat(r,":").concat(s," ").concat(i)}}};class Rg{constructor(e,t,n,i,r){this.estado=e,this.numeroOrden=this.generateUniqueId(),this.totalPagar=t,this.numeroRastreo=n,this.productos=i,this.owner=r}generateUniqueId(){const e=Date.now(),t=Math.floor(9e9*Math.random())+1e9;return(e.toString()+t.toString()).substring(0,10)}getCurrentDateDMY(){const e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return"".concat(t,"-").concat(n,"-").concat(i)}async creaOrden(){try{const e=Eh(Kh(Qa),"ordenes/"),t={fecha:this.getCurrentDateDMY(),estado:this.estado,numeroOrden:this.numeroOrden,totalPagar:this.totalPagar,numeroRastreo:this.numeroRastreo,productos:this.productos,owner:this.owner};await Mh(e,t)}catch(e){console.error("Error al agregar la orden: ",e)}}async saveOrden(e,t){try{const n=Eh(Kh(Qa),"ordenes/".concat(e));await Ah(n,t)}catch(n){console.error("Error al agregar la orden: ",n)}}async getOrdenes(e){try{const t=Kh(Qa),n=Hh(Eh(t,"ordenes/"),Fh("owner"),Bh(e)),i=await Rh(n);if(i.exists()){const e=i.val();return Object.keys(e).map((t=>({id:t,...e[t]})))}return[]}catch(yo){return console.error("Error al obtener las \xf3rdenes del usuario:",yo),[]}}async getAllOrdenes(){try{const e=Kh(Qa),t=Hh(Eh(e,"ordenes/")),n=await Rh(t);if(n.exists()){const e=n.val();return Object.keys(e).map((t=>({id:t,...e[t]})))}return[]}catch(yo){return console.error("Error al obtener las \xf3rdenes del usuario:",yo),[]}}}const Pg=e=>{let{userName:t}=e;const[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{o()}),[]);const o=()=>{(new Rg).getOrdenes(t).then((e=>{r(e),a(!1)}))};return(0,vr.jsx)("section",{className:"Ordenes-ec",children:(0,vr.jsx)("div",{className:"sec0-oec",children:(0,vr.jsxs)("table",{children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{children:"Date"}),(0,vr.jsx)("th",{children:"Order number"}),(0,vr.jsx)("th",{children:"Total"}),(0,vr.jsx)("th",{children:"State"})]})}),(0,vr.jsx)("tbody",{children:s?(0,vr.jsx)("div",{className:"spinner"}):n?n.map((e=>(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{children:e.fecha}),(0,vr.jsx)("td",{children:e.numeroOrden}),(0,vr.jsxs)("td",{children:[e.totalPagar," USDT"]}),(0,vr.jsx)("td",{children:e.estado})]},e.userName))):(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{colSpan:"6",children:"No orders"})})})]})})})},kg=e=>{let{setVisible:t,visible:n,texto:r}=e;const[s,a]=(0,i.useState)(3);(0,i.useEffect)((()=>{let e;return n&&s>0?e=setInterval((()=>{a((e=>e-1))}),1e3):0===s&&(o(),t(!1)),()=>clearInterval(e)}),[n,s]);const o=()=>{a(3),t(!1)};return(0,vr.jsxs)("div",{class:n?"success error":"none",children:[(0,vr.jsx)("div",{class:"error__icon",children:(0,vr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",viewBox:"0 0 24 24",height:"24",fill:"none",children:(0,vr.jsx)("path",{fill:"#393a37",d:"m13 13h-2v-6h2zm0 4h-2v-2h2zm-\r 1-15c-1.3132 0-2.61358.25866-3.82683.7612-1.21326.50255-2.31565 1.23915-3.24424 2.16773-1.87536 1.87537-2.92893 4.41891-2.92893 7.07107 0 2.6522 \r 1.05357 5.1957 2.92893 7.0711.92859.9286 2.03098 1.6651 3.24424 2.1677 1.21325.5025 2.51363.7612 3.82683.7612 2.6522 0 5.1957-1.0536 7.0711-2.9289 \r 1.8753-1.8754 2.9289-4.4189 2.9289-7.0711 0-1.3132-.2587-2.61358-.7612-3.82683-.5026-1.21326-1.2391-2.31565-2.1677-3.24424-.9286-.92858-2.031-1.66518-\r 3.2443-2.16773-1.2132-.50254-2.5136-.7612-3.8268-.7612z"})})}),(0,vr.jsx)("div",{class:"error__title",children:r})]})},Og="vertex",Lg="none",Dg="frame",jg="render",Ug="object",zg=["x","y","z","w"],Fg="163",Vg=0,Bg=1,Hg=100,Wg=0,qg=0,Gg=1,Yg=2,Xg=3,Kg=4,Jg=6,$g=1e3,Qg=1001,Zg=1002,ev=1003,tv=1006,nv=1008,iv=1009,rv=1014,sv=1015,av=1016,ov=1020,lv=1023,cv=1026,uv=1027,dv=2300,hv=2301,pv=2302,fv=2400,mv=2401,gv=2402,vv="",yv="srgb",_v="srgb-linear",xv="display-p3",bv="display-p3-linear",wv="linear",Sv="srgb",Nv="rec709",Tv="p3",Ev=7680,Cv=35044,Mv=35048,Iv=2e3,Av=2001;class Rv{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const Pv=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kv=1234567;const Ov=Math.PI/180,Lv=180/Math.PI;function Dv(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Pv[255&e]+Pv[e>>8&255]+Pv[e>>16&255]+Pv[e>>24&255]+"-"+Pv[255&t]+Pv[t>>8&255]+"-"+Pv[t>>16&15|64]+Pv[t>>24&255]+"-"+Pv[63&n|128]+Pv[n>>8&255]+"-"+Pv[n>>16&255]+Pv[n>>24&255]+Pv[255&i]+Pv[i>>8&255]+Pv[i>>16&255]+Pv[i>>24&255]).toLowerCase()}function jv(e,t,n){return Math.max(t,Math.min(n,e))}function Uv(e,t){return(e%t+t)%t}function zv(e,t,n){return(1-n)*e+n*t}function Fv(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Vv(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Bv={DEG2RAD:Ov,RAD2DEG:Lv,generateUUID:Dv,clamp:jv,euclideanModulo:Uv,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:zv,damp:function(e,t,n,i){return zv(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Uv(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(kv=e);let t=kv+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ov},radToDeg:function(e){return e*Lv},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+i)/2),u=a((t+i)/2),d=s((t-i)/2),h=a((t-i)/2),p=s((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Vv,denormalize:Fv};class Hv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Hv.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jv(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wv{constructor(e,t,n,i,r,s,a,o,l){Wv.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l)}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],x=i[2],b=i[5],w=i[8];return r[0]=s*f+a*v+o*x,r[3]=s*m+a*y+o*b,r[6]=s*g+a*_+o*w,r[1]=l*f+c*v+u*x,r[4]=l*m+c*y+u*b,r[7]=l*g+c*_+u*w,r[2]=d*f+h*v+p*x,r[5]=d*m+h*y+p*b,r[8]=d*g+h*_+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,d=a*o-c*r,h=l*r-s*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*s)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-a*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(qv.makeScale(e,t)),this}rotate(e){return this.premultiply(qv.makeRotation(-e)),this}translate(e,t){return this.premultiply(qv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const qv=new Wv;function Gv(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Yv(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const Xv={};function Kv(e){e in Xv||(Xv[e]=!0,console.warn(e))}const Jv=(new Wv).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),$v=(new Wv).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qv={[_v]:{transfer:wv,primaries:Nv,toReference:e=>e,fromReference:e=>e},[yv]:{transfer:Sv,primaries:Nv,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[bv]:{transfer:wv,primaries:Tv,toReference:e=>e.applyMatrix3($v),fromReference:e=>e.applyMatrix3(Jv)},[xv]:{transfer:Sv,primaries:Tv,toReference:e=>e.convertSRGBToLinear().applyMatrix3($v),fromReference:e=>e.applyMatrix3(Jv).convertLinearToSRGB()}},Zv=new Set([_v,bv]),ey={enabled:!0,_workingColorSpace:_v,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Zv.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Qv[t].toReference;return(0,Qv[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Qv[e].primaries},getTransfer:function(e){return e===vv?wv:Qv[e].transfer}};function ty(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ny(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let iy;class ry{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===iy&&(iy=Yv("canvas")),iy.width=e.width,iy.height=e.height;const n=iy.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=iy}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Yv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*ty(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*ty(t[e]/255)):t[e]=ty(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sy=0;class ay{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:sy++}),this.uuid=Dv(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(oy(i[t].image)):e.push(oy(i[t]))}else e=oy(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function oy(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?ry.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ly=0;class cy extends Rv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cy.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cy.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qg,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qg,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tv,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nv,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lv,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:iv,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:cy.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:vv;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ly++}),this.uuid=Dv(),this.name="",this.source=new ay(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Hv(0,0),this.repeat=new Hv(1,1),this.center=new Hv(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wv,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $g:e.x=e.x-Math.floor(e.x);break;case Qg:e.x=e.x<0?0:1;break;case Zg:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case $g:e.y=e.y-Math.floor(e.y);break;case Qg:e.y=e.y<0?0:1;break;case Zg:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}cy.DEFAULT_IMAGE=null,cy.DEFAULT_MAPPING=300,cy.DEFAULT_ANISOTROPY=1;class uy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;uy.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+d)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,y=(c+d)/4,_=(u+f)/4,x=(p+m)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=x/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=_/r,i=x/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dy extends Rv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new uy(0,0,e,t),this.scissorTest=!1,this.viewport=new uy(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:tv,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},n);const r=new cy(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let a=0;a<s;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ay(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hy extends cy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ev,this.minFilter=ev,this.wrapR=Qg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class py{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[s+0],h=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-a;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],d=r[s+1],h=r[s+2],p=r[s+3];return e[t]=a*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-o*u,e[t+3]=c*p-a*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jv(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class fy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;fy.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gy.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gy.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=2*(s*i-a*n),c=2*(a*t-r*i),u=2*(r*n-s*t);return this.x=t+o*l+s*u-a*c,this.y=n+o*c+a*l-r*u,this.z=i+o*u+r*c-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return my.copy(this).projectOnVector(e),this.sub(my)}reflect(e){return this.sub(my.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jv(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const my=new fy,gy=new py;class vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fy(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fy(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_y.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_y.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_y.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,_y):_y.fromBufferAttribute(i,t),_y.applyMatrix4(e.matrixWorld),this.expandByPoint(_y);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),xy.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),xy.copy(n.boundingBox)),xy.applyMatrix4(e.matrixWorld),this.union(xy)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_y),_y.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cy),My.subVectors(this.max,Cy),by.subVectors(e.a,Cy),wy.subVectors(e.b,Cy),Sy.subVectors(e.c,Cy),Ny.subVectors(wy,by),Ty.subVectors(Sy,wy),Ey.subVectors(by,Sy);let t=[0,-Ny.z,Ny.y,0,-Ty.z,Ty.y,0,-Ey.z,Ey.y,Ny.z,0,-Ny.x,Ty.z,0,-Ty.x,Ey.z,0,-Ey.x,-Ny.y,Ny.x,0,-Ty.y,Ty.x,0,-Ey.y,Ey.x,0];return!!Ry(t,by,wy,Sy,My)&&(t=[1,0,0,0,1,0,0,0,1],!!Ry(t,by,wy,Sy,My)&&(Iy.crossVectors(Ny,Ty),t=[Iy.x,Iy.y,Iy.z],Ry(t,by,wy,Sy,My)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_y).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(_y).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(yy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yy)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yy=[new fy,new fy,new fy,new fy,new fy,new fy,new fy,new fy],_y=new fy,xy=new vy,by=new fy,wy=new fy,Sy=new fy,Ny=new fy,Ty=new fy,Ey=new fy,Cy=new fy,My=new fy,Iy=new fy,Ay=new fy;function Ry(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){Ay.fromArray(e,s);const a=r.x*Math.abs(Ay.x)+r.y*Math.abs(Ay.y)+r.z*Math.abs(Ay.z),o=t.dot(Ay),l=n.dot(Ay),c=i.dot(Ay);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Py=new vy,ky=new fy,Oy=new fy;class Ly{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Py.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ky.subVectors(e,this.center);const t=ky.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ky,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Oy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ky.copy(e.center).add(Oy)),this.expandByPoint(ky.copy(e.center).sub(Oy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Dy=new fy,jy=new fy,Uy=new fy,zy=new fy,Fy=new fy,Vy=new fy,By=new fy;class Hy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fy(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dy)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Dy.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Dy.copy(this.origin).addScaledVector(this.direction,t),Dy.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){jy.copy(e).add(t).multiplyScalar(.5),Uy.copy(t).sub(e).normalize(),zy.copy(this.origin).sub(jy);const r=.5*e.distanceTo(t),s=-this.direction.dot(Uy),a=zy.dot(this.direction),o=-zy.dot(Uy),l=zy.lengthSq(),c=Math.abs(1-s*s);let u,d,h,p;if(c>0)if(u=s*o-a,d=s*a-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+s*d+2*a)+d*(s*u+d+2*o)+l}else d=r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-s*r+a)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(s*r+a)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=s>0?-r:r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(jy).addScaledVector(Uy,d),h}intersectSphere(e,t){Dy.subVectors(e.center,this.origin);const n=Dy.dot(this.direction),i=Dy.dot(Dy)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||a>i?null:((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Dy)}intersectTriangle(e,t,n,i,r){Fy.subVectors(t,e),Vy.subVectors(n,e),By.crossVectors(Fy,Vy);let s,a=this.direction.dot(By);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}zy.subVectors(this.origin,e);const o=s*this.direction.dot(Vy.crossVectors(zy,Vy));if(o<0)return null;const l=s*this.direction.dot(Fy.cross(zy));if(l<0)return null;if(o+l>a)return null;const c=-s*zy.dot(By);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Wy{constructor(e,t,n,i,r,s,a,o,l,c,u,d,h,p,f,m){Wy.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l,c,u,d,h,p,f,m)}set(e,t,n,i,r,s,a,o,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Wy).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/qy.setFromMatrixColumn(e,0).length(),r=1/qy.setFromMatrixColumn(e,1).length(),s=1/qy.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Yy,e,Xy)}lookAt(e,t,n){const i=this.elements;return $y.subVectors(e,t),0===$y.lengthSq()&&($y.z=1),$y.normalize(),Ky.crossVectors(n,$y),0===Ky.lengthSq()&&(1===Math.abs(n.z)?$y.x+=1e-4:$y.z+=1e-4,$y.normalize(),Ky.crossVectors(n,$y)),Ky.normalize(),Jy.crossVectors($y,Ky),i[0]=Ky.x,i[4]=Jy.x,i[8]=$y.x,i[1]=Ky.y,i[5]=Jy.y,i[9]=$y.y,i[2]=Ky.z,i[6]=Jy.z,i[10]=$y.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=n[15],b=i[0],w=i[4],S=i[8],N=i[12],T=i[1],E=i[5],C=i[9],M=i[13],I=i[2],A=i[6],R=i[10],P=i[14],k=i[3],O=i[7],L=i[11],D=i[15];return r[0]=s*b+a*T+o*I+l*k,r[4]=s*w+a*E+o*A+l*O,r[8]=s*S+a*C+o*R+l*L,r[12]=s*N+a*M+o*P+l*D,r[1]=c*b+u*T+d*I+h*k,r[5]=c*w+u*E+d*A+h*O,r[9]=c*S+u*C+d*R+h*L,r[13]=c*N+u*M+d*P+h*D,r[2]=p*b+f*T+m*I+g*k,r[6]=p*w+f*E+m*A+g*O,r[10]=p*S+f*C+m*R+g*L,r[14]=p*N+f*M+m*P+g*D,r[3]=v*b+y*T+_*I+x*k,r[7]=v*w+y*E+_*A+x*O,r[11]=v*S+y*C+_*R+x*L,r[15]=v*N+y*M+_*P+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*a*d+n*l*d+i*a*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*s*d-i*s*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*h-r*s*u+n*s*h+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*d+i*s*u-n*s*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*o*h-a*m*h-u*o*g+a*d*g,y=p*d*l-c*m*l-p*o*h+s*m*h+c*o*g-s*d*g,_=c*f*l-p*u*l+p*a*h-s*f*h-c*a*g+s*u*g,x=p*u*o-c*f*o-p*a*d+s*f*d+c*a*m-s*u*m,b=t*v+n*y+i*_+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*g-n*d*g)*w,e[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*w,e[3]=(u*o*r-a*d*r-u*i*l+n*d*l+a*i*h-n*o*h)*w,e[4]=y*w,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*g+t*d*g)*w,e[6]=(p*o*r-s*m*r-p*i*l+t*m*l+s*i*g-t*o*g)*w,e[7]=(s*d*r-c*o*r+c*i*l-t*d*l-s*i*h+t*o*h)*w,e[8]=_*w,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*g-t*u*g)*w,e[10]=(s*f*r-p*a*r+p*n*l-t*f*l-s*n*g+t*a*g)*w,e[11]=(c*a*r-s*u*r-c*n*l+t*u*l+s*n*h-t*a*h)*w,e[12]=x*w,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*w,e[14]=(p*a*i-s*f*i-p*n*o+t*f*o+s*n*m-t*a*m)*w,e[15]=(s*u*i-c*a*i+c*n*o-t*u*o-s*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,d=r*l,h=r*c,p=r*u,f=s*c,m=s*u,g=a*u,v=o*l,y=o*c,_=o*u,x=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*x,i[1]=(h+_)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(h-_)*b,i[5]=(1-(d+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=qy.set(i[0],i[1],i[2]).length();const s=qy.set(i[4],i[5],i[6]).length(),a=qy.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Gy.copy(this);const o=1/r,l=1/s,c=1/a;return Gy.elements[0]*=o,Gy.elements[1]*=o,Gy.elements[2]*=o,Gy.elements[4]*=l,Gy.elements[5]*=l,Gy.elements[6]*=l,Gy.elements[8]*=c,Gy.elements[9]*=c,Gy.elements[10]*=c,t.setFromRotationMatrix(Gy),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Iv;const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(a===Iv)h=-(s+r)/(s-r),p=-2*s*r/(s-r);else{if(a!==Av)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-s/(s-r),p=-s*r/(s-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Iv;const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(s-r),d=(t+e)*l,h=(n+i)*c;let p,f;if(a===Iv)p=(s+r)*u,f=-2*u;else{if(a!==Av)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const qy=new fy,Gy=new Wy,Yy=new fy(0,0,0),Xy=new fy(1,1,1),Ky=new fy,Jy=new fy,$y=new fy,Qy=new Wy,Zy=new py;class e_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e_.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(jv(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-jv(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(jv(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-jv(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(jv(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-jv(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Qy.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qy,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Zy.setFromEuler(this),this.setFromQuaternion(Zy,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}e_.DEFAULT_ORDER="XYZ";class t_{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let n_=0;const i_=new fy,r_=new py,s_=new Wy,a_=new fy,o_=new fy,l_=new fy,c_=new py,u_=new fy(1,0,0),d_=new fy(0,1,0),h_=new fy(0,0,1),p_={type:"added"},f_={type:"removed"},m_={type:"childadded",child:null},g_={type:"childremoved",child:null};class v_ extends Rv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:n_++}),this.uuid=Dv(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v_.DEFAULT_UP.clone();const e=new fy,t=new e_,n=new py,i=new fy(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Wy},normalMatrix:{value:new Wv}}),this.matrix=new Wy,this.matrixWorld=new Wy,this.matrixAutoUpdate=v_.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=v_.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new t_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return r_.setFromAxisAngle(e,t),this.quaternion.multiply(r_),this}rotateOnWorldAxis(e,t){return r_.setFromAxisAngle(e,t),this.quaternion.premultiply(r_),this}rotateX(e){return this.rotateOnAxis(u_,e)}rotateY(e){return this.rotateOnAxis(d_,e)}rotateZ(e){return this.rotateOnAxis(h_,e)}translateOnAxis(e,t){return i_.copy(e).applyQuaternion(this.quaternion),this.position.add(i_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(u_,e)}translateY(e){return this.translateOnAxis(d_,e)}translateZ(e){return this.translateOnAxis(h_,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(s_.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?a_.copy(e):a_.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),o_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?s_.lookAt(o_,a_,this.up):s_.lookAt(a_,o_,this.up),this.quaternion.setFromRotationMatrix(s_),i&&(s_.extractRotation(i.matrixWorld),r_.setFromRotationMatrix(s_),this.quaternion.premultiply(r_.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(p_),m_.child=e,this.dispatchEvent(m_),m_.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(f_),g_.child=e,this.dispatchEvent(g_),g_.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),s_.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),s_.multiply(e.parent.matrixWorld)),e.applyMatrix4(s_),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(p_),m_.child=e,this.dispatchEvent(m_),m_.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(o_,e,l_),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(o_,c_,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}v_.DEFAULT_UP=new fy(0,1,0),v_.DEFAULT_MATRIX_AUTO_UPDATE=!0,v_.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const y_=new fy,__=new fy,x_=new fy,b_=new fy,w_=new fy,S_=new fy,N_=new fy,T_=new fy,E_=new fy,C_=new fy;class M_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fy,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new fy;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),y_.subVectors(e,t),i.cross(y_);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){y_.subVectors(i,t),__.subVectors(n,t),x_.subVectors(e,t);const s=y_.dot(y_),a=y_.dot(__),o=y_.dot(x_),l=__.dot(__),c=__.dot(x_),u=s*l-a*a;if(0===u)return r.set(0,0,0),null;const d=1/u,h=(l*o-a*c)*d,p=(s*c-a*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,b_)&&(b_.x>=0&&b_.y>=0&&b_.x+b_.y<=1)}static getInterpolation(e,t,n,i,r,s,a,o){return null===this.getBarycoord(e,t,n,i,b_)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,b_.x),o.addScaledVector(s,b_.y),o.addScaledVector(a,b_.z),o)}static isFrontFacing(e,t,n,i){return y_.subVectors(n,t),__.subVectors(e,t),y_.cross(__).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return y_.subVectors(this.c,this.b),__.subVectors(this.a,this.b),.5*y_.cross(__).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return M_.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return M_.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return M_.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return M_.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return M_.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;w_.subVectors(i,n),S_.subVectors(r,n),T_.subVectors(e,n);const o=w_.dot(T_),l=S_.dot(T_);if(o<=0&&l<=0)return t.copy(n);E_.subVectors(e,i);const c=w_.dot(E_),u=S_.dot(E_);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(w_,s);C_.subVectors(e,r);const h=w_.dot(C_),p=S_.dot(C_);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(S_,a);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return N_.subVectors(r,i),a=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(N_,a);const g=1/(m+f+d);return s=f*g,a=d*g,t.copy(n).addScaledVector(w_,s).addScaledVector(S_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const I_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},A_={h:0,s:0,l:0},R_={h:0,s:0,l:0};function P_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class k_{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yv;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ey.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ey.workingColorSpace;return this.r=e,this.g=t,this.b=n,ey.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ey.workingColorSpace;if(e=Uv(e,1),t=jv(t,0,1),n=jv(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=P_(r,i,e+1/3),this.g=P_(r,i,e),this.b=P_(r,i,e-1/3)}return ey.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yv;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=t[1],a=t[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yv;const n=I_[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ty(e.r),this.g=ty(e.g),this.b=ty(e.b),this}copyLinearToSRGB(e){return this.r=ny(e.r),this.g=ny(e.g),this.b=ny(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yv;return ey.fromWorkingColorSpace(O_.copy(this),e),65536*Math.round(jv(255*O_.r,0,255))+256*Math.round(jv(255*O_.g,0,255))+Math.round(jv(255*O_.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yv;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ey.workingColorSpace;ey.fromWorkingColorSpace(O_.copy(this),t);const n=O_.r,i=O_.g,r=O_.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ey.workingColorSpace;return ey.fromWorkingColorSpace(O_.copy(this),t),e.r=O_.r,e.g=O_.g,e.b=O_.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yv;ey.fromWorkingColorSpace(O_.copy(this),e);const t=O_.r,n=O_.g,i=O_.b;return e!==yv?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(A_),this.setHSL(A_.h+e,A_.s+t,A_.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(A_),e.getHSL(R_);const n=zv(A_.h,R_.h,t),i=zv(A_.s,R_.s,t),r=zv(A_.l,R_.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const O_=new k_;k_.NAMES=I_;let L_=0;class D_ extends Rv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:L_++}),this.uuid=Dv(),this.name="",this.type="Material",this.blending=1,this.side=Vg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Hg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new k_(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ev,this.stencilZFail=Ev,this.stencilZPass=Ev,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==Vg&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==Hg&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ev&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ev&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ev&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class j_ extends D_{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new k_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new e_,this.combine=Wg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const U_=new fy,z_=new Hv;class F_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Cv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=sv,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return Kv("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)z_.fromBufferAttribute(this,t),z_.applyMatrix3(e),this.setXY(t,z_.x,z_.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)U_.fromBufferAttribute(this,t),U_.applyMatrix3(e),this.setXYZ(t,U_.x,U_.y,U_.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)U_.fromBufferAttribute(this,t),U_.applyMatrix4(e),this.setXYZ(t,U_.x,U_.y,U_.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)U_.fromBufferAttribute(this,t),U_.applyNormalMatrix(e),this.setXYZ(t,U_.x,U_.y,U_.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)U_.fromBufferAttribute(this,t),U_.transformDirection(e),this.setXYZ(t,U_.x,U_.y,U_.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Fv(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vv(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fv(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vv(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fv(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vv(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fv(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vv(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fv(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vv(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array),i=Vv(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array),i=Vv(i,this.array),r=Vv(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Cv&&(e.usage=this.usage),e}}class V_ extends F_{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class B_ extends F_{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class H_ extends F_{constructor(e,t,n){super(new Float32Array(e),t,n)}}let W_=0;const q_=new Wy,G_=new v_,Y_=new fy,X_=new vy,K_=new vy,J_=new fy;class $_ extends Rv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:W_++}),this.uuid=Dv(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Gv(e)?B_:V_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Wv).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return q_.makeRotationFromQuaternion(e),this.applyMatrix4(q_),this}rotateX(e){return q_.makeRotationX(e),this.applyMatrix4(q_),this}rotateY(e){return q_.makeRotationY(e),this.applyMatrix4(q_),this}rotateZ(e){return q_.makeRotationZ(e),this.applyMatrix4(q_),this}translate(e,t,n){return q_.makeTranslation(e,t,n),this.applyMatrix4(q_),this}scale(e,t,n){return q_.makeScale(e,t,n),this.applyMatrix4(q_),this}lookAt(e){return G_.lookAt(e),G_.updateMatrix(),this.applyMatrix4(G_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Y_).negate(),this.translate(Y_.x,Y_.y,Y_.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new H_(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new vy);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new fy(-1/0,-1/0,-1/0),new fy(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];X_.setFromBufferAttribute(e),this.morphTargetsRelative?(J_.addVectors(this.boundingBox.min,X_.min),this.boundingBox.expandByPoint(J_),J_.addVectors(this.boundingBox.max,X_.max),this.boundingBox.expandByPoint(J_)):(this.boundingBox.expandByPoint(X_.min),this.boundingBox.expandByPoint(X_.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ly);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new fy,1/0);if(e){const n=this.boundingSphere.center;if(X_.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];K_.setFromBufferAttribute(n),this.morphTargetsRelative?(J_.addVectors(X_.min,K_.min),X_.expandByPoint(J_),J_.addVectors(X_.max,K_.max),X_.expandByPoint(J_)):(X_.expandByPoint(K_.min),X_.expandByPoint(K_.max))}X_.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)J_.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(J_));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)J_.fromBufferAttribute(s,t),a&&(Y_.fromBufferAttribute(e,t),J_.add(Y_)),i=Math.max(i,n.distanceToSquared(J_))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new F_(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),a=[],o=[];for(let S=0;S<n.count;S++)a[S]=new fy,o[S]=new fy;const l=new fy,c=new fy,u=new fy,d=new Hv,h=new Hv,p=new Hv,f=new fy,m=new fy;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,i),d.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),u.sub(l),h.sub(d),p.sub(d);const s=1/(h.x*p.y-p.x*h.y);isFinite(s)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-h.y).multiplyScalar(s),m.copy(u).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(s),a[e].add(f),a[t].add(f),a[i].add(f),o[e].add(m),o[t].add(m),o[i].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let S=0,N=v.length;S<N;++S){const t=v[S],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)g(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const y=new fy,_=new fy,x=new fy,b=new fy;function w(e){x.fromBufferAttribute(i,e),b.copy(x);const t=a[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),_.crossVectors(b,t);const n=_.dot(o[e])<0?-1:1;s.setXYZW(e,y.x,y.y,y.z,n)}for(let S=0,N=v.length;S<N;++S){const t=v[S],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)w(e.getX(i+0)),w(e.getX(i+1)),w(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new F_(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new fy,r=new fy,s=new fy,a=new fy,o=new fy,l=new fy,c=new fy,u=new fy;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)J_.fromBufferAttribute(e,t),J_.normalize(),e.setXYZ(t,J_.x,J_.y,J_.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new F_(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $_,n=this.index.array,i=this.attributes;for(const a in i){const r=e(i[a],n);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);i.push(r)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Q_=new Wy,Z_=new Hy,ex=new Ly,tx=new fy,nx=new fy,ix=new fy,rx=new fy,sx=new fy,ax=new fy,ox=new Hv,lx=new Hv,cx=new Hv,ux=new fy,dx=new fy,hx=new fy,px=new fy,fx=new fy;class mx extends v_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new j_;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){ax.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(sx.fromBufferAttribute(o,e),s?ax.addScaledVector(sx,i):ax.addScaledVector(sx.sub(t),i))}t.add(ax)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),ex.copy(n.boundingSphere),ex.applyMatrix4(r),Z_.copy(e.ray).recast(e.near),!1===ex.containsPoint(Z_.origin)){if(null===Z_.intersectSphere(ex,tx))return;if(Z_.origin.distanceToSquared(tx)>(e.far-e.near)**2)return}Q_.copy(r).invert(),Z_.copy(e.ray).applyMatrix4(Q_),null!==n.boundingBox&&!1===Z_.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Z_)}}_computeIntersections(e,t,n){let i;const r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,f=d.length;p<f;p++){const r=d[p],o=s[r.materialIndex];for(let s=Math.max(r.start,h.start),d=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));s<d;s+=3){i=gx(this,o,e,n,l,c,u,a.getX(s),a.getX(s+1),a.getX(s+2)),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);r<o;r+=3){i=gx(this,s,e,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(s))for(let p=0,f=d.length;p<f;p++){const r=d[p],a=s[r.materialIndex];for(let s=Math.max(r.start,h.start),d=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));s<d;s+=3){i=gx(this,a,e,n,l,c,u,s,s+1,s+2),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);r<a;r+=3){i=gx(this,s,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function gx(e,t,n,i,r,s,a,o,l,c){e.getVertexPosition(o,nx),e.getVertexPosition(l,ix),e.getVertexPosition(c,rx);const u=function(e,t,n,i,r,s,a,o){let l;if(l=t.side===Bg?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side===Vg,o),null===l)return null;fx.copy(o),fx.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(fx);return c<n.near||c>n.far?null:{distance:c,point:fx.clone(),object:e}}(e,t,n,i,nx,ix,rx,px);if(u){r&&(ox.fromBufferAttribute(r,o),lx.fromBufferAttribute(r,l),cx.fromBufferAttribute(r,c),u.uv=M_.getInterpolation(px,nx,ix,rx,ox,lx,cx,new Hv)),s&&(ox.fromBufferAttribute(s,o),lx.fromBufferAttribute(s,l),cx.fromBufferAttribute(s,c),u.uv1=M_.getInterpolation(px,nx,ix,rx,ox,lx,cx,new Hv)),a&&(ux.fromBufferAttribute(a,o),dx.fromBufferAttribute(a,l),hx.fromBufferAttribute(a,c),u.normal=M_.getInterpolation(px,nx,ix,rx,ux,dx,hx,new fy),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new fy,materialIndex:0};M_.getNormal(nx,ix,rx,e.normal),u.face=e}return u}function vx(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function yx(e){const t={};for(let n=0;n<e.length;n++){const i=vx(e[n]);for(const e in i)t[e]=i[e]}return t}class _x extends D_{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vx(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class xx extends v_{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wy,this.projectionMatrix=new Wy,this.projectionMatrixInverse=new Wy,this.coordinateSystem=Iv}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const bx=new fy,wx=new Hv,Sx=new Hv;class Nx extends xx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Lv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ov*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Lv*Math.atan(Math.tan(.5*Ov*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){bx.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(bx.x,bx.y).multiplyScalar(-e/bx.z),bx.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bx.x,bx.y).multiplyScalar(-e/bx.z)}getViewSize(e,t){return this.getViewBounds(e,wx,Sx),t.subVectors(Sx,wx)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ov*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tx=new fy,Ex=new fy,Cx=new Wv;class Mx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fy(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Tx.subVectors(n,t).cross(Ex.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Tx),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Cx.getNormalMatrix(e),i=this.coplanarPoint(Tx).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ix=new Ly,Ax=new fy;class Rx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mx,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mx,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mx,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Mx,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Mx,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Mx;this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Iv;const n=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15];if(n[0].setComponents(o-r,d-l,m-h,_-g).normalize(),n[1].setComponents(o+r,d+l,m+h,_+g).normalize(),n[2].setComponents(o+s,d+c,m+p,_+v).normalize(),n[3].setComponents(o-s,d-c,m-p,_-v).normalize(),n[4].setComponents(o-a,d-u,m-f,_-y).normalize(),t===Iv)n[5].setComponents(o+a,d+u,m+f,_+y).normalize();else{if(t!==Av)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ix.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ix.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ix)}intersectsSprite(e){return Ix.center.set(0,0,0),Ix.radius=.7071067811865476,Ix.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ix)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ax.x=i.normal.x>0?e.max.x:e.min.x,Ax.y=i.normal.y>0?e.max.y:e.min.y,Ax.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ax)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const Px={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, newPeak * vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},kx={common:{diffuse:{value:new k_(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wv},alphaMap:{value:null},alphaMapTransform:{value:new Wv},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wv}},envmap:{envMap:{value:null},envMapRotation:{value:new Wv},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wv}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wv}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wv},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wv},normalScale:{value:new Hv(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wv},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wv}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wv}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wv}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new k_(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new k_(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wv},alphaTest:{value:0},uvTransform:{value:new Wv}},sprite:{diffuse:{value:new k_(16777215)},opacity:{value:1},center:{value:new Hv(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wv},alphaMap:{value:null},alphaMapTransform:{value:new Wv},alphaTest:{value:0}}},Ox={basic:{uniforms:yx([kx.common,kx.specularmap,kx.envmap,kx.aomap,kx.lightmap,kx.fog]),vertexShader:Px.meshbasic_vert,fragmentShader:Px.meshbasic_frag},lambert:{uniforms:yx([kx.common,kx.specularmap,kx.envmap,kx.aomap,kx.lightmap,kx.emissivemap,kx.bumpmap,kx.normalmap,kx.displacementmap,kx.fog,kx.lights,{emissive:{value:new k_(0)}}]),vertexShader:Px.meshlambert_vert,fragmentShader:Px.meshlambert_frag},phong:{uniforms:yx([kx.common,kx.specularmap,kx.envmap,kx.aomap,kx.lightmap,kx.emissivemap,kx.bumpmap,kx.normalmap,kx.displacementmap,kx.fog,kx.lights,{emissive:{value:new k_(0)},specular:{value:new k_(1118481)},shininess:{value:30}}]),vertexShader:Px.meshphong_vert,fragmentShader:Px.meshphong_frag},standard:{uniforms:yx([kx.common,kx.envmap,kx.aomap,kx.lightmap,kx.emissivemap,kx.bumpmap,kx.normalmap,kx.displacementmap,kx.roughnessmap,kx.metalnessmap,kx.fog,kx.lights,{emissive:{value:new k_(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Px.meshphysical_vert,fragmentShader:Px.meshphysical_frag},toon:{uniforms:yx([kx.common,kx.aomap,kx.lightmap,kx.emissivemap,kx.bumpmap,kx.normalmap,kx.displacementmap,kx.gradientmap,kx.fog,kx.lights,{emissive:{value:new k_(0)}}]),vertexShader:Px.meshtoon_vert,fragmentShader:Px.meshtoon_frag},matcap:{uniforms:yx([kx.common,kx.bumpmap,kx.normalmap,kx.displacementmap,kx.fog,{matcap:{value:null}}]),vertexShader:Px.meshmatcap_vert,fragmentShader:Px.meshmatcap_frag},points:{uniforms:yx([kx.points,kx.fog]),vertexShader:Px.points_vert,fragmentShader:Px.points_frag},dashed:{uniforms:yx([kx.common,kx.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Px.linedashed_vert,fragmentShader:Px.linedashed_frag},depth:{uniforms:yx([kx.common,kx.displacementmap]),vertexShader:Px.depth_vert,fragmentShader:Px.depth_frag},normal:{uniforms:yx([kx.common,kx.bumpmap,kx.normalmap,kx.displacementmap,{opacity:{value:1}}]),vertexShader:Px.meshnormal_vert,fragmentShader:Px.meshnormal_frag},sprite:{uniforms:yx([kx.sprite,kx.fog]),vertexShader:Px.sprite_vert,fragmentShader:Px.sprite_frag},background:{uniforms:{uvTransform:{value:new Wv},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Px.background_vert,fragmentShader:Px.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wv}},vertexShader:Px.backgroundCube_vert,fragmentShader:Px.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Px.cube_vert,fragmentShader:Px.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Px.equirect_vert,fragmentShader:Px.equirect_frag},distanceRGBA:{uniforms:yx([kx.common,kx.displacementmap,{referencePosition:{value:new fy},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Px.distanceRGBA_vert,fragmentShader:Px.distanceRGBA_frag},shadow:{uniforms:yx([kx.lights,kx.fog,{color:{value:new k_(0)},opacity:{value:1}}]),vertexShader:Px.shadow_vert,fragmentShader:Px.shadow_frag}};Ox.physical={uniforms:yx([Ox.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wv},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wv},clearcoatNormalScale:{value:new Hv(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wv},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wv},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wv},sheen:{value:0},sheenColor:{value:new k_(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wv},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wv},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wv},transmissionSamplerSize:{value:new Hv},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wv},attenuationDistance:{value:0},attenuationColor:{value:new k_(0)},specularColor:{value:new k_(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wv},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wv},anisotropyVector:{value:new Hv},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wv}}]),vertexShader:Px.meshphysical_vert,fragmentShader:Px.meshphysical_frag};class Lx extends xx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Math.sqrt(5);class Dx extends cy{constructor(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:cv)!==cv&&c!==uv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===cv&&(n=rv),void 0===n&&c===uv&&(n=ov),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ev,this.minFilter=void 0!==o?o:ev,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const jx=new Dx(1,1);jx.compareFunction=515;new Float32Array(16),new Float32Array(9),new Float32Array(4);new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);class Ux extends D_{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zx extends D_{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Fx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Cv,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Dv()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return Kv("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dv()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dv()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Vx=new fy;class Bx{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Vx.fromBufferAttribute(this,t),Vx.applyMatrix4(e),this.setXYZ(t,Vx.x,Vx.y,Vx.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Vx.fromBufferAttribute(this,t),Vx.applyNormalMatrix(e),this.setXYZ(t,Vx.x,Vx.y,Vx.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Vx.fromBufferAttribute(this,t),Vx.transformDirection(e),this.setXYZ(t,Vx.x,Vx.y,Vx.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Fv(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vv(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Vv(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vv(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vv(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vv(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fv(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fv(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fv(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fv(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array),i=Vv(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vv(t,this.array),n=Vv(n,this.array),i=Vv(i,this.array),r=Vv(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new F_(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bx(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Hx extends D_{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new k_(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Wx extends F_{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}class qx extends D_{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new k_(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class Gx extends D_{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new k_(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Yx extends cy{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ev,this.minFilter=ev,this.generateMipmaps=!1,this.needsUpdate=!0}}class Xx extends D_{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new k_(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Kx extends _x{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Jx extends D_{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new k_(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new k_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new e_,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $x extends Jx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Hv(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jv(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new k_(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new k_(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new k_(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Qx extends D_{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new k_(16777215),this.specular=new k_(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new k_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new e_,this.combine=Wg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zx extends D_{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new k_(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new k_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class eb extends D_{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class tb extends D_{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new k_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new k_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new e_,this.combine=Wg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nb extends D_{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new k_(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Hv(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ib extends qx{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rb(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function sb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class ab{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0}}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ob extends ab{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fv,endingEnd:fv}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case mv:r=e,a=2*t-n;break;case gv:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case mv:s=e,o=2*n-t;break;case gv:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,_=h*m-h*f;for(let x=0;x!==a;++x)r[x]=g*s[c+x]+v*s[l+x]+y*s[o+x]+_*s[u+x];return r}}class lb extends ab{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==a;++d)r[d]=s[l+d]*u+s[o+d]*c;return r}}class cb extends ab{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ub{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rb(t,this.TimeBufferType),this.values=rb(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:rb(e.times,Array),values:rb(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new cb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ob(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case dv:t=this.InterpolantFactoryMethodDiscrete;break;case hv:t=this.InterpolantFactoryMethodLinear;break;case pv:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dv;case this.InterpolantFactoryMethodLinear:return hv;case this.InterpolantFactoryMethodSmooth:return pv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=n.slice(r,s),this.values=this.values.slice(r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==r;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,s),e=!1;break}s=t}if(void 0!==i&&sb(i))for(let a=0,o=i.length;a!==o;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===pv,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ub.prototype.TimeBufferType=Float32Array,ub.prototype.ValueBufferType=Float32Array,ub.prototype.DefaultInterpolation=hv;class db extends ub{}db.prototype.ValueTypeName="bool",db.prototype.ValueBufferType=Array,db.prototype.DefaultInterpolation=dv,db.prototype.InterpolantFactoryMethodLinear=void 0,db.prototype.InterpolantFactoryMethodSmooth=void 0;class hb extends ub{}hb.prototype.ValueTypeName="color";class pb extends ub{}pb.prototype.ValueTypeName="number";class fb extends ab{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)py.slerpFlat(r,0,s,l-a,s,l,o);return r}}class mb extends ub{InterpolantFactoryMethodLinear(e){return new fb(this.times,this.values,this.getValueSize(),e)}}mb.prototype.ValueTypeName="quaternion",mb.prototype.DefaultInterpolation=hv,mb.prototype.InterpolantFactoryMethodSmooth=void 0;class gb extends ub{}gb.prototype.ValueTypeName="string",gb.prototype.ValueBufferType=Array,gb.prototype.DefaultInterpolation=dv,gb.prototype.InterpolantFactoryMethodLinear=void 0,gb.prototype.InterpolantFactoryMethodSmooth=void 0;class vb extends ub{}vb.prototype.ValueTypeName="vector";const yb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class _b{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const xb=new _b;class bb{constructor(e){this.manager=void 0!==e?e:xb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}bb.DEFAULT_MATERIAL_NAME="__DEFAULT";const wb={};class Sb extends Error{constructor(e,t){super(e),this.response=t}}class Nb extends bb{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=yb.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==wb[e])return void wb[e].push({onLoad:t,onProgress:n,onError:i});wb[e]=[],wb[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=wb[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then((i=>{let{done:r,value:l}=i;if(r)e.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new Sb('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{yb.add(e,t);const n=wb[e];delete wb[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=wb[e];if(void 0===n)throw this.manager.itemError(e),t;delete wb[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Tb extends v_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new k_(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Eb extends Tb{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(v_.DEFAULT_UP),this.updateMatrix(),this.groundColor=new k_(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Cb=new Wy,Mb=new fy,Ib=new fy;class Ab{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Hv(512,512),this.map=null,this.mapPass=null,this.matrix=new Wy,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rx,this._frameExtents=new Hv(1,1),this._viewportCount=1,this._viewports=[new uy(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Mb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Mb),Ib.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ib),t.updateMatrixWorld(),Cb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Cb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Rb extends Ab{constructor(){super(new Nx(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Lv*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Pb extends Tb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(v_.DEFAULT_UP),this.updateMatrix(),this.target=new v_,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new Rb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const kb=new Wy,Ob=new fy,Lb=new fy;class Db extends Ab{constructor(){super(new Nx(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Hv(4,2),this._viewportCount=6,this._viewports=[new uy(2,1,1,1),new uy(0,1,1,1),new uy(3,1,1,1),new uy(1,1,1,1),new uy(3,0,1,1),new uy(1,0,1,1)],this._cubeDirections=[new fy(1,0,0),new fy(-1,0,0),new fy(0,0,1),new fy(0,0,-1),new fy(0,1,0),new fy(0,-1,0)],this._cubeUps=[new fy(0,1,0),new fy(0,1,0),new fy(0,1,0),new fy(0,1,0),new fy(0,0,1),new fy(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Ob.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ob),Lb.copy(n.position),Lb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Lb),n.updateMatrixWorld(),i.makeTranslation(-Ob.x,-Ob.y,-Ob.z),kb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kb)}}class jb extends Tb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Db}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ub extends Ab{constructor(){super(new Lx(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zb extends Tb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(v_.DEFAULT_UP),this.updateMatrix(),this.target=new v_,this.shadow=new Ub}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Fb extends Tb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Vb extends bb{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,s=new Nb(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(s){i?i(s):console.error(s),r.manager.itemError(e)}}),n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=Vb.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new k_).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new k_).setHex(t.value);break;case"v2":i.uniforms[r].value=(new Hv).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new fy).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new uy).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new Wv).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Wy).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Hv).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Hv).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Xx,SpriteMaterial:Hx,RawShaderMaterial:Kx,ShaderMaterial:_x,PointsMaterial:Gx,MeshPhysicalMaterial:$x,MeshStandardMaterial:Jx,MeshPhongMaterial:Qx,MeshToonMaterial:Zx,MeshNormalMaterial:eb,MeshLambertMaterial:tb,MeshDepthMaterial:Ux,MeshDistanceMaterial:zx,MeshBasicMaterial:j_,MeshMatcapMaterial:nb,LineDashedMaterial:ib,LineBasicMaterial:qx,Material:D_}[e]}}const Bb="\\[\\]\\.:\\/",Hb=new RegExp("["+Bb+"]","g"),Wb="[^"+Bb+"]",qb="[^"+Bb.replace("\\.","")+"]",Gb=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Wb)+/(WCOD+)?/.source.replace("WCOD",qb)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wb)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wb)+"$"),Yb=["material","materials","bones","map"];class Xb{constructor(e,t,n){this.path=t,this.parsedPath=n||Xb.parseTrackName(t),this.node=Xb.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Xb.Composite(e,t,n):new Xb(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Hb,"")}static parseTrackName(e){const t=Gb.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Yb.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Xb.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xb.Composite=class{constructor(e,t,n){const i=n||Xb.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Xb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Xb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Xb.prototype.GetterByBindingType=[Xb.prototype._getValue_direct,Xb.prototype._getValue_array,Xb.prototype._getValue_arrayElement,Xb.prototype._getValue_toArray],Xb.prototype.SetterByBindingTypeAndVersioning=[[Xb.prototype._setValue_direct,Xb.prototype._setValue_direct_setNeedsUpdate,Xb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xb.prototype._setValue_array,Xb.prototype._setValue_array_setNeedsUpdate,Xb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xb.prototype._setValue_arrayElement,Xb.prototype._setValue_arrayElement_setNeedsUpdate,Xb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xb.prototype._setValue_fromArray,Xb.prototype._setValue_fromArray_setNeedsUpdate,Xb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Kb extends Fx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}function Jb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="{";!0===e.isNode&&(n+=e.id);for(const{property:i,childNode:r}of $b(e))n+=","+i.slice(0,-4)+":"+r.getCacheKey(t);return n+="}",n}function $b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){for(const n in e){if(!0===n.startsWith("_"))continue;const i=e[n];if(!0===Array.isArray(i))for(let e=0;e<i.length;e++){const r=i[e];r&&(!0===r.isNode||t&&"function"===typeof r.toJSON)&&(yield{property:n,index:e,childNode:r})}else if(i&&!0===i.isNode)yield{property:n,childNode:i};else if("object"===typeof i)for(const e in i){const r=i[e];r&&(!0===r.isNode||t&&"function"===typeof r.toJSON)&&(yield{property:n,index:e,childNode:r})}}}()}function Qb(e){if(void 0===e||null===e)return null;const t=typeof e;return!0===e.isNode?"node":"number"===t?"float":"boolean"===t?"bool":"string"===t?"string":"function"===t?"shader":!0===e.isVector2?"vec2":!0===e.isVector3?"vec3":!0===e.isVector4?"vec4":!0===e.isMatrix3?"mat3":!0===e.isMatrix4?"mat4":!0===e.isColor?"color":e instanceof ArrayBuffer?"ArrayBuffer":null}function Zb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=e?e.slice(-4):void 0;return 1===n.length&&("vec2"===r?n=[n[0],n[0]]:"vec3"===r?n=[n[0],n[0],n[0]]:"vec4"===r&&(n=[n[0],n[0],n[0],n[0]])),"color"===e?new k_(...n):"vec2"===r?new Hv(...n):"vec3"===r?new fy(...n):"vec4"===r?new uy(...n):"mat3"===r?new Wv(...n):"mat4"===r?new Wy(...n):"bool"===e?n[0]||!1:"float"===e||"int"===e||"uint"===e?n[0]||0:"string"===e?n[0]||"":"ArrayBuffer"===e?tw(n[0]):null}function ew(e){let t="";const n=new Uint8Array(e);for(let i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function tw(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0))).buffer}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Fg}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Fg);const nw=new Map;let iw=0;const rw=class extends Rv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.nodeType=e,this.updateType=Lg,this.updateBeforeType=Lg,this.uuid=Bv.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.isNode=!0,Object.defineProperty(this,"id",{value:iw++})}set needsUpdate(e){!0===e&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Dg)}onRenderUpdate(e){return this.onUpdate(e,jg)}onObjectUpdate(e){return this.onUpdate(e,Ug)}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return!1}*getChildren(){for(const{childNode:e}of $b(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e=e||this.version!==this._cacheKeyVersion,!0!==e&&null!==this._cacheKey||(this._cacheKey=Jb(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);for(const n of this.getChildren())t["_node"+n.id]=n;return null}construct(e){return console.warn("THREE.Node: construct() is deprecated. Use setup() instead."),this.setup(e)}increaseUsage(e){const t=e.getDataFromNode(this);return t.usageCount=void 0===t.usageCount?1:t.usageCount+1,t.usageCount}analyze(e){if(1===this.increaseUsage(e)){const t=e.getNodeProperties(this);for(const n of Object.values(t))n&&!0===n.isNode&&n.build(e)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&!0===n.isNode)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);let i=null;const r=e.getBuildStage();if("setup"===r){this.updateReference(e);const t=e.getNodeProperties(this);if(!0!==t.initialized||!1===e.context.tempRead){const n=e.stack.nodes.length;t.initialized=!0,t.outputNode=this.setup(e),null!==t.outputNode&&e.stack.nodes.length!==n&&(t.outputNode=e.stack);for(const i of Object.values(t))i&&!0===i.isNode&&i.build(e)}}else if("analyze"===r)this.analyze(e);else if("generate"===r){if(1===this.generate.length){const n=this.getNodeType(e),r=e.getDataFromNode(this);i=r.snippet,void 0===i&&(i=this.generate(e)||"",r.snippet=i),i=e.format(i,n,t)}else i=this.generate(e,t)||""}return e.removeChain(this),i}getSerializeChildren(){return $b(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:i,index:r,childNode:s}of t)void 0!==r?(void 0===n[i]&&(n[i]=Number.isInteger(r)?[]:{}),n[i][r]=s.toJSON(e.meta).uuid):n[i]=s.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(void 0!==e.inputNodes){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const i=[];for(const r of e.inputNodes[n])i.push(t[r]);this[n]=i}else if("object"===typeof e.inputNodes[n]){const i={};for(const r in e.inputNodes[n]){const s=e.inputNodes[n][r];i[r]=t[s]}this[n]=i}else{const i=e.inputNodes[n];this[n]=t[i]}}}toJSON(e){const{uuid:t,type:n}=this,i=void 0===e||"string"===typeof e;i&&(e={textures:{},images:{},nodes:{}});let r=e.nodes[t];function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(void 0===r&&(r={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},!0!==i&&(e.nodes[r.uuid]=r),this.serialize(r),delete r.meta),i){const t=s(e.textures),n=s(e.images),i=s(e.nodes);t.length>0&&(r.textures=t),n.length>0&&(r.images=n),i.length>0&&(r.nodes=i)}return r}};function sw(e,t){if("function"!==typeof t||!e)throw new Error("Node class ".concat(e," is not a class"));nw.has(e)?console.warn("Redefinition of node class ".concat(e)):(nw.set(e,t),t.type=e)}class aw extends rw{constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if("generate"===e.getBuildStage()){const n=e.getVectorType(this.getNodeType(e,t)),i=e.getDataFromNode(this);if(!1!==e.context.tempRead&&void 0!==i.propertyName)return e.format(i.propertyName,n,t);if(!1!==e.context.tempWrite&&"void"!==n&&"void"!==t&&this.hasDependencies(e)){const r=super.build(e,n),s=e.getVarFromNode(this,null,n),a=e.getPropertyName(s);return e.addLineFlowCode("".concat(a," = ").concat(r)),i.snippet=r,i.propertyName=a,e.format(i.propertyName,n,t)}}return super.build(e,t)}}const ow=aw;sw("TempNode",aw);class lw extends rw{constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getNodeType(e)}generate(e){const t=this.node.build(e),n=this.indexNode.build(e,"uint");return"".concat(t,"[ ").concat(n," ]")}}const cw=lw;sw("ArrayElementNode",lw);class uw extends rw{constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const i of this.convertTo.split("|"))null!==n&&e.getTypeLength(t)!==e.getTypeLength(i)||(n=i);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,i=this.getNodeType(e),r=n.build(e,i);return e.format(r,i,t)}}const dw=uw;sw("ConvertNode",uw);class hw extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.nodes=e}getNodeType(e){return null!==this.nodeType?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce(((t,n)=>t+e.getTypeLength(n.getNodeType(e))),0))}generate(e,t){const n=this.getNodeType(e),i=this.nodes,r=e.getComponentType(n),s=[];for(const o of i){let t=o.build(e);const n=e.getComponentType(o.getNodeType(e));n!==r&&(t=e.format(t,n,r)),s.push(t)}const a="".concat(e.getType(n),"( ").concat(s.join(", ")," )");return e.format(a,n,t)}}const pw=hw;sw("JoinNode",hw);const fw=zg.join("");class mw extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(zg.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,i=e.getTypeLength(n.getNodeType(e));let r=null;if(i>1){let s=null;this.getVectorLength()>=i&&(s=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const a=n.build(e,s);r=this.components.length===i&&this.components===fw.slice(0,this.components.length)?e.format(a,s,t):e.format("".concat(a,".").concat(this.components),this.getNodeType(e),t)}else r=n.build(e,t);return r}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}const gw=mw;sw("SplitNode",mw);class vw extends ow{constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:i}=this,r=this.getNodeType(e),s=e.getTypeFromLength(n.length),a=i.build(e,s),o=t.build(e,r),l=e.getTypeLength(r),c=[];for(let u=0;u<l;u++){const e=zg[u];e===n[0]?(c.push(a),u+=n.length-1):c.push(o+"."+e)}return"".concat(e.getType(r),"( ").concat(c.join(", ")," )")}}const yw=vw;sw("SetNode",vw);class _w extends rw{constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return null===this.nodeType?Qb(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Qb(this.value),e.nodeType=this.nodeType,"ArrayBuffer"===e.valueType&&(e.value=ew(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?Zb(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const xw=_w;sw("InputNode",_w);class bw extends xw{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return e.format(this.generateConst(e),n,t)}}const ww=bw;sw("ConstNode",bw);let Sw=null;const Nw=new Map;function Tw(e,t){if(Nw.has(e))console.warn("Redefinition of node element ".concat(e));else{if("function"!==typeof t)throw new Error("Node element ".concat(e," is not a function"));Nw.set(e,t)}}const Ew=e=>e.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),Cw={setup(e,t){const n=t.shift();return e(Jw(n),...t)},get(e,t,n){if("string"===typeof t&&void 0===e[t]){if(!0!==e.isStackNode&&"assign"===t)return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Sw.assign(n,...t),n};if(Nw.has(t)){const i=Nw.get(t);return e.isStackNode?function(){return n.add(i(...arguments))}:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i(n,...t)}}if("self"===t)return e;if(t.endsWith("Assign")&&Nw.has(t.slice(0,t.length-6))){const i=Nw.get(t.slice(0,t.length-6));return e.isStackNode?function(){return n.assign(arguments.length<=0?void 0:arguments[0],i(...arguments))}:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.assign(i(n,...t))}}if(!0===/^[xyzwrgbastpq]{1,4}$/.test(t))return t=Ew(t),Kw(new gw(n,t));if(!0===/^set[XYZWRGBASTPQ]{1,4}$/.test(t))return t=(t=Ew(t.slice(3).toLowerCase())).split("").sort().join(""),n=>Kw(new yw(e,t,n));if("width"===t||"height"===t||"depth"===t)return"width"===t?t="x":"height"===t?t="y":"depth"===t&&(t="z"),Kw(new gw(e,t));if(!0===/^\d+$/.test(t))return Kw(new cw(n,new ww(Number(t),"uint")))}return Reflect.get(e,t,n)},set:(e,t,n,i)=>"string"!==typeof t||void 0!==e[t]||!0!==/^[xyzwrgbastpq]{1,4}$/.test(t)&&"width"!==t&&"height"!==t&&"depth"!==t&&!0!==/^\d+$/.test(t)?Reflect.set(e,t,n,i):(i[t].assign(n),!0)},Mw=new WeakMap,Iw=new WeakMap,Aw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(const n in e)e[n]=Kw(e[n],t);return e},Rw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.length;for(let i=0;i<n;i++)e[i]=Kw(e[i],t);return e},Pw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=e=>Kw(null!==i?Object.assign(e,i):e);return null===t?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(new e(...$w(n)))}:null!==n?(n=Kw(n),function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r(new e(t,...$w(s),n))}):function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r(new e(t,...$w(i)))}},kw=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Kw(new e(...$w(n)))};class Ow extends rw{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){const{outputNode:t}=e.getNodeProperties(this);return t?t.getNodeType(e):super.getNodeType(e)}call(e){const{shaderNode:t,inputNodes:n}=this;if(t.layout){let i=Iw.get(e.constructor);void 0===i&&(i=new WeakMap,Iw.set(e.constructor,i));let r=i.get(t);return void 0===r&&(r=Kw(e.buildFunctionNode(t)),i.set(t,r)),null!==e.currentFunctionNode&&e.currentFunctionNode.includes.push(r),Kw(r.call(n))}const i=t.jsFunc,r=null!==n?i(n,e.stack,e):i(e.stack,e);return Kw(r)}setup(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);return null===n?this.call(e).build(e,t):super.generate(e,t)}}class Lw extends rw{constructor(e){super(),this.jsFunc=e,this.layout=null}get isArrayInput(){return/^\((\s+)?\[/.test(this.jsFunc.toString())}setLayout(e){return this.layout=e,this}call(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Jw(e),Kw(new Ow(this,e))}setup(){return this.call()}}const Dw=[!1,!0],jw=[0,1,2,3],Uw=[-1,-2],zw=[.5,1.5,1/3,1e-6,1e6,Math.PI,2*Math.PI,1/Math.PI,2/Math.PI,1/(2*Math.PI),Math.PI/2],Fw=new Map;for(const n of Dw)Fw.set(n,new ww(n));const Vw=new Map;for(const n of jw)Vw.set(n,new ww(n,"uint"));const Bw=new Map([...Vw].map((e=>new ww(e.value,"int"))));for(const n of Uw)Bw.set(n,new ww(n,"int"));const Hw=new Map([...Bw].map((e=>new ww(e.value))));for(const n of zw)Hw.set(n,new ww(n));for(const n of zw)Hw.set(-n,new ww(-n));const Ww={bool:Fw,uint:Vw,ints:Bw,float:Hw},qw=new Map([...Fw,...Hw]),Gw=(e,t)=>qw.has(e)?qw.get(e):!0===e.isNode?e:new ww(e,t),Yw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if((0===i.length||!["bool","float","int","uint"].includes(e)&&i.every((e=>"object"!==typeof e)))&&(i=[Zb(e,...i)]),1===i.length&&null!==t&&t.has(i[0]))return Kw(t.get(i[0]));if(1===i.length){const t=Gw(i[0],e);return(e=>{try{return e.getNodeType()}catch(t){return}})(t)===e?Kw(t):Kw(new dw(t,e))}const s=i.map((e=>Gw(e)));return Kw(new pw(s,e))}};function Xw(e){return new Proxy(new Lw(e),Cw)}const Kw=function(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Qb(e);if("node"===n){let t=Mw.get(e);return void 0===t&&(t=new Proxy(e,Cw),Mw.set(e,t),Mw.set(t,t)),t}return null===t&&("float"===n||"boolean"===n)||n&&"shader"!==n&&"string"!==n?Kw(Gw(e,t)):"shader"===n?eS(e):e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},Jw=function(e){return new Aw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},$w=function(e){return new Rw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},Qw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pw(...t)},Zw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kw(...t)},eS=e=>{const t=new Xw(e),n=function(){let e;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Jw(i),e=i[0]&&i[0].isNode?[...i]:i[0],t.call(e)};return n.shaderNode=t,n.setLayout=e=>(t.setLayout(e),n),n};sw("ShaderNode",Xw);const tS=e=>{Sw=e},nS=function(){return Sw.if(...arguments)};Tw("append",(function(e){return Sw&&Sw.add(e),e}));const iS=new Yw("color"),rS=new Yw("float",Ww.float),sS=new Yw("int",Ww.ints),aS=new Yw("uint",Ww.uint),oS=new Yw("bool",Ww.bool),lS=new Yw("vec2"),cS=new Yw("ivec2"),uS=new Yw("uvec2"),dS=new Yw("bvec2"),hS=new Yw("vec3"),pS=new Yw("ivec3"),fS=new Yw("uvec3"),mS=new Yw("bvec3"),gS=new Yw("vec4"),vS=new Yw("ivec4"),yS=new Yw("uvec4"),_S=new Yw("bvec4"),xS=new Yw("mat2"),bS=new Yw("imat2"),wS=new Yw("umat2"),SS=new Yw("bmat2"),NS=new Yw("mat3"),TS=new Yw("imat3"),ES=new Yw("umat3"),CS=new Yw("bmat3"),MS=new Yw("mat4"),IS=new Yw("imat4"),AS=new Yw("umat4"),RS=new Yw("bmat4");Tw("color",iS),Tw("float",rS),Tw("int",sS),Tw("uint",aS),Tw("bool",oS),Tw("vec2",lS),Tw("ivec2",cS),Tw("uvec2",uS),Tw("bvec2",dS),Tw("vec3",hS),Tw("ivec3",pS),Tw("uvec3",fS),Tw("bvec3",mS),Tw("vec4",gS),Tw("ivec4",vS),Tw("uvec4",yS),Tw("bvec4",_S),Tw("mat2",xS),Tw("imat2",bS),Tw("umat2",wS),Tw("bmat2",SS),Tw("mat3",NS),Tw("imat3",TS),Tw("umat3",ES),Tw("bmat3",CS),Tw("mat4",MS),Tw("imat4",IS),Tw("umat4",AS),Tw("bmat4",RS),Tw("string",(function(){return Kw(new ww(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","string"))})),Tw("arrayBuffer",(e=>Kw(new ww(e,"ArrayBuffer"))));Tw("element",Qw(cw)),Tw("convert",((e,t)=>Kw(new dw(Kw(e),t))));class PS extends ow{constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return"void"!==t?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(!1===e.isAvailable("swizzleAssign")&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return zg.join("").slice(0,n)!==t.components}return!1}generate(e,t){const{targetNode:n,sourceNode:i}=this,r=this.needsSplitAssign(e),s=n.getNodeType(e),a=n.context({assign:!0}).build(e),o=i.build(e,s),l=i.getNodeType(e),c=e.getDataFromNode(this);let u;if(!0===c.initialized)"void"!==t&&(u=a);else if(r){const i=e.getVarFromNode(this,null,s),r=e.getPropertyName(i);e.addLineFlowCode("".concat(r," = ").concat(o));const l=n.node.context({assign:!0}).build(e);for(let t=0;t<n.components.length;t++){const i=n.components[t];e.addLineFlowCode("".concat(l,".").concat(i," = ").concat(r,"[ ").concat(t," ]"))}"void"!==t&&(u=a)}else u="".concat(a," = ").concat(o),"void"!==t&&"void"!==l||(e.addLineFlowCode(u),"void"!==t&&(u=a));return c.initialized=!0,e.format(u,s,t)}}const kS=Qw(PS);sw("AssignNode",PS),Tw("assign",kS);class OS extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{name:t,node:n}=this,i=this.getNodeType(e),r=e.getVaryingFromNode(this,t,i);r.needsInterpolation||(r.needsInterpolation="fragment"===e.shaderStage);const s=e.getPropertyName(r,Og);return e.flowNodeFromShaderStage(Og,n,i,s),e.getPropertyName(r)}}const LS=Qw(OS);Tw("varying",LS),sw("VaryingNode",OS);class DS extends rw{constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this._attributeName=e}isGlobal(){return!0}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=super.getNodeType(e);if(null===t){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const i=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(!0===e.hasGeometryAttribute(t)){const i=e.geometry.getAttribute(t),r=e.getTypeFromAttribute(i),s=e.getAttribute(t,r);if("vertex"===e.shaderStage)return e.format(s.name,r,n);return LS(this).build(e,n)}return console.warn('AttributeNode: Vertex attribute "'.concat(t,'" not found on geometry.')),e.generateConst(n)}}const jS=DS,US=(e,t)=>Kw(new DS(e,t));sw("AttributeNode",DS);class zS extends rw{constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return""!==t&&e.addLineFlowCode(t),this.outputNode.build(e)}}const FS=Qw(zS);Tw("bypass",FS),sw("BypassNode",zS);let VS=0;const BS=class{constructor(){this.id=VS++,this.nodesData=new WeakMap}getNodeData(e){return this.nodesData.get(e)}setNodeData(e,t){this.nodesData.set(e,t)}};class HS extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new BS;super(),this.isCacheNode=!0,this.node=e,this.cache=t}getNodeType(e){return this.node.getNodeType(e)}build(e){const t=e.getCache(),n=this.cache||e.globalCache;e.setCache(n);for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];const a=this.node.build(e,...r);return e.setCache(t),a}}const WS=Qw(HS);Tw("cache",WS),Tw("globalCache",(e=>WS(e,null))),sw("CacheNode",HS);class qS extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.isContextNode=!0,this.node=e,this.context=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.context});const n=this.node.build(e);return e.setContext(t),n}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.context});const i=this.node.build(e,t);return e.setContext(n),i}}const GS=qS,YS=Qw(qS);Tw("context",YS),Tw("label",((e,t)=>YS(e,{label:t}))),sw("ContextNode",qS);class XS extends rw{constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let i,r;if(n===XS.VERTEX)i=e.getVertexIndex();else{if(n!==XS.INSTANCE)throw new Error("THREE.IndexNode: Unknown scope: "+n);i=e.getInstanceIndex()}if("vertex"===e.shaderStage||"compute"===e.shaderStage)r=i;else{r=LS(this).build(e,t)}return r}}XS.VERTEX="vertex",XS.INSTANCE="instance";const KS=Zw(XS,XS.VERTEX),JS=Zw(XS,XS.INSTANCE);sw("IndexNode",XS);const $S=class{start(){}finish(){}direct(){}indirectDiffuse(){}indirectSpecular(){}ambientOcclusion(){}};class QS extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.node=e,this.name=t,this.isVarNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n}=this,i=e.getVarFromNode(this,n,e.getVectorType(this.getNodeType(e))),r=e.getPropertyName(i),s=t.build(e,i.type);return e.addLineFlowCode("".concat(r," = ").concat(s)),r}}const ZS=Qw(QS);Tw("temp",ZS),Tw("toVar",(function(){return ZS(...arguments).append()})),sw("VarNode",QS);class eN extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.name=t,this.varying=n,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return!0===this.varying?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const tN=eN,nN=(e,t)=>Kw(new eN(e,t)),iN=(e,t)=>Kw(new eN(e,t,!0)),rN=Zw(eN,"vec4","DiffuseColor"),sN=Zw(eN,"float","Roughness"),aN=Zw(eN,"float","Metalness"),oN=Zw(eN,"float","Clearcoat"),lN=Zw(eN,"float","ClearcoatRoughness"),cN=Zw(eN,"vec3","Sheen"),uN=Zw(eN,"float","SheenRoughness"),dN=Zw(eN,"float","Iridescence"),hN=Zw(eN,"float","IridescenceIOR"),pN=Zw(eN,"float","IridescenceThickness"),fN=Zw(eN,"color","SpecularColor"),mN=Zw(eN,"float","Shininess"),gN=Zw(eN,"vec4","Output"),vN=Zw(eN,"float","dashSize"),yN=Zw(eN,"float","gapSize");Zw(eN,"float","pointWidth");sw("PropertyNode",eN);class _N extends tN{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}sw("ParameterNode",_N);class xN extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";super("code"),this.isCodeNode=!0,this.code=e,this.language=n,this.includes=t}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const i of t)i.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const bN=xN;Qw(xN);sw("CodeNode",xN);class wN extends bN{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),this.keywords={}}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return void 0===n&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),i=n.name,r=n.type,s=e.getCodeFromNode(this,r);""!==i&&(s.name=i);const a=e.getPropertyName(s);let o=this.getNodeFunction(e).getCode(a);const l=this.keywords,c=Object.keys(l);if(c.length>0)for(const u of c){const t=new RegExp("\\b".concat(u,"\\b"),"g"),n=l[u].build(e,"property");o=o.replace(t,n)}return s.code=o+"\n","property"===t?a:e.format("".concat(a,"()"),r,t)}}sw("FunctionNode",wN);class SN extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super("string"),this.name=e,this.version=0,this.shared=t,this.isUniformGroup=!0}set needsUpdate(e){!0===e&&this.version++}}const NN=e=>new SN(e,!0),TN=(NN("frame"),NN("render"),new SN("object"));sw("UniformGroupNode",SN);class EN extends xw{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),this.isUniformNode=!0,this.groupNode=TN}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate((t=>{const i=e(t,n);void 0!==i&&(this.value=i)}),t)}generate(e,t){const n=this.getNodeType(e),i=this.getUniformHash(e);let r=e.getNodeFromHash(i);void 0===r&&(e.setHashNode(this,i),r=this);const s=r.getInputType(e),a=e.getUniformFromNode(r,s,e.shaderStage,e.context.label),o=e.getPropertyName(a);return void 0!==e.context.label&&delete e.context.label,e.format(o,n,t)}}const CN=EN,MN=(e,t)=>{const n=(e=>void 0!==e&&null!==e?e.nodeType||e.convertTo||("string"===typeof e?e:null):null)(t||e),i=e&&!0===e.isNode?e.node&&e.node.value||e.value:e;return Kw(new EN(i,n))};sw("UniformNode",EN);class IN extends jS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;super(null,"vec2"),this.isUVNode=!0,this.index=e}getAttributeName(){const e=this.index;return"uv"+(e>0?e:"")}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const AN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kw(new IN(...t))};sw("UVNode",IN);class RN extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),i=this.levelNode.build(e,"int");return e.format("".concat(e.getMethod("textureDimensions"),"( ").concat(n,", ").concat(i," )"),this.getNodeType(e),t)}}const PN=Qw(RN);Tw("textureSize",PN),sw("TextureSizeNode",RN);class kN extends ow{constructor(e,t,n){if(super(),this.op=e,(arguments.length<=3?0:arguments.length-3)>0){let t=n;for(let n=0;n<(arguments.length<=3?0:arguments.length-3);n++)t=new kN(e,t,n+3<3||arguments.length<=n+3?void 0:arguments[n+3]);n=t}this.aNode=t,this.bNode=n}getNodeType(e,t){const n=this.op,i=this.aNode,r=this.bNode,s=i.getNodeType(e),a="undefined"!==typeof r?r.getNodeType(e):null;if("void"===s||"void"===a)return"void";if("%"===n)return s;if("~"===n||"&"===n||"|"===n||"^"===n||">>"===n||"<<"===n)return e.getIntegerType(s);if("!"===n||"=="===n||"&&"===n||"||"===n||"^^"===n)return"bool";if("<"===n||">"===n||"<="===n||">="===n){const n=t?e.getTypeLength(t):Math.max(e.getTypeLength(s),e.getTypeLength(a));return n>1?"bvec".concat(n):"bool"}return"float"===s&&e.isMatrix(a)?a:e.isMatrix(s)&&e.isVector(a)?e.getVectorFromMatrix(s):e.isVector(s)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(s)?a:s}generate(e,t){const n=this.op,i=this.aNode,r=this.bNode,s=this.getNodeType(e,t);let a=null,o=null;"void"!==s?(a=i.getNodeType(e),o="undefined"!==typeof r?r.getNodeType(e):null,"<"===n||">"===n||"<="===n||">="===n||"=="===n?e.isVector(a)?o=a:a=o="float":">>"===n||"<<"===n?(a=s,o=e.changeComponentType(o,"uint")):e.isMatrix(a)&&e.isVector(o)?o=e.getVectorFromMatrix(a):a=e.isVector(a)&&e.isMatrix(o)?e.getVectorFromMatrix(o):o=s):a=o=s;const l=i.build(e,a),c="undefined"!==typeof r?r.build(e,o):null,u=e.getTypeLength(t),d=e.getFunctionOperator(n);return"void"!==t?"<"===n&&u>1?e.format("".concat(e.getMethod("lessThan"),"( ").concat(l,", ").concat(c," )"),s,t):"<="===n&&u>1?e.format("".concat(e.getMethod("lessThanEqual"),"( ").concat(l,", ").concat(c," )"),s,t):">"===n&&u>1?e.format("".concat(e.getMethod("greaterThan"),"( ").concat(l,", ").concat(c," )"),s,t):">="===n&&u>1?e.format("".concat(e.getMethod("greaterThanEqual"),"( ").concat(l,", ").concat(c," )"),s,t):"!"===n||"~"===n?e.format("(".concat(n).concat(l,")"),a,t):d?e.format("".concat(d,"( ").concat(l,", ").concat(c," )"),s,t):e.format("( ".concat(l," ").concat(n," ").concat(c," )"),s,t):"void"!==a?d?e.format("".concat(d,"( ").concat(l,", ").concat(c," )"),s,t):e.format("".concat(l," ").concat(n," ").concat(c),s,t):void 0}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const ON=Qw(kN,"+"),LN=Qw(kN,"-"),DN=Qw(kN,"*"),jN=Qw(kN,"/"),UN=Qw(kN,"%"),zN=Qw(kN,"=="),FN=Qw(kN,"!="),VN=Qw(kN,"<"),BN=Qw(kN,">"),HN=Qw(kN,"<="),WN=Qw(kN,">="),qN=Qw(kN,"&&"),GN=Qw(kN,"||"),YN=Qw(kN,"!"),XN=Qw(kN,"^^"),KN=Qw(kN,"&"),JN=Qw(kN,"~"),$N=Qw(kN,"|"),QN=Qw(kN,"^"),ZN=Qw(kN,"<<"),eT=Qw(kN,">>");Tw("add",ON),Tw("sub",LN),Tw("mul",DN),Tw("div",jN),Tw("remainder",UN),Tw("equal",zN),Tw("notEqual",FN),Tw("lessThan",VN),Tw("greaterThan",BN),Tw("lessThanEqual",HN),Tw("greaterThanEqual",WN),Tw("and",qN),Tw("or",GN),Tw("not",YN),Tw("xor",XN),Tw("bitAnd",KN),Tw("bitNot",JN),Tw("bitOr",$N),Tw("bitXor",QN),Tw("shiftLeft",ZN),Tw("shiftRight",eT),sw("OperatorNode",kN);class tT extends ow{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.method=e,this.aNode=t,this.bNode=n,this.cNode=i}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,r=e.isMatrix(t)?0:e.getTypeLength(t),s=e.isMatrix(n)?0:e.getTypeLength(n),a=e.isMatrix(i)?0:e.getTypeLength(i);return r>s&&r>a?t:s>a?n:a>r?i:t}getNodeType(e){const t=this.method;return t===tT.LENGTH||t===tT.DISTANCE||t===tT.DOT?"float":t===tT.CROSS?"vec3":t===tT.ALL?"bool":t===tT.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===tT.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){const n=this.method,i=this.getNodeType(e),r=this.getInputType(e),s=this.aNode,a=this.bNode,o=this.cNode,l=!0===e.renderer.isWebGLRenderer;if(n===tT.TRANSFORM_DIRECTION){let n=s,i=a;e.isMatrix(n.getNodeType(e))?i=gS(hS(i),0):n=gS(hS(n),0);const r=DN(n,i).xyz;return vT(r).build(e,t)}if(n===tT.NEGATE)return e.format("( - "+s.build(e,r)+" )",i,t);if(n===tT.ONE_MINUS)return LN(1,s).build(e,t);if(n===tT.RECIPROCAL)return jN(1,s).build(e,t);if(n===tT.DIFFERENCE)return TT(LN(s,a)).build(e,t);{const c=[];return n===tT.CROSS||n===tT.MOD?c.push(s.build(e,i),a.build(e,i)):n===tT.STEP?c.push(s.build(e,1===e.getTypeLength(s.getNodeType(e))?"float":r),a.build(e,r)):l&&(n===tT.MIN||n===tT.MAX)||n===tT.MOD?c.push(s.build(e,r),a.build(e,1===e.getTypeLength(a.getNodeType(e))?"float":r)):n===tT.REFRACT?c.push(s.build(e,r),a.build(e,r),o.build(e,"float")):n===tT.MIX?c.push(s.build(e,r),a.build(e,r),o.build(e,1===e.getTypeLength(o.getNodeType(e))?"float":r)):(c.push(s.build(e,r)),null!==a&&c.push(a.build(e,r)),null!==o&&c.push(o.build(e,r))),e.format("".concat(e.getMethod(n,i),"( ").concat(c.join(", ")," )"),i,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}tT.ALL="all",tT.ANY="any",tT.EQUALS="equals",tT.RADIANS="radians",tT.DEGREES="degrees",tT.EXP="exp",tT.EXP2="exp2",tT.LOG="log",tT.LOG2="log2",tT.SQRT="sqrt",tT.INVERSE_SQRT="inversesqrt",tT.FLOOR="floor",tT.CEIL="ceil",tT.NORMALIZE="normalize",tT.FRACT="fract",tT.SIN="sin",tT.COS="cos",tT.TAN="tan",tT.ASIN="asin",tT.ACOS="acos",tT.ATAN="atan",tT.ABS="abs",tT.SIGN="sign",tT.LENGTH="length",tT.NEGATE="negate",tT.ONE_MINUS="oneMinus",tT.DFDX="dFdx",tT.DFDY="dFdy",tT.ROUND="round",tT.RECIPROCAL="reciprocal",tT.TRUNC="trunc",tT.FWIDTH="fwidth",tT.BITCAST="bitcast",tT.ATAN2="atan2",tT.MIN="min",tT.MAX="max",tT.MOD="mod",tT.STEP="step",tT.REFLECT="reflect",tT.DISTANCE="distance",tT.DIFFERENCE="difference",tT.DOT="dot",tT.CROSS="cross",tT.POW="pow",tT.TRANSFORM_DIRECTION="transformDirection",tT.MIX="mix",tT.CLAMP="clamp",tT.REFRACT="refract",tT.SMOOTHSTEP="smoothstep",tT.FACEFORWARD="faceforward";const nT=rS(1e-6),iT=(rS(1e6),rS(Math.PI)),rT=(rS(2*Math.PI),Qw(tT,tT.ALL)),sT=Qw(tT,tT.ANY),aT=Qw(tT,tT.EQUALS),oT=Qw(tT,tT.RADIANS),lT=Qw(tT,tT.DEGREES),cT=Qw(tT,tT.EXP),uT=Qw(tT,tT.EXP2),dT=Qw(tT,tT.LOG),hT=Qw(tT,tT.LOG2),pT=Qw(tT,tT.SQRT),fT=Qw(tT,tT.INVERSE_SQRT),mT=Qw(tT,tT.FLOOR),gT=Qw(tT,tT.CEIL),vT=Qw(tT,tT.NORMALIZE),yT=Qw(tT,tT.FRACT),_T=Qw(tT,tT.SIN),xT=Qw(tT,tT.COS),bT=Qw(tT,tT.TAN),wT=Qw(tT,tT.ASIN),ST=Qw(tT,tT.ACOS),NT=Qw(tT,tT.ATAN),TT=Qw(tT,tT.ABS),ET=Qw(tT,tT.SIGN),CT=Qw(tT,tT.LENGTH),MT=Qw(tT,tT.NEGATE),IT=Qw(tT,tT.ONE_MINUS),AT=Qw(tT,tT.DFDX),RT=Qw(tT,tT.DFDY),PT=Qw(tT,tT.ROUND),kT=Qw(tT,tT.RECIPROCAL),OT=Qw(tT,tT.TRUNC),LT=Qw(tT,tT.FWIDTH),DT=(Qw(tT,tT.BITCAST),Qw(tT,tT.ATAN2)),jT=Qw(tT,tT.MIN),UT=Qw(tT,tT.MAX),zT=Qw(tT,tT.MOD),FT=Qw(tT,tT.STEP),VT=Qw(tT,tT.REFLECT),BT=Qw(tT,tT.DISTANCE),HT=Qw(tT,tT.DIFFERENCE),WT=Qw(tT,tT.DOT),qT=Qw(tT,tT.CROSS),GT=Qw(tT,tT.POW),YT=Qw(tT,tT.POW,2),XT=Qw(tT,tT.POW,3),KT=Qw(tT,tT.POW,4),JT=Qw(tT,tT.TRANSFORM_DIRECTION),$T=Qw(tT,tT.MIX),QT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Kw(new tT(tT.CLAMP,Kw(e),Kw(t),Kw(n)))},ZT=Qw(tT,tT.REFRACT),eE=Qw(tT,tT.SMOOTHSTEP),tE=Qw(tT,tT.FACEFORWARD);Tw("all",rT),Tw("any",sT),Tw("equals",aT),Tw("radians",oT),Tw("degrees",lT),Tw("exp",cT),Tw("exp2",uT),Tw("log",dT),Tw("log2",hT),Tw("sqrt",pT),Tw("inverseSqrt",fT),Tw("floor",mT),Tw("ceil",gT),Tw("normalize",vT),Tw("fract",yT),Tw("sin",_T),Tw("cos",xT),Tw("tan",bT),Tw("asin",wT),Tw("acos",ST),Tw("atan",NT),Tw("abs",TT),Tw("sign",ET),Tw("length",CT),Tw("lengthSq",(e=>WT(e,e))),Tw("negate",MT),Tw("oneMinus",IT),Tw("dFdx",AT),Tw("dFdy",RT),Tw("round",PT),Tw("reciprocal",kT),Tw("trunc",OT),Tw("fwidth",LT),Tw("atan2",DT),Tw("min",jT),Tw("max",UT),Tw("mod",zT),Tw("step",FT),Tw("reflect",VT),Tw("distance",BT),Tw("dot",WT),Tw("cross",qT),Tw("pow",GT),Tw("pow2",YT),Tw("pow3",XT),Tw("pow4",KT),Tw("transformDirection",JT),Tw("mix",((e,t,n)=>$T(t,n,e))),Tw("clamp",QT),Tw("refract",ZT),Tw("smoothstep",((e,t,n)=>eE(t,n,e))),Tw("faceForward",tE),Tw("difference",HT),Tw("saturate",(e=>QT(e))),Tw("cbrt",(e=>DN(ET(e),GT(TT(e),1/3)))),sw("MathNode",tT);const nE=eS((e=>{const{value:t}=e,{rgb:n}=t,i=n.mul(.9478672986).add(.0521327014).pow(2.4),r=n.mul(.0773993808),s=n.lessThanEqual(.04045),a=$T(i,r,s);return gS(a,t.a)})),iE=eS((e=>{const{value:t}=e,{rgb:n}=t,i=n.pow(.41666).mul(1.055).sub(.055),r=n.mul(12.92),s=n.lessThanEqual(.0031308),a=$T(i,r,s);return gS(a,t.a)})),rE=e=>{let t=null;return e===_v?t="Linear":e===yv&&(t="sRGB"),t},sE=(e,t)=>rE(e)+"To"+rE(t);class aE extends ow{constructor(e,t){super("vec4"),this.method=e,this.node=t}setup(){const{method:e,node:t}=this;return e===aE.LINEAR_TO_LINEAR?t:oE[e]({value:t})}}aE.LINEAR_TO_LINEAR="LinearToLinear",aE.LINEAR_TO_sRGB="LinearTosRGB",aE.sRGB_TO_LINEAR="sRGBToLinear";const oE={[aE.LINEAR_TO_sRGB]:iE,[aE.sRGB_TO_LINEAR]:nE},lE=(e,t)=>Kw(new aE(sE(t,_v),Kw(e))),cE=Qw(aE,aE.LINEAR_TO_sRGB),uE=Qw(aE,aE.sRGB_TO_LINEAR);Tw("linearTosRGB",cE),Tw("sRGBToLinear",uE),Tw("linearToColorSpace",((e,t)=>Kw(new aE(sE(_v,t),Kw(e))))),Tw("colorSpaceToLinear",lE),sw("ColorSpaceNode",aE);class dE extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void"),this.snippet=e}generate(e,t){const n=this.getNodeType(e),i=this.snippet;if("void"!==n)return e.format("( ".concat(i," )"),n,t);e.addLineFlowCode(i)}}const hE=Qw(dE);sw("ExpressionNode",dE);class pE extends CN{constructor(e){super(0),this.textureNode=e,this.updateType=Dg}get texture(){return this.textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&void 0!==n.width){const{width:e,height:t}=n;this.value=Math.log2(Math.max(e,t))}}}const fE=Qw(pE);sw("MaxMipLevelNode",pE);class mE extends CN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.compareNode=null,this.depthNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Lg,this.referenceNode=null,this._value=e,this.setUpdateMatrix(null===t)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return!0===this.value.isDepthTexture?"float":"vec4"}getInputType(){return"texture"}getDefaultUV(){return AN(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){const t=this.value;return MN(t.matrix).mul(hS(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Dg:Lg,this}setupUV(e,t){const n=this.value;return!e.isFlipY()||!0!==n.isRenderTargetTexture&&!0!==n.isFramebufferTexture&&!0!==n.isDepthTexture||(t=t.setY(t.y.oneMinus())),t}setup(e){const t=e.getNodeProperties(this);let n=this.uvNode;null!==n&&!0!==e.context.forceUVContext||!e.context.getUV||(n=e.context.getUV(this)),n||(n=this.getDefaultUV()),!0===this.updateMatrix&&(n=this.getTransformedUV(n)),n=this.setupUV(e,n);let i=this.levelNode;null===i&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),t.uvNode=n,t.levelNode=i,t.compareNode=this.compareNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,!0===this.sampler?"vec2":"ivec2")}generateSnippet(e,t,n,i,r,s){const a=this.value;let o;return o=i?e.generateTextureLevel(a,t,n,i,r):s?e.generateTextureCompare(a,t,n,s,r):!1===this.sampler?e.generateTextureLoad(a,t,n,r):e.generateTexture(a,t,n,r),o}generate(e,t){const n=e.getNodeProperties(this),i=this.value;if(!i||!0!==i.isTexture)throw new Error("TextureNode: Need a three.js texture.");const r=super.generate(e,"property");if("sampler"===t)return r+"_sampler";if(e.isReference(t))return r;{const s=e.getDataFromNode(this);let a=s.propertyName;if(void 0===a){const{uvNode:t,levelNode:i,compareNode:o,depthNode:l}=n,c=this.generateUV(e,t),u=i?i.build(e,"float"):null,d=l?l.build(e,"int"):null,h=o?o.build(e,"float"):null,p=e.getVarFromNode(this);a=e.getPropertyName(p);const f=this.generateSnippet(e,r,c,u,d,h);e.addLineFlowCode("".concat(a," = ").concat(f)),!1!==e.context.tempWrite&&(s.snippet=f,s.propertyName=a)}let o=a;const l=this.getNodeType(e);return e.needsColorSpaceToLinear(i)&&(o=lE(hE(o,l),i.colorSpace).setup(e).build(e,l)),e.format(o,l,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const t=this.clone();return t.uvNode=e,t.referenceNode=this,Kw(t)}blur(e){const t=this.clone();return t.levelNode=e.mul(fE(t)),t.referenceNode=this,Kw(t)}level(e){const t=this.clone();return t.levelNode=e,t.referenceNode=this,t}size(e){return PN(this,e)}compare(e){const t=this.clone();return t.compareNode=Kw(e),t.referenceNode=this,Kw(t)}depth(e){const t=this.clone();return t.depthNode=Kw(e),t.referenceNode=this,Kw(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value]}update(){const e=this.value;!0===e.matrixAutoUpdate&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e}}const gE=mE,vE=Qw(mE),yE=function(){return vE(...arguments).setSampler(!1)};Tw("texture",vE),sw("TextureNode",mE);class _E extends CN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getInputType(){return"buffer"}}const xE=_E,bE=(e,t,n)=>Kw(new _E(e,t,n));sw("BufferNode",_E);class wE extends cw{constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=super.generate(e),n=this.getNodeType();return e.format(t,"vec4",n)}}class SE extends xE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null,"vec4"),this.array=e,this.elementType=t,this._elementType=null,this._elementLength=0,this.updateType=jg,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:t}=this,n=this.getElementLength(),i=this.getElementType();if(1===n)for(let r=0;r<e.length;r++){t[4*r]=e[r]}else if("color"===i)for(let r=0;r<e.length;r++){const n=4*r,i=e[r];t[n]=i.r,t[n+1]=i.g,t[n+2]=i.b||0}else for(let r=0;r<e.length;r++){const n=4*r,i=e[r];t[n]=i.x,t[n+1]=i.y,t[n+2]=i.z||0,t[n+3]=i.w||0}}setup(e){const t=this.array.length;return this._elementType=null===this.elementType?Qb(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType),this.value=new Float32Array(4*t),this.bufferCount=t,super.setup(e)}element(e){return Kw(new wE(this,Kw(e)))}}const NE=(e,t)=>Kw(new SE(e,t));sw("UniformsNode",SE);class TE extends cw{constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,n,i)}}class EE extends rw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.property=e,this.uniformType=t,this.object=n,this.count=i,this.properties=e.split("."),this.reference=null,this.node=null,this.updateType=Ug}element(e){return Kw(new TE(this,Kw(e)))}setNodeType(e){let t=null;t=null!==this.count?bE(null,e,this.count):Array.isArray(this.getValueFromReference())?NE(null,e):"texture"===e?vE(null):MN(null,e),this.node=t}getNodeType(e){return this.node.getNodeType(e)}getValueFromReference(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.reference;const{properties:t}=this;let n=e[t[0]];for(let i=1;i<t.length;i++)n=n[t[i]];return n}updateReference(e){return this.reference=null!==this.object?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){null===this.node&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const CE=EE,ME=(e,t,n)=>Kw(new EE(e,t,n));sw("ReferenceNode",EE);class IE extends CE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,n),this.material=n}updateReference(e){return this.reference=null!==this.material?this.material:e.material,this.reference}}sw("MaterialReferenceNode",IE);class AE extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AE.VIEW_MATRIX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.scope=e,this.object3d=t,this.updateType=Ug,this._uniformNode=new CN(null)}getNodeType(){const e=this.scope;return e===AE.WORLD_MATRIX||e===AE.VIEW_MATRIX?"mat4":e===AE.NORMAL_MATRIX?"mat3":e===AE.POSITION||e===AE.VIEW_POSITION||e===AE.DIRECTION||e===AE.SCALE?"vec3":void 0}update(e){const t=this.object3d,n=this._uniformNode,i=this.scope;if(i===AE.VIEW_MATRIX)n.value=t.modelViewMatrix;else if(i===AE.NORMAL_MATRIX)n.value=t.normalMatrix;else if(i===AE.WORLD_MATRIX)n.value=t.matrixWorld;else if(i===AE.POSITION)n.value=n.value||new fy,n.value.setFromMatrixPosition(t.matrixWorld);else if(i===AE.SCALE)n.value=n.value||new fy,n.value.setFromMatrixScale(t.matrixWorld);else if(i===AE.DIRECTION)n.value=n.value||new fy,t.getWorldDirection(n.value);else if(i===AE.VIEW_POSITION){const i=e.camera;n.value=n.value||new fy,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(i.matrixWorldInverse)}}generate(e){const t=this.scope;return t===AE.WORLD_MATRIX||t===AE.VIEW_MATRIX?this._uniformNode.nodeType="mat4":t===AE.NORMAL_MATRIX?this._uniformNode.nodeType="mat3":t!==AE.POSITION&&t!==AE.VIEW_POSITION&&t!==AE.DIRECTION&&t!==AE.SCALE||(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}AE.VIEW_MATRIX="viewMatrix",AE.NORMAL_MATRIX="normalMatrix",AE.WORLD_MATRIX="worldMatrix",AE.POSITION="position",AE.SCALE="scale",AE.VIEW_POSITION="viewPosition",AE.DIRECTION="direction";const RE=AE,PE=(Qw(AE,AE.DIRECTION),Qw(AE,AE.VIEW_MATRIX),Qw(AE,AE.NORMAL_MATRIX),Qw(AE,AE.WORLD_MATRIX),Qw(AE,AE.POSITION)),kE=(Qw(AE,AE.SCALE),Qw(AE,AE.VIEW_POSITION));sw("Object3DNode",AE);class OE extends RE{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:OE.POSITION),this.updateType=jg}getNodeType(e){const t=this.scope;return t===OE.PROJECTION_MATRIX||t===OE.PROJECTION_MATRIX_INVERSE?"mat4":t===OE.NEAR||t===OE.FAR||t===OE.LOG_DEPTH?"float":super.getNodeType(e)}update(e){const t=e.camera,n=this._uniformNode,i=this.scope;i===OE.VIEW_MATRIX?n.value=t.matrixWorldInverse:i===OE.PROJECTION_MATRIX?n.value=t.projectionMatrix:i===OE.PROJECTION_MATRIX_INVERSE?n.value=t.projectionMatrixInverse:i===OE.NEAR?n.value=t.near:i===OE.FAR?n.value=t.far:i===OE.LOG_DEPTH?n.value=2/(Math.log(t.far+1)/Math.LN2):(this.object3d=t,super.update(e))}generate(e){const t=this.scope;return t===OE.PROJECTION_MATRIX||t===OE.PROJECTION_MATRIX_INVERSE?this._uniformNode.nodeType="mat4":t!==OE.NEAR&&t!==OE.FAR&&t!==OE.LOG_DEPTH||(this._uniformNode.nodeType="float"),super.generate(e)}}OE.PROJECTION_MATRIX="projectionMatrix",OE.PROJECTION_MATRIX_INVERSE="projectionMatrixInverse",OE.NEAR="near",OE.FAR="far",OE.LOG_DEPTH="logDepth";const LE=Zw(OE,OE.PROJECTION_MATRIX),DE=(Zw(OE,OE.PROJECTION_MATRIX_INVERSE),Zw(OE,OE.NEAR)),jE=Zw(OE,OE.FAR),UE=Zw(OE,OE.LOG_DEPTH),zE=Zw(OE,OE.VIEW_MATRIX);Zw(OE,OE.NORMAL_MATRIX),Zw(OE,OE.WORLD_MATRIX),Zw(OE,OE.POSITION);sw("CameraNode",OE);class FE extends RE{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:FE.VIEW_MATRIX)}update(e){this.object3d=e.object,super.update(e)}}Zw(FE,FE.DIRECTION);const VE=Zw(FE,FE.VIEW_MATRIX).label("modelViewMatrix").temp("ModelViewMatrix"),BE=Zw(FE,FE.NORMAL_MATRIX),HE=Zw(FE,FE.WORLD_MATRIX);Zw(FE,FE.POSITION),Zw(FE,FE.SCALE),Zw(FE,FE.VIEW_POSITION);sw("ModelNode",FE);class WE extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WE.LOCAL;super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return"normal-".concat(this.scope)}generate(e){const t=this.scope;let n=null;if(t===WE.GEOMETRY){n=!1===e.hasGeometryAttribute("normal")?hS(0,1,0):US("normal","vec3")}else if(t===WE.LOCAL)n=LS(qE);else if(t===WE.VIEW){const e=BE.mul(GE);n=vT(LS(e))}else if(t===WE.WORLD){const e=YE.transformDirection(zE);n=vT(LS(e))}return n.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}WE.GEOMETRY="geometry",WE.LOCAL="local",WE.VIEW="view",WE.WORLD="world";const qE=Zw(WE,WE.GEOMETRY),GE=Zw(WE,WE.LOCAL).temp("Normal"),YE=Zw(WE,WE.VIEW),XE=Zw(WE,WE.WORLD),KE=nN("vec3","TransformedNormalView"),JE=KE.transformDirection(zE).normalize(),$E=nN("vec3","TransformedClearcoatNormalView");sw("NormalNode",WE);const QE=new Map;class ZE extends rw{constructor(e){super(),this.scope=e}getCache(e,t){let n=QE.get(e);return void 0===n&&(n=((e,t,n)=>Kw(new IE(e,t,n)))(e,t),QE.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache("map"===e?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let i=null;if(n===ZE.COLOR){const e=this.getColor(n);i=t.map&&!0===t.map.isTexture?e.mul(this.getTexture("map")):e}else if(n===ZE.OPACITY){const e=this.getFloat(n);i=t.alphaMap&&!0===t.alphaMap.isTexture?e.mul(this.getTexture("alpha")):e}else if(n===ZE.SPECULAR_STRENGTH)i=t.specularMap&&!0===t.specularMap.isTexture?this.getTexture(n).r:rS(1);else if(n===ZE.ROUGHNESS){const e=this.getFloat(n);i=t.roughnessMap&&!0===t.roughnessMap.isTexture?e.mul(this.getTexture(n).g):e}else if(n===ZE.METALNESS){const e=this.getFloat(n);i=t.metalnessMap&&!0===t.metalnessMap.isTexture?e.mul(this.getTexture(n).b):e}else if(n===ZE.EMISSIVE){const e=this.getColor(n);i=t.emissiveMap&&!0===t.emissiveMap.isTexture?e.mul(this.getTexture(n)):e}else if(n===ZE.NORMAL)i=t.normalMap?this.getTexture("normal").normalMap(this.getCache("normalScale","vec2")):t.bumpMap?this.getTexture("bump").r.bumpMap(this.getFloat("bumpScale")):YE;else if(n===ZE.CLEARCOAT){const e=this.getFloat(n);i=t.clearcoatMap&&!0===t.clearcoatMap.isTexture?e.mul(this.getTexture(n).r):e}else if(n===ZE.CLEARCOAT_ROUGHNESS){const e=this.getFloat(n);i=t.clearcoatRoughnessMap&&!0===t.clearcoatRoughnessMap.isTexture?e.mul(this.getTexture(n).r):e}else if(n===ZE.CLEARCOAT_NORMAL)i=t.clearcoatNormalMap?this.getTexture(n).normalMap(this.getCache(n+"Scale","vec2")):YE;else if(n===ZE.SHEEN){const e=this.getColor("sheenColor").mul(this.getFloat("sheen"));i=t.sheenColorMap&&!0===t.sheenColorMap.isTexture?e.mul(this.getTexture("sheenColor").rgb):e}else if(n===ZE.SHEEN_ROUGHNESS){const e=this.getFloat(n);i=t.sheenRoughnessMap&&!0===t.sheenRoughnessMap.isTexture?e.mul(this.getTexture(n).a):e,i=i.clamp(.07,1)}else if(n===ZE.IRIDESCENCE_THICKNESS){const e=ME("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const r=ME("0","float",t.iridescenceThicknessRange);i=e.sub(r).mul(this.getTexture(n).g).add(r)}else i=e}else{const t=this.getNodeType(e);i=this.getCache(n,t)}return i}}ZE.ALPHA_TEST="alphaTest",ZE.COLOR="color",ZE.OPACITY="opacity",ZE.SHININESS="shininess",ZE.SPECULAR_COLOR="specular",ZE.SPECULAR_STRENGTH="specularStrength",ZE.REFLECTIVITY="reflectivity",ZE.ROUGHNESS="roughness",ZE.METALNESS="metalness",ZE.NORMAL="normal",ZE.CLEARCOAT="clearcoat",ZE.CLEARCOAT_ROUGHNESS="clearcoatRoughness",ZE.CLEARCOAT_NORMAL="clearcoatNormal",ZE.EMISSIVE="emissive",ZE.ROTATION="rotation",ZE.SHEEN="sheen",ZE.SHEEN_ROUGHNESS="sheenRoughness",ZE.IRIDESCENCE="iridescence",ZE.IRIDESCENCE_IOR="iridescenceIOR",ZE.IRIDESCENCE_THICKNESS="iridescenceThickness",ZE.LINE_SCALE="scale",ZE.LINE_DASH_SIZE="dashSize",ZE.LINE_GAP_SIZE="gapSize",ZE.LINE_WIDTH="linewidth",ZE.LINE_DASH_OFFSET="dashOffset",ZE.POINT_WIDTH="pointWidth";const eC=Zw(ZE,ZE.ALPHA_TEST),tC=Zw(ZE,ZE.COLOR),nC=Zw(ZE,ZE.SHININESS),iC=Zw(ZE,ZE.EMISSIVE),rC=Zw(ZE,ZE.OPACITY),sC=Zw(ZE,ZE.SPECULAR_COLOR),aC=Zw(ZE,ZE.SPECULAR_STRENGTH),oC=(Zw(ZE,ZE.REFLECTIVITY),Zw(ZE,ZE.ROUGHNESS)),lC=Zw(ZE,ZE.METALNESS),cC=Zw(ZE,ZE.NORMAL),uC=Zw(ZE,ZE.CLEARCOAT),dC=Zw(ZE,ZE.CLEARCOAT_ROUGHNESS),hC=Zw(ZE,ZE.CLEARCOAT_NORMAL),pC=Zw(ZE,ZE.ROTATION),fC=Zw(ZE,ZE.SHEEN),mC=Zw(ZE,ZE.SHEEN_ROUGHNESS),gC=Zw(ZE,ZE.IRIDESCENCE),vC=Zw(ZE,ZE.IRIDESCENCE_IOR),yC=Zw(ZE,ZE.IRIDESCENCE_THICKNESS),_C=Zw(ZE,ZE.LINE_SCALE),xC=Zw(ZE,ZE.LINE_DASH_SIZE),bC=Zw(ZE,ZE.LINE_GAP_SIZE),wC=Zw(ZE,ZE.LINE_WIDTH),SC=Zw(ZE,ZE.LINE_DASH_OFFSET),NC=Zw(ZE,ZE.POINT_WIDTH);sw("MaterialNode",ZE);class TC extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TC.LOCAL;super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return"position-".concat(this.scope)}generate(e){const t=this.scope;let n=null;if(t===TC.GEOMETRY)n=US("position","vec3");else if(t===TC.LOCAL)n=LS(EC);else if(t===TC.WORLD){const e=HE.mul(CC);n=LS(e)}else if(t===TC.VIEW){const e=VE.mul(CC);n=LS(e)}else if(t===TC.VIEW_DIRECTION){const e=AC.negate();n=vT(LS(e))}else if(t===TC.WORLD_DIRECTION){const e=CC.transformDirection(HE);n=vT(LS(e))}return n.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}TC.GEOMETRY="geometry",TC.LOCAL="local",TC.WORLD="world",TC.WORLD_DIRECTION="worldDirection",TC.VIEW="view",TC.VIEW_DIRECTION="viewDirection";const EC=Zw(TC,TC.GEOMETRY),CC=Zw(TC,TC.LOCAL).temp("Position"),MC=Zw(TC,TC.WORLD),IC=Zw(TC,TC.WORLD_DIRECTION),AC=Zw(TC,TC.VIEW),RC=Zw(TC,TC.VIEW_DIRECTION);sw("PositionNode",TC);class PC extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super("vec4"),this.positionNode=e}setup(e){if("fragment"===e.shaderStage)return LS(e.context.mvp);const t=this.positionNode||CC;return LE.mul(VE).mul(t)}}const kC=Qw(PC);sw("ModelViewProjectionNode",PC);class OC extends xw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=i,this.usage=Cv,this.instanced=!1,this.attribute=null,e&&!0===e.isBufferAttribute&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getNodeType(e){return null===this.bufferType&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(null!==this.attribute)return;const t=this.getNodeType(e),n=this.value,i=e.getTypeLength(t),r=this.bufferStride||i,s=this.bufferOffset,a=!0===n.isInterleavedBuffer?n:new Fx(n,r),o=new Bx(a,i,s);a.setUsage(this.usage),this.attribute=o,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(n);let r=null;if("vertex"===e.shaderStage||"compute"===e.shaderStage)this.name=i,r=i;else{r=LS(this).build(e,t)}return r}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this}setInstanced(e){return this.instanced=e,this}}const LC=(e,t,n,i)=>Kw(new OC(e,t,n,i)),DC=(e,t,n,i)=>LC(e,t,n,i).setInstanced(!0),jC=(e,t,n,i)=>((e,t,n,i)=>LC(e,t,n,i).setUsage(Mv))(e,t,n,i).setInstanced(!0);Tw("toAttribute",(e=>LC(e.value))),sw("BufferAttributeNode",OC);class UC extends rw{constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null,this.instanceColorNode=null}setup(){let e=this.instanceMatrixNode;const t=this.instanceMesh;if(null===e){const n=t.instanceMatrix,i=new Kb(n.array,16,1),r=n.usage===Mv?jC:DC,s=[r(i,"vec4",16,0),r(i,"vec4",16,4),r(i,"vec4",16,8),r(i,"vec4",16,12)];e=MS(...s),this.instanceMatrixNode=e}const n=t.instanceColor;if(n&&null===this.instanceColorNode){const e=new Wx(n.array,3),t=n.usage===Mv?jC:DC;this.instanceColorNode=hS(t(e,"vec3",3,0))}const i=e.mul(CC).xyz,r=NS(e[0].xyz,e[1].xyz,e[2].xyz),s=GE.div(hS(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2]))),a=r.mul(s).xyz;CC.assign(i),GE.assign(a),null!==this.instanceColorNode&&iN("vec3","vInstanceColor").assign(this.instanceColorNode)}}const zC=Qw(UC);sw("InstanceNode",UC);class FC extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FC.LOCAL;super(),this.scope=e}getHash(){return"tangent-".concat(this.scope)}getNodeType(){return this.scope===FC.GEOMETRY?"vec4":"vec3"}generate(e){const t=this.scope;let n=null;if(t===FC.GEOMETRY)n=US("tangent","vec4"),!1===e.geometry.hasAttribute("tangent")&&e.geometry.computeTangents();else if(t===FC.LOCAL)n=LS(VC.xyz);else if(t===FC.VIEW){const e=VE.mul(gS(BC,0)).xyz;n=vT(LS(e))}else if(t===FC.WORLD){const e=HC.transformDirection(zE);n=vT(LS(e))}return n.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}FC.GEOMETRY="geometry",FC.LOCAL="local",FC.VIEW="view",FC.WORLD="world";const VC=Zw(FC,FC.GEOMETRY),BC=Zw(FC,FC.LOCAL),HC=Zw(FC,FC.VIEW),WC=Zw(FC,FC.WORLD),qC=ZS(HC,"TransformedTangentView");vT(qC.transformDirection(zE));sw("TangentNode",FC);class GC extends rw{constructor(e){super("void"),this.batchMesh=e,this.instanceColorNode=null,this.batchingIdNode=null}setup(e){null===this.batchingIdNode&&(this.batchingIdNode=US("batchId"));const t=this.batchMesh._matricesTexture,n=PN(yE(t),0),i=rS(sS(this.batchingIdNode)).mul(4).toVar(),r=sS(i.mod(n)),s=sS(i).div(sS(n)),a=MS(yE(t,cS(r,s)),yE(t,cS(r.add(1),s)),yE(t,cS(r.add(2),s)),yE(t,cS(r.add(3),s))),o=NS(a[0].xyz,a[1].xyz,a[2].xyz);CC.assign(a.mul(CC));const l=GE.div(hS(o[0].dot(o[0]),o[1].dot(o[1]),o[2].dot(o[2]))),c=o.mul(l).xyz;GE.assign(c),e.hasGeometryAttribute("tangent")&&BC.mulAssign(o)}}const YC=Qw(GC);sw("batch",GC);class XC extends rw{constructor(e){let t,n,i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super("void"),this.skinnedMesh=e,this.useReference=r,this.updateType=Ug,this.skinIndexNode=US("skinIndex","uvec4"),this.skinWeightNode=US("skinWeight","vec4"),r?(t=ME("bindMatrix","mat4"),n=ME("bindMatrixInverse","mat4"),i=((e,t,n,i)=>Kw(new EE(e,t,i,n)))("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(t=MN(e.bindMatrix,"mat4"),n=MN(e.bindMatrixInverse,"mat4"),i=bE(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=t,this.bindMatrixInverseNode=n,this.boneMatricesNode=i}setup(e){const{skinIndexNode:t,skinWeightNode:n,bindMatrixNode:i,bindMatrixInverseNode:r,boneMatricesNode:s}=this,a=s.element(t.x),o=s.element(t.y),l=s.element(t.z),c=s.element(t.w),u=i.mul(CC),d=ON(a.mul(n.x).mul(u),o.mul(n.y).mul(u),l.mul(n.z).mul(u),c.mul(n.w).mul(u)),h=r.mul(d).xyz;let p=ON(n.x.mul(a),n.y.mul(o),n.z.mul(l),n.w.mul(c));p=r.mul(p).mul(i);const f=p.transformDirection(GE).xyz;CC.assign(h),GE.assign(f),e.hasGeometryAttribute("tangent")&&BC.assign(f)}generate(e,t){if("void"!==t)return CC.build(e,t)}update(e){(this.useReference?e.object:this.skinnedMesh).skeleton.update()}}sw("SkinningNode",XC);class KC extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.params=e}getVarName(e){return String.fromCharCode("i".charCodeAt()+e)}getProperties(e){const t=e.getNodeProperties(this);if(void 0!==t.stackNode)return t;const n={};for(let i=0,r=this.params.length-1;i<r;i++){const e=this.params[i],t=!0!==e.isNode&&e.name||this.getVarName(i),r=!0!==e.isNode&&e.type||"int";n[t]=hE(t,r)}return t.returnsNode=this.params[this.params.length-1](n,e.addStack(),e),t.stackNode=e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,i=t.stackNode;for(let a=0,o=n.length-1;a<o;a++){const t=n[a];let i=null,r=null,s=null,o=null,l=null,c=null;t.isNode?(o="int",s=this.getVarName(a),i="0",r=t.build(e,o),l="<"):(o=t.type||"int",s=t.name||this.getVarName(a),i=t.start,r=t.end,l=t.condition,c=t.update,"number"===typeof i?i=i.toString():i&&i.isNode&&(i=i.build(e,o)),"number"===typeof r?r=r.toString():r&&r.isNode&&(r=r.build(e,o)),void 0!==i&&void 0===r?(i+=" - 1",r="0",l=">="):void 0!==r&&void 0===i&&(i="0",l="<"),void 0===l&&(l=Number(i)>Number(r)?">=":"<"));const u={start:i,end:r,condition:l},d=u.start,h=u.end;let p="",f="",m="";c||(c="int"===o||"uint"===o?l.includes("<")?"++":"--":l.includes("<")?"+= 1.":"-= 1."),p+=e.getVar(o,s)+" = "+d,f+=s+" "+l+" "+h,m+=s+" "+c;const g="for ( ".concat(p,"; ").concat(f,"; ").concat(m," )");e.addFlowCode((0===a?"\n":"")+e.tab+g+" {\n\n").addFlowTab()}const r=YS(i,{tempWrite:!1}).build(e,"void"),s=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode("\n"+e.tab+r);for(let a=0,o=this.params.length-1;a<o;a++)e.addFlowCode((0===a?"":e.tab)+"}\n\n").removeFlowTab();return e.addFlowTab(),s}}const JC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kw(new KC($w(t,"int"))).append()};Tw("loop",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return FS(e,JC(...n))})),sw("LoopNode",KC);const $C=new WeakMap,QC=new uy,ZC=eS((e=>{let{bufferMap:t,influence:n,stride:i,width:r,depth:s,offset:a}=e;const o=sS(KS).mul(i).add(a),l=o.div(r),c=o.sub(l.mul(r));return yE(t,cS(c,l)).depth(s).mul(n)}));class eM extends rw{constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=MN(1),this.updateType=Ug}setup(e){const{geometry:t}=e,n=void 0!==t.morphAttributes.position,i=void 0!==t.morphAttributes.normal,r=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,s=void 0!==r?r.length:0,{texture:a,stride:o,size:l}=function(e){const t=void 0!==e.morphAttributes.position,n=void 0!==e.morphAttributes.normal,i=void 0!==e.morphAttributes.color,r=e.morphAttributes.position||e.morphAttributes.normal||e.morphAttributes.color,s=void 0!==r?r.length:0;let a=$C.get(e);if(void 0===a||a.count!==s){void 0!==a&&a.texture.dispose();const o=e.morphAttributes.position||[],l=e.morphAttributes.normal||[],c=e.morphAttributes.color||[];let u=0;!0===t&&(u=1),!0===n&&(u=2),!0===i&&(u=3);let d=e.attributes.position.count*u,h=1;const p=4096;d>p&&(h=Math.ceil(d/p),d=p);const f=new Float32Array(d*h*4*s),m=new hy(f,d,h,s);m.type=sv,m.needsUpdate=!0;const g=4*u;for(let y=0;y<s;y++){const _=o[y],x=l[y],b=c[y],w=d*h*4*y;for(let S=0;S<_.count;S++){const N=S*g;!0===t&&(QC.fromBufferAttribute(_,S),f[w+N+0]=QC.x,f[w+N+1]=QC.y,f[w+N+2]=QC.z,f[w+N+3]=0),!0===n&&(QC.fromBufferAttribute(x,S),f[w+N+4]=QC.x,f[w+N+5]=QC.y,f[w+N+6]=QC.z,f[w+N+7]=0),!0===i&&(QC.fromBufferAttribute(b,S),f[w+N+8]=QC.x,f[w+N+9]=QC.y,f[w+N+10]=QC.z,f[w+N+11]=4===b.itemSize?QC.w:1)}}function v(){m.dispose(),$C.delete(e),e.removeEventListener("dispose",v)}a={count:s,texture:m,stride:u,size:new Hv(d,h)},$C.set(e,a),e.addEventListener("dispose",v)}return a}(t);!0===n&&CC.mulAssign(this.morphBaseInfluence),!0===i&&GE.mulAssign(this.morphBaseInfluence);const c=sS(l.width);JC(s,(e=>{let{i:t}=e;const r=rS(0).toVar();!0===this.mesh.isInstancedMesh&&null!==this.mesh.morphTexture&&void 0!==this.mesh.morphTexture?r.assign(yE(this.mesh.morphTexture,cS(sS(t).add(1),sS(JS))).r):r.assign(ME("morphTargetInfluences","float").element(t).toVar()),!0===n&&CC.addAssign(ZC({bufferMap:a,influence:r,stride:o,width:c,depth:t,offset:sS(0)})),!0===i&&GE.addAssign(ZC({bufferMap:a,influence:r,stride:o,width:c,depth:t,offset:sS(1)}))}))}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce(((e,t)=>e+t),0)}}const tM=Qw(eM);sw("MorphNode",eM);class nM extends rw{constructor(){super("vec3")}getHash(){return"reflectVector"}setup(){return RC.negate().reflect(KE).transformDirection(zE)}}const iM=Zw(nM);sw("ReflectVectorNode",nM);class rM extends gE{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){return iM}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.renderer.coordinateSystem!==Av&&n.isRenderTargetTexture?t:hS(t.x.negate(),t.yz)}generateUV(e,t){return t.build(e,"vec3")}}const sM=Qw(rM);Tw("cubeTexture",sM),sw("CubeTextureNode",rM);class aM extends rw{constructor(){super("vec3")}generate(){console.warn("Abstract function.")}}const oM=aM;sw("LightingNode",aM);let lM=null;class cM extends oM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.updateType=Dg,this.light=e,this.rtt=null,this.shadowNode=null,this.color=new k_,this._defaultColorNode=MN(this.color),this.colorNode=this._defaultColorNode,this.isAnalyticLightNode=!0}getCacheKey(){return super.getCacheKey()+"-"+this.light.id+"-"+(this.light.castShadow?"1":"0")}getHash(){return this.light.uuid}setupShadow(e){let t=this.shadowNode;if(null===t){null===lM&&(lM=e.createNodeMaterial(),lM.fragmentNode=gS(0,0,0,1),lM.isShadowNodeMaterial=!0);const n=this.light.shadow,i=e.createRenderTarget(n.mapSize.width,n.mapSize.height),r=new Dx;r.minFilter=ev,r.magFilter=ev,r.image.width=n.mapSize.width,r.image.height=n.mapSize.height,r.compareFunction=513,i.depthTexture=r,n.camera.updateProjectionMatrix();const s=ME("bias","float",n),a=ME("normalBias","float",n);let o=MN(n.matrix).mul(MC.add(XE.mul(a)));o=o.xyz.div(o.w);const l=o.x.greaterThanEqual(0).and(o.x.lessThanEqual(1)).and(o.y.greaterThanEqual(0)).and(o.y.lessThanEqual(1)).and(o.z.lessThanEqual(1));let c=o.z.add(s);e.renderer.coordinateSystem===Av&&(c=c.mul(2).sub(1)),o=hS(o.x,o.y.oneMinus(),c);const u=(e,t,n)=>vE(e,t).compare(n);t=u(r,o.xy,o.z);const d=vE(i.texture,o);this.rtt=i,this.colorNode=this.colorNode.mul(l.mix(1,t.mix(d.a.mix(1,d),1))),this.shadowNode=t,this.updateBeforeType=jg}}setup(e){this.light.castShadow?this.setupShadow(e):null!==this.shadowNode&&this.disposeShadow()}updateShadow(e){const{rtt:t,light:n}=this,{renderer:i,scene:r}=e,s=r.overrideMaterial;r.overrideMaterial=lM,t.setSize(n.shadow.mapSize.width,n.shadow.mapSize.height),n.shadow.updateMatrices(n);const a=i.getRenderTarget(),o=i.getRenderObjectFunction();i.setRenderObjectFunction((function(e){if(!0===e.castShadow){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.renderObject(e,...n)}})),i.setRenderTarget(t),i.render(r,n.shadow.camera),i.setRenderTarget(a),i.setRenderObjectFunction(o),r.overrideMaterial=s}disposeShadow(){this.rtt.dispose(),this.shadowNode=null,this.rtt=null,this.colorNode=this._defaultColorNode}updateBefore(e){const{light:t}=this;t.castShadow&&this.updateShadow(e)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const uM=cM;sw("AnalyticLightNode",cM);const dM=new WeakMap;class hM extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("vec3"),this.totalDiffuseNode=hS().temp("totalDiffuse"),this.totalSpecularNode=hS().temp("totalSpecular"),this.outgoingLightNode=hS().temp("outgoingLight"),this.lightNodes=e,this._hash=null}get hasLight(){return this.lightNodes.length>0}getHash(){if(null===this._hash){const e=[];for(const t of this.lightNodes)e.push(t.getHash());this._hash="lights-"+e.join(",")}return this._hash}setup(e){const t=e.context,n=t.lightingModel;let i=this.outgoingLightNode;if(n){const{lightNodes:r,totalDiffuseNode:s,totalSpecularNode:a}=this;t.outgoingLight=i;const o=e.addStack();n.start(t,o,e);for(const t of r)t.build(e);n.indirectDiffuse(t,o,e),n.indirectSpecular(t,o,e),n.ambientOcclusion(t,o,e);const{backdrop:l,backdropAlpha:c}=t,{directDiffuse:u,directSpecular:d,indirectDiffuse:h,indirectSpecular:p}=t.reflectedLight;let f=u.add(h);null!==l&&(f=hS(null!==c?c.mix(f,l):l)),s.assign(f),a.assign(d.add(p)),i.assign(s.add(a)),n.finish(t,o,e),i=i.bypass(e.removeStack())}return i}_getLightNodeById(e){for(const t of this.lightNodes)if(t.isAnalyticLightNode&&t.light.id===e)return t;return null}fromLights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];e=(e=>e.sort(((e,t)=>e.id-t.id)))(e);for(const n of e){let e=this._getLightNodeById(n.id);if(null===e){const t=n.constructor,i=dM.has(t)?dM.get(t):uM;e=Kw(new i(n))}t.push(e)}return this.lightNodes=t,this._hash=null,this}}const pM=Qw(hM);function fM(e,t){if(dM.has(e))console.warn("Redefinition of light node ".concat(t.type));else{if("function"!==typeof e)throw new Error("Light ".concat(e.name," is not a class"));if("function"!==typeof t||!t.type)throw new Error("Light node ".concat(t.type," is not a class"));dM.set(e,t)}}class mM extends oM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.aoNode=e}setup(e){const t=this.aoNode.x.sub(1).mul(1).add(1);e.context.ambientOcclusion.mulAssign(t)}}const gM=mM;sw("AONode",mM);class vM extends GS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=i,this._context=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n={directDiffuse:hS().temp("directDiffuse"),directSpecular:hS().temp("directSpecular"),indirectDiffuse:hS().temp("indirectDiffuse"),indirectSpecular:hS().temp("indirectSpecular")};return{radiance:hS().temp("radiance"),irradiance:hS().temp("irradiance"),iblIrradiance:hS().temp("iblIrradiance"),ambientOcclusion:rS(1).temp("ambientOcclusion"),reflectedLight:n,backdrop:e,backdropAlpha:t}}setup(e){return this.context=this._context||(this._context=this.getContext()),this.context.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const yM=Qw(vM);Tw("lightingContext",yM),sw("LightingContextNode",vM);class _M extends rw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const t=this.ifNode.getNodeType(e);if(null!==this.elseNode){const n=this.elseNode.getNodeType(e);if(e.getTypeLength(n)>e.getTypeLength(t))return n}return t}generate(e,t){const n=this.getNodeType(e),i={tempWrite:!1},r=e.getDataFromNode(this);if(void 0!==r.nodeProperty)return r.nodeProperty;const{ifNode:s,elseNode:a}=this,o="void"!==t,l=o?nN(n).build(e):"";r.nodeProperty=l;const c=YS(this.condNode).build(e,"bool");e.addFlowCode("\n".concat(e.tab,"if ( ").concat(c," ) {\n\n")).addFlowTab();let u=YS(s,i).build(e,n);if(u&&(u=o?l+" = "+u+";":"return "+u+";"),e.removeFlowTab().addFlowCode(e.tab+"\t"+u+"\n\n"+e.tab+"}"),null!==a){e.addFlowCode(" else {\n\n").addFlowTab();let t=YS(a,i).build(e,n);t&&(t=o?l+" = "+t+";":"return "+t+";"),e.removeFlowTab().addFlowCode(e.tab+"\t"+t+"\n\n"+e.tab+"}\n\n")}else e.addFlowCode("\n\n");return e.format(l,n,t)}}const xM=_M,bM=Qw(_M);Tw("cond",bM),sw("CondNode",_M);const wM=rS(1),SM=rS(-2),NM=rS(.8),TM=rS(-1),EM=rS(.4),CM=rS(2),MM=rS(.305),IM=rS(3),AM=rS(.21),RM=rS(4),PM=rS(4),kM=rS(16),OM=eS((e=>{let[t]=e;const n=hS(TT(t)).toVar(),i=rS(-1).toVar();return nS(n.x.greaterThan(n.z),(()=>{nS(n.x.greaterThan(n.y),(()=>{i.assign(bM(t.x.greaterThan(0),0,3))})).else((()=>{i.assign(bM(t.y.greaterThan(0),1,4))}))})).else((()=>{nS(n.z.greaterThan(n.y),(()=>{i.assign(bM(t.z.greaterThan(0),2,5))})).else((()=>{i.assign(bM(t.y.greaterThan(0),1,4))}))})),i})).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),LM=eS((e=>{let[t,n]=e;const i=lS().toVar();return nS(n.equal(0),(()=>{i.assign(lS(t.z,t.y).div(TT(t.x)))})).elseif(n.equal(1),(()=>{i.assign(lS(t.x.negate(),t.z.negate()).div(TT(t.y)))})).elseif(n.equal(2),(()=>{i.assign(lS(t.x.negate(),t.y).div(TT(t.z)))})).elseif(n.equal(3),(()=>{i.assign(lS(t.z.negate(),t.y).div(TT(t.x)))})).elseif(n.equal(4),(()=>{i.assign(lS(t.x.negate(),t.z).div(TT(t.y)))})).else((()=>{i.assign(lS(t.x,t.y).div(TT(t.z)))})),DN(.5,i.add(1))})).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),DM=eS((e=>{let[t]=e;const n=rS(0).toVar();return nS(t.greaterThanEqual(NM),(()=>{n.assign(wM.sub(t).mul(TM.sub(SM)).div(wM.sub(NM)).add(SM))})).elseif(t.greaterThanEqual(EM),(()=>{n.assign(NM.sub(t).mul(CM.sub(TM)).div(NM.sub(EM)).add(TM))})).elseif(t.greaterThanEqual(MM),(()=>{n.assign(EM.sub(t).mul(IM.sub(CM)).div(EM.sub(MM)).add(CM))})).elseif(t.greaterThanEqual(AM),(()=>{n.assign(MM.sub(t).mul(RM.sub(IM)).div(MM.sub(AM)).add(IM))})).else((()=>{n.assign(rS(-2).mul(hT(DN(1.16,t))))})),n})).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),jM=(eS((e=>{let[t,n]=e;const i=t.toVar();i.assign(DN(2,i).sub(1));const r=hS(i,1).toVar();return nS(n.equal(0),(()=>{r.assign(r.zyx)})).elseif(n.equal(1),(()=>{r.assign(r.xzy),r.xz.mulAssign(-1)})).elseif(n.equal(2),(()=>{r.x.mulAssign(-1)})).elseif(n.equal(3),(()=>{r.assign(r.zyx),r.xz.mulAssign(-1)})).elseif(n.equal(4),(()=>{r.assign(r.xzy),r.xy.mulAssign(-1)})).elseif(n.equal(5),(()=>{r.z.mulAssign(-1)})),r})).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),eS((e=>{let[t,n,i,r,s,a]=e;const o=rS(i),l=hS(n),c=QT(DM(o),SM,a),u=yT(c),d=mT(c),h=hS(UM(t,l,d,r,s,a)).toVar();return nS(u.notEqual(0),(()=>{const e=hS(UM(t,l,d.add(1),r,s,a)).toVar();h.assign($T(h,e,u))})),h}))),UM=eS((e=>{let[t,n,i,r,s,a]=e;const o=rS(i).toVar(),l=hS(n),c=rS(OM(l)).toVar(),u=rS(UT(PM.sub(o),0)).toVar();o.assign(UT(o,PM));const d=rS(uT(o)).toVar(),h=lS(LM(l,c).mul(d.sub(2)).add(1)).toVar();return nS(c.greaterThan(2),(()=>{h.y.addAssign(d),c.subAssign(3)})),h.x.addAssign(c.mul(d)),h.x.addAssign(u.mul(DN(3,kM))),h.y.addAssign(DN(4,uT(a).sub(d))),h.x.mulAssign(r),h.y.mulAssign(s),t.uv(h)})),zM=eS((e=>{let{envMap:t,mipInt:n,outputDirection:i,theta:r,axis:s,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:l}=e;const c=xT(r),u=i.mul(c).add(s.cross(i).mul(_T(r))).add(s.mul(s.dot(i).mul(c.oneMinus())));return UM(t,u,n,a,o,l)}));eS((e=>{let{n:t,latitudinal:n,poleAxis:i,outputDirection:r,weights:s,samples:a,dTheta:o,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h}=e;const p=hS(bM(n,i,qT(i,r))).toVar();nS(rT(p.equals(hS(0))),(()=>{p.assign(hS(r.z,0,r.x.negate()))})),p.assign(vT(p));const f=hS().toVar();return f.addAssign(s.element(sS(0)).mul(zM({theta:0,axis:p,outputDirection:r,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h}))),JC({start:sS(1),end:t},(e=>{let{i:t}=e;nS(t.greaterThanEqual(a),(()=>{hE("break").append()}));const n=rS(o.mul(rS(t))).toVar();f.addAssign(s.element(t).mul(zM({theta:n.mul(-1),axis:p,outputDirection:r,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h}))),f.addAssign(s.element(t).mul(zM({theta:n,axis:p,outputDirection:r,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h})))})),gS(f,1)}));let FM=null;const VM=new WeakMap;class BM extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null,this._texture=vE(null),this._width=MN(0),this._height=MN(0),this._maxMip=MN(0),this.updateBeforeType=jg}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=function(e){const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,n=this._value;t!==n.pmremVersion&&(e=!0===n.isPMREMTexture?n:function(e){let t=VM.get(e);if((void 0!==t?t.pmremVersion:-1)!==e.pmremVersion){if(e.isCubeTexture){if(e.source.data.some((e=>void 0===e)))throw new Error("PMREMNode: Undefined texture in CubeTexture. Use onLoad callback or async loader");t=FM.fromCubemap(e,t)}else{if(void 0===e.image)throw new Error("PMREMNode: Undefined image in Texture. Use onLoad callback or async loader");t=FM.fromEquirectangular(e,t)}t.pmremVersion=e.pmremVersion,VM.set(e,t)}return t.texture}(n),this._pmrem=e,this.updateFromTexture(e))}setup(e){null===FM&&(FM=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;null===t&&e.context.getUV&&(t=e.context.getUV(this));const n=this.value;e.renderer.coordinateSystem===Iv&&!0!==n.isPMREMTexture&&!0===n.isRenderTargetTexture&&(t=hS(t.x.negate(),t.yz));let i=this.levelNode;return null===i&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),jM(this._texture,t,i,this._width,this._height,this._maxMip)}}const HM=Qw(BM);sw("PMREMNode",BM);const WM=new WeakMap;class qM extends oM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.envNode=e}setup(e){let t=this.envNode;if(t.isTextureNode){let e=WM.get(t.value);void 0===e&&(e=HM(t.value),WM.set(t.value,e)),t=e}const n=e.material.envMap?ME("envMapIntensity","float",e.material):ME("environmentIntensity","float",e.scene),i=YS(t,GM(sN,KE)).mul(n),r=YS(t,YM(JE)).mul(Math.PI).mul(n),s=WS(i);e.context.radiance.addAssign(s),e.context.iblIrradiance.addAssign(r);const a=e.context.lightingModel.clearcoatRadiance;if(a){const e=YS(t,GM(lN,$E)).mul(n),i=WS(e);a.addAssign(i)}}}const GM=(e,t)=>{let n=null;return{getUV:()=>(null===n&&(n=RC.negate().reflect(t),n=e.mul(e).mix(n,t).normalize(),n=n.transformDirection(zE)),n),getTextureLevel:()=>e}},YM=e=>({getUV:()=>e,getTextureLevel:()=>rS(1)}),XM=qM;let KM,JM;sw("EnvironmentNode",qM);class $M extends rw{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===$M.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Lg;return this.scope!==$M.RESOLUTION&&this.scope!==$M.VIEWPORT||(e=Dg),this.updateType=e,e}update(e){let{renderer:t}=e;this.scope===$M.VIEWPORT?t.getViewport(JM):t.getDrawingBufferSize(KM)}setup(){const e=this.scope;let t=null;if(e===$M.RESOLUTION)t=MN(KM||(KM=new Hv));else if(e===$M.VIEWPORT)t=MN(JM||(JM=new uy));else{t=QM.div(ZM);let n=t.x,i=t.y;/bottom/i.test(e)&&(i=i.oneMinus()),/right/i.test(e)&&(n=n.oneMinus()),t=lS(n,i)}return t}generate(e){if(this.scope===$M.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(ZM).outputNode.build(e);t="".concat(e.getType("vec2"),"( ").concat(t,".x, ").concat(n,".y - ").concat(t,".y )")}return t}return super.generate(e)}}$M.COORDINATE="coordinate",$M.RESOLUTION="resolution",$M.VIEWPORT="viewport",$M.TOP_LEFT="topLeft",$M.BOTTOM_LEFT="bottomLeft",$M.TOP_RIGHT="topRight",$M.BOTTOM_RIGHT="bottomRight";const QM=Zw($M,$M.COORDINATE),ZM=Zw($M,$M.RESOLUTION),eI=Zw($M,$M.VIEWPORT),tI=Zw($M,$M.TOP_LEFT);Zw($M,$M.BOTTOM_LEFT),Zw($M,$M.TOP_RIGHT),Zw($M,$M.BOTTOM_RIGHT);sw("ViewportNode",$M);const nI=new Hv;class iI extends gE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=new Yx,n.minFilter=nv),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Dg}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(nI);const n=this.value;n.image.width===nI.width&&n.image.height===nI.height||(n.image.width=nI.width,n.image.height=nI.height,n.needsUpdate=!0);const i=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=i}clone(){return new this.constructor(this.uvNode,this.levelNode,this.value)}}const rI=iI,sI=Qw(iI),aI=Qw(iI,null,null,{generateMipmaps:!0});Tw("viewportTexture",sI),Tw("viewportMipTexture",aI),sw("ViewportTextureNode",iI);let oI=null;class lI extends rI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===oI&&(oI=new Dx),super(e,t,oI)}}const cI=Qw(lI);Tw("viewportDepthTexture",cI),sw("ViewportDepthTextureNode",lI);class uI extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===uI.DEPTH_PIXEL?e.getFragDepth():super.generate(e)}setup(){const{scope:e}=this;let t=null;if(e===uI.DEPTH)t=dI(AC.z,DE,jE);else if(e===uI.DEPTH_TEXTURE){const e=this.valueNode||cI(),n=hI(e,DE,jE);t=dI(n,DE,jE)}else e===uI.DEPTH_PIXEL&&null!==this.valueNode&&(t=pI().assign(this.valueNode));return t}}const dI=(e,t,n)=>e.add(t).div(t.sub(n)),hI=(e,t,n)=>t.mul(n).div(n.sub(t).mul(e).sub(n));uI.DEPTH="depth",uI.DEPTH_TEXTURE="depthTexture",uI.DEPTH_PIXEL="depthPixel";const pI=Qw(uI,uI.DEPTH_PIXEL),fI=(Zw(uI,uI.DEPTH),Qw(uI,uI.DEPTH_TEXTURE),Zw(uI,uI.DEPTH_PIXEL));fI.assign=e=>pI(e),sw("ViewportDepthNode",uI);class mI extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mI.DEFAULT;super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{localClipIntersection:n,localClippingCount:i,globalClippingCount:r}=t,s=r+i,a=n?s-i:s;return this.scope===mI.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,s,a):this.setupDefault(t.planes,s,a)}setupAlphaToCoverage(e,t,n){return eS((()=>{const i=NE(e),r=nN("float","distanceToPlane"),s=nN("float","distanceToGradient"),a=nN("float","clipOpacity");let o;if(a.assign(1),JC(n,(e=>{let{i:t}=e;o=i.element(t),r.assign(AC.dot(o.xyz).negate().add(o.w)),s.assign(r.fwidth().div(2)),a.mulAssign(eE(s.negate(),s,r)),a.equal(0).discard()})),n<t){const e=nN("float","unionclipOpacity");e.assign(1),JC({start:n,end:t},(t=>{let{i:n}=t;o=i.element(n),r.assign(AC.dot(o.xyz).negate().add(o.w)),s.assign(r.fwidth().div(2)),e.mulAssign(eE(s.negate(),s,r).oneMinus())})),a.mulAssign(e.oneMinus())}rN.a.mulAssign(a),rN.a.equal(0).discard()}))()}setupDefault(e,t,n){return eS((()=>{const i=NE(e);let r;if(JC(n,(e=>{let{i:t}=e;r=i.element(t),AC.dot(r.xyz).greaterThan(r.w).discard()})),n<t){const e=nN("bool","clipped");e.assign(!0),JC({start:n,end:t},(t=>{let{i:n}=t;r=i.element(n),e.assign(AC.dot(r.xyz).greaterThan(r.w).and(e))})),e.discard()}}))()}}mI.ALPHA_TO_COVERAGE="alphaToCoverage",mI.DEFAULT="default";class gI extends rw{constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){return e.getFrontFacing()}}const vI=Zw(gI),yI=rS(vI).mul(2).sub(1);sw("FrontFacingNode",gI);const _I=new Map;class xI extends _x{constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!0,this.normals=!0,this.colorSpaced=!0,this.lightsNode=null,this.envNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.outputNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+Jb(this)}build(e){this.setup(e)}setup(e){let t;e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();const n=this.setupClipping(e);if(null===this.fragmentNode){!0===this.depthWrite&&this.setupDepth(e),!0===this.normals&&this.setupNormal(e),this.setupDiffuseColor(e),this.setupVariants(e);const i=this.setupLighting(e);null!==n&&e.stack.add(n);const r=gS(i,rN.a).max(0);t=this.setupOutput(e,r),gN.assign(t),null!==this.outputNode&&(t=this.outputNode)}else t=this.setupOutput(e,this.fragmentNode);e.stack.outputNode=t,e.addFlow("fragment",e.removeStack())}setupClipping(e){const{globalClippingCount:t,localClippingCount:n}=e.clippingContext;let i=null;return(t||n)&&(this.alphaToCoverage?i=Kw(new mI(mI.ALPHA_TO_COVERAGE)):e.stack.add(Kw(new mI))),i}setupDepth(e){const{renderer:t}=e;let n=this.depthNode;if(null===n&&!0===t.logarithmicDepthBuffer){n=kC().w.add(1).log2().mul(UE).mul(.5)}null!==n&&fI.assign(n).append()}setupPosition(e){const{object:t}=e,n=t.geometry;var i;e.addStack(),(n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&tM(t).append(),!0===t.isSkinnedMesh&&(i=t,Kw(new XC(i,!0))).append(),t.isBatchedMesh&&YC(t).append(),t.instanceMatrix&&!0===t.instanceMatrix.isInstancedBufferAttribute&&!0===e.isAvailable("instance")&&zC(t).append(),null!==this.positionNode&&CC.assign(this.positionNode);const r=kC();return e.context.vertex=e.removeStack(),e.context.mvp=r,r}setupDiffuseColor(e){let{object:t,geometry:n}=e,i=this.colorNode?gS(this.colorNode):tC;if(!0===this.vertexColors&&n.hasAttribute("color")&&(i=gS(i.xyz.mul(US("color","vec3")),i.a)),t.instanceColor){i=iN("vec3","vInstanceColor").mul(i)}rN.assign(i);const r=this.opacityNode?rS(this.opacityNode):rC;if(rN.a.assign(rN.a.mul(r)),null!==this.alphaTestNode||this.alphaTest>0){const e=null!==this.alphaTestNode?rS(this.alphaTestNode):eC;rN.a.lessThanEqual(e).discard()}}setupVariants(){}setupNormal(){if(!0===this.flatShading){const e=AC.dFdx().cross(AC.dFdy()).normalize();KE.assign(e.mul(yI))}else{const e=this.normalNode?hS(this.normalNode):cC;KE.assign(e.mul(yI))}}getEnvNode(e){let t=null;return this.envNode?t=this.envNode:this.envMap?t=this.envMap.isCubeTexture?sM(this.envMap):vE(this.envMap):e.environmentNode&&(t=e.environmentNode),t}setupLights(e){const t=this.getEnvNode(e),n=[];t&&n.push(new XM(t)),e.material.aoMap&&n.push(new gM(vE(e.material.aoMap)));let i=this.lightsNode||e.lightsNode;return n.length>0&&(i=pM([...i.lightNodes,...n])),i}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:i,emissiveNode:r}=this,s=!0===this.lights||null!==this.lightsNode?this.setupLights(e):null;let a=rN.rgb;if(s&&!1!==s.hasLight){const t=this.setupLightingModel(e);a=yM(s,t,n,i)}else null!==n&&(a=hS(null!==i?$T(a,n,i):n));return(r&&!0===r.isNode||t.emissive&&!0===t.emissive.isColor)&&(a=a.add(hS(r||iC))),a}setupOutput(e,t){const n=e.renderer;if(!0===this.fog){const n=e.fogNode;n&&(t=gS(n.mix(t.rgb,n.colorNode),t.a))}const i=e.toneMappingNode;if(!0===this.toneMapped&&i&&(t=gS(i.context({color:t.rgb}),t.a)),!0===this.colorSpaced){const e=n.currentColorSpace;e!==_v&&e!==vv&&(t=t.linearToColorSpace(e))}return t}setDefaultValues(e){for(const n in e){const t=e[n];void 0===this[n]&&(this[n]=t,t&&t.clone&&(this[n]=t.clone()))}Object.assign(this.defines,e.defines);const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)void 0===Object.getOwnPropertyDescriptor(this.constructor.prototype,n)&&void 0!==t[n].get&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{},nodes:{}});const n=D_.prototype.toJSON.call(this,e),i=$b(this);n.inputNodes={};for(const{property:s,childNode:a}of i)n.inputNodes[s]=a.toJSON(e).uuid;function r(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(t){const t=r(e.textures),i=r(e.images),s=r(e.nodes);t.length>0&&(n.textures=t),i.length>0&&(n.images=i),s.length>0&&(n.nodes=s)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.outputNode=e.outputNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}static fromMaterial(e){if(!0===e.isNodeMaterial)return e;const t=SI(e.type.replace("Material","NodeMaterial"));if(void 0===t)throw new Error('NodeMaterial: Material "'.concat(e.type,'" is not compatible.'));for(const n in e)t[n]=e[n];return t}}const bI=xI;function wI(e,t){if("function"!==typeof t||!e)throw new Error("Node material ".concat(e," is not a class"));_I.has(e)?console.warn("Redefinition of node material ".concat(e)):(_I.set(e,t),t.type=e)}function SI(e){const t=_I.get(e);if(void 0!==t)return new t}wI("NodeMaterial",xI);class NI extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}if(e,t){const n=new Xw(t);return this._currentCond=bM(e,n),this.add(this._currentCond)}elseif(e,t){const n=new Xw(t),i=bM(e,n);return this._currentCond.elseNode=i,this._currentCond=i,this}else(e){return this._currentCond.elseNode=new Xw(e),this}build(e){const t=Sw;tS(this);for(const s of this.nodes)s.build(e,"void");tS(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.outputNode?this.outputNode.build(e,...i):super.build(e,...i)}}Qw(NI);sw("StackNode",NI);new class{constructor(){this.weakMap=new WeakMap}get(e){if(Array.isArray(e)){let t=this.weakMap;for(let n=0;n<e.length;n++)if(t=t.get(e[n]),void 0===t)return;return t.get(e[e.length-1])}return super.get(e)}set(e,t){if(Array.isArray(e)){let n=this.weakMap;for(let t=0;t<e.length;t++){const i=e[t];!1===n.has(i)&&n.set(i,new WeakMap),n=n.get(i)}return n.set(e[e.length-1],t)}return super.set(e,t)}delete(e){if(Array.isArray(e)){let t=this.weakMap;for(let n=0;n<e.length;n++)if(t=t.get(e[n]),void 0===t)return!1;return t.delete(e[e.length-1])}return super.delete(e)}dispose(){this.weakMap.clear()}},new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]);class TI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.type=e,this.name=t,this.count=n,this.qualifier=i,this.isConst=r}}TI.isNodeFunctionInput=!0;class EI extends rw{constructor(e){super(),this.types=e,this.isStructTypeNode=!0}getMemberTypes(){return this.types}}const CI=EI;sw("StructTypeNode",EI);class MI extends rw{constructor(){super(),this.isOutputStructNode=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.members=t}setup(e){super.setup(e);const t=this.members,n=[];for(let i=0;i<t.length;i++)n.push(t[i].getNodeType(e));this.nodeType=e.getStructTypeFromNode(new CI(n)).name}generate(e,t){const n=e.getVarFromNode(this);n.isOutputStructVar=!0;const i=e.getPropertyName(n),r=this.members,s=""!==i?i+".":"";for(let a=0;a<r.length;a++){const n=r[a].build(e,t);e.addLineFlowCode("".concat(s,"m").concat(a," = ").concat(n))}return i}}Qw(MI);sw("OutputStructNode",MI);class II extends rw{constructor(e){super(),this.seedNode=e}setup(){const e=this.seedNode.uint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).float().mul(1/2**32)}}Tw("hash",Qw(II)),sw("HashNode",II);const AI=(e,t)=>GT(DN(4,e.mul(LN(1,e))),t);Tw("parabola",AI),Tw("gain",((e,t)=>e.lessThan(.5)?AI(e.mul(2),t).div(2):LN(1,AI(DN(LN(1,e),2),t).div(2)))),Tw("pcurve",((e,t,n)=>GT(jN(GT(e,t),ON(GT(e,t),GT(LN(1,e),n))),1/t))),Tw("sinc",((e,t)=>_T(iT.mul(t.mul(e).sub(1))).div(iT.mul(t.mul(e).sub(1)))));const RI=eS((e=>{let[t]=e;return t.fract().sub(.5).abs()})),PI=eS((e=>{let[t]=e;return hS(RI(t.z.add(RI(t.y.mul(1)))),RI(t.z.add(RI(t.x.mul(1)))),RI(t.y.add(RI(t.x.mul(1)))))})),kI=eS((e=>{let[t,n,i]=e;const r=hS(t).toVar(),s=rS(1.4).toVar(),a=rS(0).toVar(),o=hS(r).toVar();return JC({start:rS(0),end:rS(3),type:"float",condition:"<="},(()=>{const e=hS(PI(o.mul(2))).toVar();r.addAssign(e.add(i.mul(rS(.1).mul(n)))),o.mulAssign(1.8),s.mulAssign(1.5),r.mulAssign(1.2);const t=rS(RI(r.z.add(RI(r.x.add(RI(r.y)))))).toVar();a.addAssign(t.div(s)),o.addAssign(.14)})),a}));let OI;RI.setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),PI.setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),kI.setLayout({name:"triNoise3D",type:"float",inputs:[{name:"p",type:"vec3"},{name:"spd",type:"float"},{name:"time",type:"float"}]});class LI extends xM{constructor(e){OI=OI||hE("discard"),super(e,OI)}}const DI=Qw(LI);Tw("discard",(e=>DI(e).append())),sw("DiscardNode",LI);class jI extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IC;super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(2*Math.PI)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return lS(t,n)}}Qw(jI);sw("EquirectUVNode",jI);class UI extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.functionNodes=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.parametersNodes=n,this._candidateFnCall=null}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(null===n){let i=null,r=-1;for(const n of this.functionNodes){const s=n.shaderNode.layout;if(null===s)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const a=s.inputs;if(t.length===a.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n],r=a[n];i.getNodeType(e)===r.type?s++:s=0}s>r&&(i=n,r=s)}}this._candidateFnCall=n=i(...t)}return n}}const zI=Qw(UI),FI=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return zI(e,...n)};sw("FunctionOverloadingNode",UI);class VI extends ow{constructor(){super("vec2")}setup(){const e=hS(RC.z,0,RC.x.negate()).normalize(),t=RC.cross(e);return lS(e.dot(KE),t.dot(KE)).mul(.495).add(.5)}}Zw(VI);sw("MatcapUVNode",VI);class BI extends CN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BI.LOCAL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this.scope=e,this.scale=t,this.updateType=Dg}update(e){const t=this.scope,n=this.scale;t===BI.LOCAL?this.value+=e.deltaTime*n:t===BI.DELTA?this.value=e.deltaTime*n:t===BI.FRAME?this.value=e.frameId:this.value=e.time*n}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}BI.LOCAL="local",BI.GLOBAL="global",BI.DELTA="delta",BI.FRAME="frame";Zw(BI,BI.FRAME).uint();sw("TimerNode",BI);class HI extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HI.SINE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Kw(new BI(BI.LOCAL,e,t))}();super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Kw(this.timeNode);let n=null;return e===HI.SINE?n=t.add(.75).mul(2*Math.PI).sin().mul(.5).add(.5):e===HI.SQUARE?n=t.fract().round():e===HI.TRIANGLE?n=t.add(.5).fract().mul(2).sub(1).abs():e===HI.SAWTOOTH&&(n=t.fract()),n}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}HI.SINE="sine",HI.SQUARE="square",HI.TRIANGLE="triangle",HI.SAWTOOTH="sawtooth";Qw(HI,HI.SINE),Qw(HI,HI.SQUARE),Qw(HI,HI.TRIANGLE),Qw(HI,HI.SAWTOOTH);sw("OscNode",HI);class WI extends ow{constructor(e,t){super(),this.scope=e,this.node=t}getNodeType(e){return this.node.getNodeType(e)}setup(){const{scope:e,node:t}=this;let n=null;return e===WI.DIRECTION_TO_COLOR?n=t.mul(.5).add(.5):e===WI.COLOR_TO_DIRECTION&&(n=t.mul(2).sub(1)),n}}WI.DIRECTION_TO_COLOR="directionToColor",WI.COLOR_TO_DIRECTION="colorToDirection";const qI=Qw(WI,WI.DIRECTION_TO_COLOR),GI=Qw(WI,WI.COLOR_TO_DIRECTION);Tw("directionToColor",qI),Tw("colorToDirection",GI),sw("PackingNode",WI);class YI extends rw{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rS(0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rS(1);super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=i,this.outHighNode=r,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:i,outHighNode:r,doClamp:s}=this;let a=e.sub(t).div(n.sub(t));return!0===s&&(a=a.clamp()),a.mul(r.sub(i)).add(i)}}const XI=Qw(YI,null,null,{doClamp:!1}),KI=Qw(YI);Tw("remap",XI),Tw("remapClamp",KI),sw("RemapNode",YI);class JI extends ow{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lS(.5);super("vec2"),this.uvNode=e,this.rotationNode=t,this.centerNode=n}setup(){const{uvNode:e,rotationNode:t,centerNode:n}=this;return e.sub(n).rotate(t).add(n)}}Tw("rotateUV",Qw(JI)),sw("RotateUVNode",JI);class $I extends ow{constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if("vec2"===this.getNodeType(e)){const e=t.cos(),i=t.sin();return xS(e,i,i.negate(),e).mul(n)}{const e=t,i=MS(gS(1,0,0,0),gS(0,xT(e.x),_T(e.x).negate(),0),gS(0,_T(e.x),xT(e.x),0),gS(0,0,0,1)),r=MS(gS(xT(e.y),0,_T(e.y),0),gS(0,1,0,0),gS(_T(e.y).negate(),0,xT(e.y),0),gS(0,0,0,1)),s=MS(gS(xT(e.z),_T(e.z).negate(),0,0),gS(_T(e.z),xT(e.z),0,0),gS(0,0,1,0),gS(0,0,0,1));return i.mul(r).mul(s).mul(gS(n,1)).xyz}}}Tw("rotate",Qw($I)),sw("RotateNode",$I);class QI extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AN(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rS(0);super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:i,height:r}=n,s=e.mod(i.mul(r)).floor(),a=s.mod(i),o=r.sub(s.add(1).div(i).ceil()),l=n.reciprocal(),c=lS(a,o);return t.add(c).mul(l)}}Qw(QI);sw("SpriteSheetUVNode",QI);class ZI extends cw{constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}setup(e){return!1===e.isAvailable("storageBuffer")&&(this.node.instanceIndex||!0!==this.node.bufferObject||e.setupPBO(this.node)),super.setup(e)}generate(e,t){let n;const i=e.context.assign;if(!1===e.isAvailable("storageBuffer")){const{node:t}=this;n=t.instanceIndex||!0!==this.node.bufferObject||!0===i?t.build(e):e.generatePBO(this)}else n=super.generate(e);if(!0!==i){const i=this.getNodeType(e);n=e.format(n,i,t)}return n}}const eA=Qw(ZI);Tw("storageElement",eA),sw("StorageArrayElementNode",ZI);class tA extends rw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rS(1),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:CC,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:GE;super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=n,this.scaleNode=i,this.positionNode=r,this.normalNode=s}setup(){const{textureXNode:e,textureYNode:t,textureZNode:n,scaleNode:i,positionNode:r,normalNode:s}=this;let a=s.abs().normalize();a=a.div(a.dot(hS(1)));const o=r.yz.mul(i),l=r.zx.mul(i),c=r.xy.mul(i),u=e.value,d=null!==t?t.value:u,h=null!==n?n.value:u,p=vE(u,o).mul(a.x),f=vE(d,l).mul(a.y),m=vE(h,c).mul(a.z);return ON(p,f,m)}}const nA=Qw(tA);Tw("triplanarTexture",(function(){return nA(...arguments)})),sw("TriplanarTexturesNode",tA);new Mx,new fy,new fy,new fy,new Wy,new fy(0,0,-1),new uy,new fy,new fy,new uy,new Hv,new dy,lS(tI.x.oneMinus(),tI.y);class iA extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iA.LOCAL;super("vec3"),this.scope=e}getHash(){return"bitangent-".concat(this.scope)}generate(e){const t=this.scope;let n;t===iA.GEOMETRY?n=qE.cross(VC):t===iA.LOCAL?n=GE.cross(BC):t===iA.VIEW?n=YE.cross(HC):t===iA.WORLD&&(n=XE.cross(WC));const i=n.mul(VC.w).xyz;return vT(LS(i)).build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}iA.GEOMETRY="geometry",iA.LOCAL="local",iA.VIEW="view",iA.WORLD="world";Zw(iA,iA.GEOMETRY),Zw(iA,iA.LOCAL);const rA=Zw(iA,iA.VIEW),sA=(Zw(iA,iA.WORLD),vT(KE.cross(qC).mul(VC.w)));vT(sA.transformDirection(zE));sw("BitangentNode",iA);const aA=NS(HC,rA,YE);RC.mul(aA);class oA extends jS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e);let n;return n=!0===e.hasGeometryAttribute(t)?super.generate(e):e.generateConst(this.nodeType,new uy(1,1,1,1)),n}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}sw("VertexColorNode",oA);class lA extends CE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,n),this.renderer=n}updateReference(e){return this.reference=null!==this.renderer?this.renderer:e.renderer,this.reference}}sw("RendererReferenceNode",lA);const cA=1/6,uA=e=>DN(cA,DN(e,DN(e,e.negate().add(3)).sub(3)).add(1)),dA=e=>DN(cA,DN(e,DN(e,DN(3,e).sub(6))).add(4)),hA=e=>DN(cA,DN(e,DN(e,DN(-3,e).add(3)).add(3)).add(1)),pA=e=>DN(cA,GT(e,3)),fA=e=>uA(e).add(dA(e)),mA=e=>hA(e).add(pA(e)),gA=e=>ON(-1,dA(e).div(uA(e).add(dA(e)))),vA=e=>ON(1,pA(e).div(hA(e).add(pA(e)))),yA=(e,t,n)=>{const i=e.uvNode,r=DN(i,t.zw).add(.5),s=mT(r),a=yT(r),o=fA(a.x),l=mA(a.x),c=gA(a.x),u=vA(a.x),d=gA(a.y),h=vA(a.y),p=lS(s.x.add(c),s.y.add(d)).sub(.5).mul(t.xy),f=lS(s.x.add(u),s.y.add(d)).sub(.5).mul(t.xy),m=lS(s.x.add(c),s.y.add(h)).sub(.5).mul(t.xy),g=lS(s.x.add(u),s.y.add(h)).sub(.5).mul(t.xy),v=fA(a.y).mul(ON(o.mul(e.uv(p).level(n)),l.mul(e.uv(f).level(n)))),y=mA(a.y).mul(ON(o.mul(e.uv(m).level(n)),l.mul(e.uv(g).level(n))));return v.add(y)};class _A extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rS(3);super("vec4"),this.textureNode=e,this.blurNode=t}setup(){return((e,t)=>{const n=lS(e.size(sS(t))),i=lS(e.size(sS(t.add(1)))),r=jN(1,n),s=jN(1,i),a=yA(e,gS(r,n),mT(t)),o=yA(e,gS(s,i),gT(t));return yT(t).mix(a,o)})(this.textureNode,this.blurNode)}}Tw("bicubic",Qw(_A)),sw("TextureBicubicNode",_A);class xA extends rw{constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}Zw(xA);sw("PointUVNode",xA);class bA extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bA.BACKGROUND_BLURRINESS,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=null!==this.scene?this.scene:e.scene;let i;return t===bA.BACKGROUND_BLURRINESS?i=ME("backgroundBlurriness","float",n):t===bA.BACKGROUND_INTENSITY?i=ME("backgroundIntensity","float",n):console.error("THREE.SceneNode: Unknown scope:",t),i}}bA.BACKGROUND_BLURRINESS="backgroundBlurriness",bA.BACKGROUND_INTENSITY="backgroundIntensity";Zw(bA,bA.BACKGROUND_BLURRINESS),Zw(bA,bA.BACKGROUND_INTENSITY);sw("SceneNode",bA);class wA extends xE{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this.isStorageBufferNode=!0,this.bufferObject=!1,this._attribute=null,this._varying=null}getInputType(){return"storageBuffer"}element(e){return eA(this,e)}setBufferObject(e){return this.bufferObject=e,this}generate(e){if(e.isAvailable("storageBuffer"))return super.generate(e);const t=this.getNodeType(e);null===this._attribute&&(this._attribute=LC(this.value),this._varying=LS(this._attribute));const n=this._varying.build(e,t);return e.registerTransform(n,this._attribute),n}}sw("StorageBufferNode",wA);class SA extends gE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t),this.storeNode=n,this.isStoreTextureNode=!0}getInputType(){return"storageTexture"}setup(e){super.setup(e);e.getNodeProperties(this).storeNode=this.storeNode}generate(e,t){let n;return n=null!==this.storeNode?this.generateStore(e):super.generate(e,t),n}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:i}=t,r=super.generate(e,"property"),s=n.build(e,"uvec2"),a=i.build(e,"vec4"),o=e.generateTextureStore(e,r,s,a);e.addLineFlowCode(o)}}Qw(SA);sw("TextureStoreNode",SA);class NA extends CE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,n),this.userData=n}update(e){this.reference=null!==this.userData?this.userData:e.object.userData,super.update(e)}}sw("UserDataNode",NA);const TA=eS((e=>{let{base:t,blend:n}=e;const i=e=>n[e].lessThan(nT).cond(n[e],t[e].oneMinus().div(n[e]).oneMinus().max(0));return hS(i("x"),i("y"),i("z"))})).setLayout({name:"burnColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),EA=eS((e=>{let{base:t,blend:n}=e;const i=e=>n[e].equal(1).cond(n[e],t[e].div(n[e].oneMinus()).max(0));return hS(i("x"),i("y"),i("z"))})).setLayout({name:"dodgeColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),CA=eS((e=>{let{base:t,blend:n}=e;const i=e=>t[e].oneMinus().mul(n[e].oneMinus()).oneMinus();return hS(i("x"),i("y"),i("z"))})).setLayout({name:"screenColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),MA=eS((e=>{let{base:t,blend:n}=e;const i=e=>t[e].lessThan(.5).cond(t[e].mul(n[e],2),t[e].oneMinus().mul(n[e].oneMinus()).oneMinus());return hS(i("x"),i("y"),i("z"))})).setLayout({name:"overlayColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]});class IA extends ow{constructor(e,t,n){super(),this.blendMode=e,this.baseNode=t,this.blendNode=n}setup(){const{blendMode:e,baseNode:t,blendNode:n}=this,i={base:t,blend:n};let r=null;return e===IA.BURN?r=TA(i):e===IA.DODGE?r=EA(i):e===IA.SCREEN?r=CA(i):e===IA.OVERLAY&&(r=MA(i)),r}}IA.BURN="burn",IA.DODGE="dodge",IA.SCREEN="screen",IA.OVERLAY="overlay";const AA=Qw(IA,IA.BURN),RA=Qw(IA,IA.DODGE),PA=Qw(IA,IA.OVERLAY),kA=Qw(IA,IA.SCREEN);Tw("burn",AA),Tw("dodge",RA),Tw("overlay",PA),Tw("screen",kA),sw("BlendModeNode",IA);const OA=eS((e=>{let{textureNode:t,bumpScale:n}=e,i=t;if(!0!==i.isTextureNode&&i.traverse((e=>{!0===e.isTextureNode&&(i=e)})),!0!==i.isTextureNode)throw new Error("THREE.TSL: dHdxy_fwd() requires a TextureNode.");const r=rS(t),s=i.uvNode||AN(),a=e=>t.cache().context({getUV:()=>e,forceUVContext:!0});return lS(rS(a(s.add(s.dFdx()))).sub(r),rS(a(s.add(s.dFdy()))).sub(r)).mul(n)})),LA=eS((e=>{const{surf_pos:t,surf_norm:n,dHdxy:i}=e,r=t.dFdx().normalize(),s=n,a=t.dFdy().normalize().cross(s),o=s.cross(r),l=r.dot(a).mul(yI),c=l.sign().mul(i.x.mul(a).add(i.y.mul(o)));return l.abs().mul(n).sub(c).normalize()}));class DA extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=null!==this.scaleNode?this.scaleNode:1,t=OA({textureNode:this.textureNode,bumpScale:e});return LA({surf_pos:AC,surf_norm:YE,dHdxy:t})}}Tw("bumpMap",Qw(DA)),sw("BumpMapNode",DA);const jA=eS((e=>{let{color:t,adjustment:n}=e;return n.mix(qA(t.rgb),t.rgb)})),UA=eS((e=>{let{color:t,adjustment:n}=e;const i=ON(t.r,t.g,t.b).div(3),r=t.r.max(t.g.max(t.b)),s=r.sub(i).mul(n).mul(-3);return $T(t.rgb,r,s)})),zA=eS((e=>{let{color:t,adjustment:n}=e;const i=hS(.57735,.57735,.57735),r=n.cos();return hS(t.rgb.mul(r).add(i.cross(t.rgb).mul(n.sin()).add(i.mul(WT(i,t.rgb).mul(r.oneMinus())))))}));class FA extends ow{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rS(1);super("vec3"),this.method=e,this.colorNode=t,this.adjustmentNode=n}setup(){const{method:e,colorNode:t,adjustmentNode:n}=this,i={color:t,adjustment:n};let r=null;return e===FA.SATURATION?r=jA(i):e===FA.VIBRANCE?r=UA(i):e===FA.HUE?r=zA(i):console.error("".concat(this.type,': Method "').concat(this.method,'" not supported!')),r}}FA.SATURATION="saturation",FA.VIBRANCE="vibrance",FA.HUE="hue";const VA=Qw(FA,FA.SATURATION),BA=Qw(FA,FA.VIBRANCE),HA=Qw(FA,FA.HUE),WA=hS(.2125,.7154,.0721),qA=function(e){return WT(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:WA)},GA=(e,t)=>$T(hS(0),e,qA(e).sub(t).max(0));Tw("saturation",VA),Tw("vibrance",BA),Tw("hue",HA),Tw("threshold",GA),sw("ColorAdjustmentNode",FA);const YA=eS((e=>{const{eye_pos:t,surf_norm:n,mapN:i,uv:r}=e,s=t.dFdx(),a=t.dFdy(),o=r.dFdx(),l=r.dFdy(),c=n,u=a.cross(c),d=c.cross(s),h=u.mul(o.x).add(d.mul(l.x)),p=u.mul(o.y).add(d.mul(l.y)),f=h.dot(h).max(p.dot(p)),m=yI.mul(f.inverseSqrt());return ON(h.mul(i.x,m),p.mul(i.y,m),c.mul(i.z)).normalize()}));class XA extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=0}setup(e){const{normalMapType:t,scaleNode:n}=this;let i=this.node.mul(2).sub(1);null!==n&&(i=hS(i.xy.mul(n),i.z));let r=null;if(1===t)r=BE.mul(i).normalize();else if(0===t){r=!0===e.hasGeometryAttribute("tangent")?aA.mul(i).normalize():YA({eye_pos:AC,surf_norm:YE,mapN:i,uv:AN()})}return r}}Tw("normalMap",Qw(XA)),sw("NormalMapNode",XA);class KA extends ow{constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}Tw("posterize",Qw(KA)),sw("PosterizeNode",KA);const JA=eS((e=>{let{color:t,exposure:n}=e;return t.mul(n).clamp()})),$A=eS((e=>{let{color:t,exposure:n}=e;return t=t.mul(n),t.div(t.add(1)).clamp()})),QA=eS((e=>{let{color:t,exposure:n}=e;t=t.mul(n),t=t.sub(.004).max(0);const i=t.mul(t.mul(6.2).add(.5)),r=t.mul(t.mul(6.2).add(1.7)).add(.06);return i.div(r).pow(2.2)})),ZA=eS((e=>{let{color:t}=e;const n=t.mul(t.add(.0245786)).sub(90537e-9),i=t.mul(t.add(.432951).mul(.983729)).add(.238081);return n.div(i)})),eR=eS((e=>{let{color:t,exposure:n}=e;const i=NS(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),r=NS(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return t=t.mul(n).div(.6),t=i.mul(t),t=ZA({color:t}),t=r.mul(t),t.clamp()})),tR=NS(hS(1.6605,-.1246,-.0182),hS(-.5876,1.1329,-.1006),hS(-.0728,-.0083,1.1187)),nR=NS(hS(.6274,.0691,.0164),hS(.3293,.9195,.088),hS(.0433,.0113,.8956)),iR=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=hS(n.mul(n)).toVar(),r=hS(i.mul(i)).toVar();return rS(15.5).mul(r.mul(i)).sub(DN(40.14,r.mul(n))).add(DN(31.96,r).sub(DN(6.868,i.mul(n))).add(DN(.4298,i).add(DN(.1191,n).sub(.00232))))})),rR=eS((e=>{let{color:t,exposure:n}=e;const i=hS(t).toVar(),r=NS(hS(.856627153315983,.137318972929847,.11189821299995),hS(.0951212405381588,.761241990602591,.0767994186031903),hS(.0482516061458583,.101439036467562,.811302368396859)),s=NS(hS(1.1271005818144368,-.1413297634984383,-.14132976349843826),hS(-.11060664309660323,1.157823702216272,-.11060664309660294),hS(-.016493938717834573,-.016493938717834257,1.2519364065950405)),a=rS(-12.47393),o=rS(4.026069);return i.mulAssign(n),i.assign(nR.mul(i)),i.assign(r.mul(i)),i.assign(UT(i,1e-10)),i.assign(hT(i)),i.assign(i.sub(a).div(o.sub(a))),i.assign(QT(i,0,1)),i.assign(iR(i)),i.assign(s.mul(i)),i.assign(GT(UT(hS(0),i),hS(2.2))),i.assign(tR.mul(i)),i.assign(QT(i,0,1)),i})),sR={[Gg]:JA,[Yg]:$A,[Xg]:QA,[Kg]:eR,[Jg]:rR};class aR extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}getCacheKey(){let e=super.getCacheKey();return e="{toneMapping:"+this.toneMapping+",nodes:"+e+"}",e}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===qg)return t;const i={exposure:this.exposureNode,color:t},r=sR[n];let s=null;return r?s=r(i):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),s=t),s}}const oR=((e,t,n)=>Kw(new lA(e,t,n)))("toneMappingExposure","float");Tw("toneMapping",((e,t,n)=>((e,t,n)=>Kw(new aR(e,Kw(t),Kw(n))))(t,n,e))),sw("ToneMappingNode",aR);let lR=null;class cR extends rI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===lR&&(lR=new Yx),super(e,t,lR)}updateReference(){return this}}Tw("viewportSharedTexture",Qw(cR)),sw("ViewportSharedTextureNode",cR);class uR extends gE{constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class dR extends ow{constructor(e,t,n){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this._pixelRatio=1,this._width=1,this._height=1;const i=new Dx;i.isRenderTargetTexture=!0,i.name="PostProcessingDepth";const r=new dy(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:av});r.texture.name="PostProcessing",r.depthTexture=i,this.renderTarget=r,this.updateBeforeType=Dg,this._textureNode=Kw(new uR(this,r.texture)),this._depthTextureNode=Kw(new uR(this,i)),this._depthNode=null,this._viewZNode=null,this._cameraNear=MN(0),this._cameraFar=MN(0),this.isPassNode=!0}isGlobal(){return!0}getTextureNode(){return this._textureNode}getTextureDepthNode(){return this._depthTextureNode}getViewZNode(){if(null===this._viewZNode){const e=this._cameraNear,t=this._cameraFar;this._viewZNode=hI(this._depthTextureNode,e,t)}return this._viewZNode}getDepthNode(){if(null===this._depthNode){const e=this._cameraNear,t=this._cameraFar;this._depthNode=dI(this.getViewZNode(),e,t)}return this._depthNode}setup(){return this.scope===dR.COLOR?this.getTextureNode():this.getDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n,camera:i}=this;this._pixelRatio=t.getPixelRatio();const r=t.getSize(new Hv);this.setSize(r.width,r.height);const s=t.toneMapping,a=t.toneMappingNode,o=t.getRenderTarget();this._cameraNear.value=i.near,this._cameraFar.value=i.far,t.toneMapping=qg,t.toneMappingNode=null,t.setRenderTarget(this.renderTarget),t.render(n,i),t.toneMapping=s,t.toneMappingNode=a,t.setRenderTarget(o)}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget.setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}dR.COLOR="color",dR.DEPTH="depth";const hR=(e,t)=>Kw(new uR(e,t));sw("PassNode",dR);const pR=new Lx(-1,1,1,-1,0,1);const fR=new class extends $_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super();const t=!1===e?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new H_([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new H_(t,2))}};const mR=class extends mx{constructor(){super(fR,arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),this.camera=pR}renderAsync(e){return e.renderAsync(this,pR)}render(e){e.render(this,pR)}},gR=new mR,vR=new mR;class yR extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;super("vec4"),this.textureNode=e,this.sigma=t,this.directionNode=lS(1),this._invSize=MN(new Hv),this._passDirection=MN(new Hv),this._horizontalRT=new dy,this._horizontalRT.texture.name="GaussianBlurNode.horizontal",this._verticalRT=new dy,this._verticalRT.texture.name="GaussianBlurNode.vertical",this._textureNode=hR(this,this._verticalRT.texture),this.updateBeforeType=jg,this.resolution=new Hv(1,1)}setSize(e,t){e=Math.max(Math.round(e*this.resolution.x),1),t=Math.max(Math.round(t*this.resolution.y),1),this._invSize.value.set(1/e,1/t),this._horizontalRT.setSize(e,t),this._verticalRT.setSize(e,t)}updateBefore(e){const{renderer:t}=e,n=this.textureNode,i=n.value,r=t.getRenderTarget(),s=n.value;gR.material=this._material,vR.material=this._material,this.setSize(i.image.width,i.image.height);const a=i.type;this._horizontalRT.texture.type=a,this._verticalRT.texture.type=a,t.setRenderTarget(this._horizontalRT),this._passDirection.value.set(1,0),gR.render(t),n.value=this._horizontalRT.texture,t.setRenderTarget(this._verticalRT),this._passDirection.value.set(0,1),vR.render(t),t.setRenderTarget(r),n.value=s}getTextureNode(){return this._textureNode}setup(e){const t=this.textureNode;if(!0!==t.isTextureNode)return console.error("GaussianBlurNode requires a TextureNode."),gS();const n=t.uvNode||AN(),i=e=>t.cache().context({getUV:()=>e,forceUVContext:!0}),r=eS((()=>{const e=3+2*this.sigma,t=this._getCoefficients(e),r=this._invSize,s=lS(this.directionNode).mul(this._passDirection),a=rS(t[0]).toVar(),o=gS(i(n).mul(a)).toVar();for(let l=1;l<e;l++){const e=rS(l),c=rS(t[l]),u=lS(s.mul(r.mul(e))).toVar(),d=gS(i(n.add(u))),h=gS(i(n.sub(u)));o.addAssign(d.add(h).mul(c)),a.addAssign(DN(2,c))}return o.div(a)}));(this._material||(this._material=e.createNodeMaterial())).fragmentNode=r();return e.getNodeProperties(this).textureNode=t,this._textureNode}_getCoefficients(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return t}}Tw("gaussianBlur",((e,t)=>Kw(new yR(Kw(e),t))));const _R=new mR;class xR extends ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.96;super(e),this.textureNode=e,this.textureNodeOld=vE(),this.damp=MN(t),this._compRT=new dy,this._compRT.texture.name="AfterImageNode.comp",this._oldRT=new dy,this._oldRT.texture.name="AfterImageNode.old",this._textureNode=hR(this,this._compRT.texture),this.updateBeforeType=jg}getTextureNode(){return this._textureNode}setSize(e,t){this._compRT.setSize(e,t),this._oldRT.setSize(e,t)}updateBefore(e){const{renderer:t}=e,n=this.textureNode,i=n.value,r=i.type;this._compRT.texture.type=r,this._oldRT.texture.type=r;const s=t.getRenderTarget(),a=n.value;this.textureNodeOld.value=this._oldRT.texture,t.setRenderTarget(this._compRT),_R.render(t);const o=this._oldRT;this._oldRT=this._compRT,this._compRT=o,this.setSize(i.image.width,i.image.height),t.setRenderTarget(s),n.value=a}setup(e){const t=this.textureNode,n=this.textureNodeOld;if(!0!==t.isTextureNode)return console.error("AfterImageNode requires a TextureNode."),gS();const i=t.uvNode||AN();n.uvNode=i;const r=eS((e=>{let[t,n]=e;const i=rS(n).toVar(),r=gS(t).toVar();return UT(ET(r.sub(i)),0)})),s=eS((()=>{const e=gS(n),s=gS((e=>t.cache().context({getUV:()=>e,forceUVContext:!0}))(i));return e.mulAssign(this.damp.mul(r(e,.1))),UT(s,e)})),a=this._materialComposed||(this._materialComposed=e.createNodeMaterial());a.fragmentNode=s(),_R.material=a;return e.getNodeProperties(this).textureNode=t,this._textureNode}}Tw("afterImage",((e,t)=>Kw(new xR(Kw(e),t))));const bR=new mR;class wR extends ow{constructor(e,t,n,i){super("vec4"),this.textureNode=e,this.tresholdNode=t,this.scaleNode=n,this.colorNode=hS(.1,0,1),this.samples=i,this.resolution=new Hv(1,1),this._renderTarget=new dy,this._renderTarget.texture.name="anamorphic",this._invSize=MN(new Hv),this._textureNode=hR(this,this._renderTarget.texture),this.updateBeforeType=jg}getTextureNode(){return this._textureNode}setSize(e,t){this._invSize.value.set(1/e,1/t),e=Math.max(Math.round(e*this.resolution.x),1),t=Math.max(Math.round(t*this.resolution.y),1),this._renderTarget.setSize(e,t)}updateBefore(e){const{renderer:t}=e,n=this.textureNode,i=n.value;this._renderTarget.texture.type=i.type;const r=t.getRenderTarget(),s=n.value;bR.material=this._material,this.setSize(i.image.width,i.image.height),t.setRenderTarget(this._renderTarget),bR.render(t),t.setRenderTarget(r),n.value=s}setup(e){const t=this.textureNode;if(!0!==t.isTextureNode)return console.error("AnamorphNode requires a TextureNode."),gS();const n=t.uvNode||AN(),i=eS((()=>{const e=this.samples,i=Math.floor(e/2),r=hS(0).toVar();return JC({start:-i,end:i},(e=>{let{i:s}=e;const a=rS(s).abs().div(i).oneMinus(),o=(e=>t.cache().context({getUV:()=>e,forceUVContext:!0}))(lS(n.x.add(this._invSize.x.mul(s).mul(this.scaleNode)),n.y)),l=GA(o,this.tresholdNode).mul(a);r.addAssign(l)})),r.mul(this.colorNode)}));(this._material||(this._material=e.createNodeMaterial())).fragmentNode=i();return e.getNodeProperties(this).textureNode=t,this._textureNode}}Tw("anamorphic",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;return Kw(new wR(Kw(e),Kw(t),Kw(n),i))}));class SR extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,i=n.getInputs(e),r=this.parameters;if(Array.isArray(r))for(let a=0;a<r.length;a++){const n=i[a],s=r[a];t.push(s.build(e,n.type))}else for(const a of i){const n=r[a.name];if(void 0===n)throw new Error("FunctionCallNode: Input '".concat(a.name,"' not found in FunctionNode."));t.push(n.build(e,a.type))}const s=n.build(e,"property");return"".concat(s,"( ").concat(t.join(", ")," )")}}Tw("call",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n=n.length>1||n[0]&&!0===n[0].isNode?$w(n):Jw(n[0]),Kw(new SR(Kw(e),n))})),sw("FunctionCallNode",SR);class NR extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this._value=e,this._cache=null,this.inputType=null,this.outpuType=null,this.events=new Rv,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return null!==this.outputType}set value(e){this._value!==e&&(this._cache&&"URL"===this.inputType&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&null===this._cache&&"URL"===this.inputType&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&null!==e.value&&void 0!==e.value&&(("URL"===this.inputType||"String"===this.inputType)&&"string"===typeof e.value||"Number"===this.inputType&&"number"===typeof e.value||"Vector2"===this.inputType&&e.value.isVector2||"Vector3"===this.inputType&&e.value.isVector3||"Vector4"===this.inputType&&e.value.isVector4||"Color"===this.inputType&&e.value.isColor||"Matrix3"===this.inputType&&e.value.isMatrix3||"Matrix4"===this.inputType&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:rS()}serialize(e){super.serialize(e),null!==this.value?"ArrayBuffer"===this.inputType?e.value=ew(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;null!==e.value&&(t="ArrayBuffer"===e.inputType?tw(e.value):"Texture"===e.inputType?e.meta.textures[e.value]:e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const TR=Qw(NR);Tw("scriptableValue",TR),sw("ScriptableValueNode",NR);class ER extends Map{get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.has(e))return super.get(e);if(null!==t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const s=t(...i);return this.set(e,s),s}}}class CR{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const MR=new ER;class IR extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.codeNode=e,this.parameters=t,this._local=new ER,this._output=TR(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return void 0===n[e]?n[e]=TR(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):void 0===n[e]?(n[e]=TR(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e){const t=this.getObject()[e];if("function"===typeof t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t(...i)}}async callAsync(e){const t=this.getObject()[e];if("function"===typeof t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return"AsyncFunction"===t.constructor.name?await t(...i):t(...i)}}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),null!==this._object)return this._object;const e=new CR(this),t=MR.get("THREE"),n=MR.get("TSL"),i=this.getMethod(this.codeNode),r=[e,this._local,MR,()=>this.refresh(),(e,t)=>this.setOutput(e,t),t,n];this._object=i(...r);const s=this._object.layout;if(s&&(!1===s.cache&&this._local.clear(),this._output.outputType=s.outputType||null,Array.isArray(s.elements)))for(const a of s.elements){const e=a.id||a.name;a.inputType&&(void 0===this.getParameter(e)&&this.setParameter(e,null),this.getParameter(e).inputType=a.inputType),a.outputType&&(void 0===this.getOutput(e)&&this.setOutput(e,null),this.getOutput(e).outputType=a.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let e=this.parameters[t];e.isScriptableNode&&(e=e.getDefaultOutput()),e.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:rS()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),null!==this._method)return this._method;const e=["layout","init","main","dispose"].join(", "),t="\nreturn { ...output, "+e+" };",n="var "+e+"; var output = {};\n"+this.codeNode.code+t;return this._method=new Function(...["parameters","local","global","refresh","setOutput","THREE","TSL"],n),this._method}dispose(){null!==this._method&&(this._object&&"function"===typeof this._object.dispose&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}set needsUpdate(e){!0===e&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return null===this.codeNode||(!0===this._needsOutputUpdate&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value),this}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}Tw("scriptable",Qw(IR)),sw("ScriptableNode",IR);class AR extends rw{constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}getViewZNode(e){let t;const n=e.context.getViewZ;return void 0!==n&&(t=n(this)),(t||AC.z).negate()}setup(){return this.factorNode}}const RR=AR;Tw("fog",Qw(AR)),sw("FogNode",AR);class PR extends RR{constructor(e,t,n){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=n}setup(e){const t=this.getViewZNode(e);return eE(this.nearNode,this.farNode,t)}}Tw("rangeFog",Qw(PR)),sw("FogRangeNode",PR);class kR extends RR{constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(e){const t=this.getViewZNode(e),n=this.densityNode;return n.mul(n,t,t).negate().exp().oneMinus()}}Tw("densityFog",Qw(kR)),sw("FogExp2Node",kR);let OR=null,LR=null;class DR extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rS(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rS();super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Qb(this.minNode.value)),n=e.getTypeLength(Qb(this.maxNode.value));return t>n?t:n}getNodeType(e){return!0===e.object.isInstancedMesh?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(!0===t.isInstancedMesh){const i=this.minNode.value,r=this.maxNode.value,s=e.getTypeLength(Qb(i)),a=e.getTypeLength(Qb(r));OR=OR||new uy,LR=LR||new uy,OR.setScalar(0),LR.setScalar(0),1===s?OR.setScalar(i):i.isColor?OR.set(i.r,i.g,i.b):OR.set(i.x,i.y,i.z||0,i.w||0),1===a?LR.setScalar(r):r.isColor?LR.set(r.r,r.g,r.b):LR.set(r.x,r.y,r.z||0,r.w||0);const o=4,l=o*t.count,c=new Float32Array(l);for(let e=0;e<l;e++){const t=e%o,n=OR.getComponent(t),i=LR.getComponent(t);c[e]=Bv.lerp(n,i,Math.random())}const u=this.getNodeType(e);n=bE(c,"vec4",t.count).element(JS).convert(u)}else n=rS(0);return n}}Qw(DR);sw("RangeNode",DR);class jR extends rw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[64];super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.updateBeforeType=Ug,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let i=1;i<t.length;i++)n*=t[i];this.dispatchCount=Math.ceil(e/n)}onInit(){}updateBefore(e){let{renderer:t}=e;t.compute(this)}generate(e){const{shaderStage:t}=e;if("compute"===t){const t=this.computeNode.build(e,"void");""!==t&&e.addLineFlowCode(t)}}}Tw("compute",((e,t,n)=>Kw(new jR(Kw(e),t,n)))),sw("ComputeNode",jR);class UR extends rw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UR.TARGET_DIRECTION,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.scope=e,this.light=t}setup(){const{scope:e,light:t}=this;let n=null;return e===UR.TARGET_DIRECTION&&(n=zE.transformDirection(PE(t).sub(PE(t.target)))),n}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}UR.TARGET_DIRECTION="targetDirection";const zR=Qw(UR,UR.TARGET_DIRECTION);sw("LightNode",UR);const FR=eS((e=>{const{lightDistance:t,cutoffDistance:n,decayExponent:i}=e,r=t.pow(i).max(.01).reciprocal();return n.greaterThan(0).cond(r.mul(t.div(n).pow4().oneMinus().clamp().pow2()),r)}));class VR extends uM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),this.cutoffDistanceNode=MN(0),this.decayExponentNode=MN(0)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:i,light:r}=this,s=e.context.lightingModel,a=kE(r).sub(AC),o=a.normalize(),l=a.length(),c=FR({lightDistance:l,cutoffDistance:n,decayExponent:i}),u=t.mul(c),d=e.context.reflectedLight;s.direct({lightDirection:o,lightColor:u,reflectedLight:d},e.stack,e)}}sw("PointLightNode",VR),fM(jb,VR);class BR extends uM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}setup(e){super.setup(e);const t=e.context.lightingModel,n=this.colorNode,i=zR(this.light),r=e.context.reflectedLight;t.direct({lightDirection:i,lightColor:n,reflectedLight:r},e.stack,e)}}sw("DirectionalLightNode",BR),fM(zb,BR);class HR extends uM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),this.coneCosNode=MN(0),this.penumbraCosNode=MN(0),this.cutoffDistanceNode=MN(0),this.decayExponentNode=MN(0)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:n}=this;return eE(t,n,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:n,cutoffDistanceNode:i,decayExponentNode:r,light:s}=this,a=kE(s).sub(AC),o=a.normalize(),l=o.dot(zR(s)),c=this.getSpotAttenuation(l),u=a.length(),d=FR({lightDistance:u,cutoffDistance:i,decayExponent:r}),h=n.mul(c).mul(d),p=e.context.reflectedLight;t.direct({lightDirection:o,lightColor:h,reflectedLight:p},e.stack,e)}}const WR=HR;sw("SpotLightNode",HR),fM(Pb,HR);const qR=class extends Pb{constructor(e,t,n,i,r,s){super(e,t,n,i,r,s),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}};class GR extends WR{getSpotAttenuation(e){const t=this.light.iesMap;let n=null;if(t&&!0===t.isTexture){const i=e.acos().mul(1/Math.PI);n=vE(t,lS(i,0),0).r}else n=super.getSpotAttenuation(e);return n}}sw("IESSpotLightNode",GR),fM(qR,GR);class YR extends uM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}setup(e){let{context:t}=e;t.irradiance.addAssign(this.colorNode)}}sw("AmbientLightNode",YR),fM(Fb,YR);class XR extends uM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(e),this.lightPositionNode=PE(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=MN(new k_)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:i}=this,r=YE.dot(i).mul(.5).add(.5),s=$T(n,t,r);e.context.irradiance.addAssign(s)}}sw("HemisphereLightNode",XR),fM(Eb,XR);const KR=eS((e=>{const t=e.uv.mul(2),n=t.x.floor(),i=t.y.floor();return n.add(i).mod(2).sign()}));class JR extends ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AN();super("float"),this.uvNode=e}setup(){return KR({uv:this.uvNode})}}Tw("checker",Qw(JR)),sw("CheckerNode",JR);const $R=new Gx;class QR extends bI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.normals=!1,this.lights=!1,this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.pointWidth=1,this.pointColorNode=null,this.setDefaultValues($R),this.setupShaders(),this.setValues(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor;this.vertexNode=eS((()=>{LS(lS(),"vUv").assign(AN());const e=US("instancePosition"),t=nN("vec4","mvPos");t.assign(VE.mul(gS(e,1)));const n=eI.z.div(eI.w),i=LE.mul(t),r=nN("vec2","offset");return r.assign(EC.xy),r.assign(r.mul(NC)),r.assign(r.div(eI.z)),r.y.assign(r.y.mul(n)),r.assign(r.mul(i.w)),i.assign(i.add(gS(r,0,0))),i}))(),this.fragmentNode=eS((()=>{const n=LS(lS(),"vUv"),i=nN("float","alpha");i.assign(1);const r=n.x,s=n.y,a=r.mul(r).add(s.mul(s));if(e){const e=nN("float","dlen");e.assign(a.fwidth()),i.assign(eE(e.oneMinus(),e.add(1),a).oneMinus())}else a.greaterThan(1).discard();let o;if(this.pointColorNode)o=this.pointColorNode;else if(t){o=US("instanceColor").mul(tC)}else o=tC;return gS(o,i)}))(),this.needsUpdate=!0}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.setupShaders())}}wI("InstancedPointsNodeMaterial",QR);const ZR=new qx;class eP extends bI{constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(ZR),this.setValues(e)}}wI("LineBasicNodeMaterial",eP);const tP=new ib;class nP extends bI{constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(tP),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode,t=this.dashScaleNode?rS(this.dashScaleNode):_C,n=this.dashSizeNode?rS(this.dashSizeNode):xC,i=this.dashSizeNode?rS(this.dashGapNode):bC;vN.assign(n),yN.assign(i);const r=LS(US("lineDistance").mul(t));(e?r.add(e):r).mod(vN.add(yN)).greaterThan(vN).discard()}}wI("LineDashedNodeMaterial",nP);const iP=new ib;class rP extends bI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.normals=!1,this.lights=!1,this.setDefaultValues(iP),this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.useDash=e.dashed,this.useWorldUnits=!1,this.dashOffset=0,this.lineWidth=1,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setupShaders(),this.setValues(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor,n=this.dashed,i=this.worldUnits,r=eS((e=>{let{start:t,end:n}=e;const i=LE.element(2).element(2),r=LE.element(3).element(2).mul(-.5).div(i).sub(t.z).div(n.z.sub(t.z));return gS($T(t.xyz,n.xyz,r),n.w)}));this.vertexNode=eS((()=>{iN("vec2","vUv").assign(AN());const e=US("instanceStart"),t=US("instanceEnd"),s=nN("vec4","start"),a=nN("vec4","end");s.assign(VE.mul(gS(e,1))),a.assign(VE.mul(gS(t,1))),i&&(iN("vec3","worldStart").assign(s.xyz),iN("vec3","worldEnd").assign(a.xyz));const o=eI.z.div(eI.w),l=LE.element(2).element(3).equal(-1);nS(l,(()=>{nS(s.z.lessThan(0).and(a.z.greaterThan(0)),(()=>{a.assign(r({start:s,end:a}))})).elseif(a.z.lessThan(0).and(s.z.greaterThanEqual(0)),(()=>{s.assign(r({start:a,end:s}))}))}));const c=LE.mul(s),u=LE.mul(a),d=c.xyz.div(c.w),h=u.xyz.div(u.w),p=h.xy.sub(d.xy).temp();p.x.assign(p.x.mul(o)),p.assign(p.normalize());const f=ZS(gS());if(i){const e=a.xyz.sub(s.xyz).normalize(),t=$T(s.xyz,a.xyz,.5).normalize(),i=e.cross(t).normalize(),r=e.cross(i),o=iN("vec4","worldPos");o.assign(EC.y.lessThan(.5).cond(s,a));const l=wC.mul(.5);o.addAssign(gS(EC.x.lessThan(0).cond(i.mul(l),i.mul(l).negate()),0)),n||(o.addAssign(gS(EC.y.lessThan(.5).cond(e.mul(l).negate(),e.mul(l)),0)),o.addAssign(gS(r.mul(l),0)),nS(EC.y.greaterThan(1).or(EC.y.lessThan(0)),(()=>{o.subAssign(gS(r.mul(2).mul(l),0))}))),f.assign(LE.mul(o));const c=ZS(hS());c.assign(EC.y.lessThan(.5).cond(d,h)),f.z.assign(c.z.mul(f.w))}else{const e=nN("vec2","offset");e.assign(lS(p.y,p.x.negate())),p.x.assign(p.x.div(o)),e.x.assign(e.x.div(o)),e.assign(EC.x.lessThan(0).cond(e.negate(),e)),nS(EC.y.lessThan(0),(()=>{e.assign(e.sub(p))})).elseif(EC.y.greaterThan(1),(()=>{e.assign(e.add(p))})),e.assign(e.mul(wC)),e.assign(e.div(eI.w)),f.assign(EC.y.lessThan(.5).cond(c,u)),e.assign(e.mul(f.w)),f.assign(f.add(gS(e,0,0)))}return f}))();const s=eS((e=>{let{p1:t,p2:n,p3:i,p4:r}=e;const s=t.sub(i),a=r.sub(i),o=n.sub(t),l=s.dot(a),c=a.dot(o),u=s.dot(o),d=a.dot(a),h=o.dot(o).mul(d).sub(c.mul(c)),p=l.mul(c).sub(u.mul(d)).div(h).clamp(),f=l.add(c.mul(p)).div(d).clamp();return lS(p,f)}));this.fragmentNode=eS((()=>{const r=iN("vec2","vUv");if(n){const e=this.offsetNode?rS(this.offsetNodeNode):SC,t=this.dashScaleNode?rS(this.dashScaleNode):_C,n=this.dashSizeNode?rS(this.dashSizeNode):xC,i=this.dashSizeNode?rS(this.dashGapNode):bC;vN.assign(n),yN.assign(i);const s=US("instanceDistanceStart"),a=US("instanceDistanceEnd"),o=EC.y.lessThan(.5).cond(t.mul(s),_C.mul(a)),l=LS(o.add(SC)),c=e?l.add(e):l;r.y.lessThan(-1).or(r.y.greaterThan(1)).discard(),c.mod(vN.add(yN)).greaterThan(vN).discard()}const a=nN("float","alpha");if(a.assign(1),i){const t=iN("vec3","worldStart"),i=iN("vec3","worldEnd"),r=iN("vec4","worldPos").xyz.normalize().mul(1e5),o=i.sub(t),l=s({p1:t,p2:i,p3:hS(0,0,0),p4:r}),c=t.add(o.mul(l.x)),u=r.mul(l.y),d=c.sub(u).length().div(wC);if(!n)if(e){const e=d.fwidth();a.assign(eE(e.negate().add(.5),e.add(.5),d).oneMinus())}else d.greaterThan(.5).discard()}else if(e){const e=r.x,t=r.y.greaterThan(0).cond(r.y.sub(1),r.y.add(1)),n=e.mul(e).add(t.mul(t)),i=nN("float","dlen");i.assign(n.fwidth()),nS(r.y.abs().greaterThan(1),(()=>{a.assign(eE(i.oneMinus(),i.add(1),n).oneMinus())}))}else nS(r.y.abs().greaterThan(1),(()=>{const e=r.x,t=r.y.greaterThan(0).cond(r.y.sub(1),r.y.add(1));e.mul(e).add(t.mul(t)).greaterThan(1).discard()}));let o;if(this.lineColorNode)o=this.lineColorNode;else if(t){const e=US("instanceColorStart"),t=US("instanceColorEnd");o=EC.y.lessThan(.5).cond(e,t).mul(tC)}else o=tC;return gS(o,a)}))(),this.needsUpdate=!0}get worldUnits(){return this.useWorldUnits}set worldUnits(e){this.useWorldUnits!==e&&(this.useWorldUnits=e,this.setupShaders())}get dashed(){return this.useDash}set dashed(e){this.useDash!==e&&(this.useDash=e,this.setupShaders())}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.setupShaders())}}wI("Line2NodeMaterial",rP);const sP=new eb;class aP extends bI{constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.colorSpaced=!1,this.setDefaultValues(sP),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?rS(this.opacityNode):rC;rN.assign(gS(qI(KE),e))}}wI("MeshNormalNodeMaterial",aP);const oP=new j_;class lP extends bI{constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(oP),this.setValues(e)}}wI("MeshBasicNodeMaterial",lP);const cP=eS((e=>{let{f0:t,f90:n,dotVH:i}=e;const r=i.mul(-5.55473).sub(6.98316).mul(i).exp2();return t.mul(r.oneMinus()).add(n.mul(r))})),uP=eS((e=>e.diffuseColor.mul(1/Math.PI))),dP=eS((e=>{let{dotNH:t}=e;return mN.mul(.5/Math.PI).add(1).mul(t.pow(mN))})),hP=eS((e=>{let{lightDirection:t}=e;const n=t.add(RC).normalize(),i=KE.dot(n).clamp(),r=RC.dot(n).clamp(),s=cP({f0:fN,f90:1,dotVH:r}),a=rS(.25),o=dP({dotNH:i});return s.mul(a).mul(o)}));const pP=class extends $S{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super(),this.specular=e}direct(e){let{lightDirection:t,lightColor:n,reflectedLight:i}=e;const r=KE.dot(t).clamp().mul(n);i.directDiffuse.addAssign(r.mul(uP({diffuseColor:rN.rgb}))),!0===this.specular&&i.directSpecular.addAssign(r.mul(hP({lightDirection:t})).mul(aC))}indirectDiffuse(e){let{irradiance:t,reflectedLight:n}=e;n.indirectDiffuse.addAssign(t.mul(uP({diffuseColor:rN})))}},fP=new tb;class mP extends bI{constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(fP),this.setValues(e)}setupLightingModel(){return new pP(!1)}}wI("MeshLambertNodeMaterial",mP);const gP=new Qx;class vP extends bI{constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(gP),this.setValues(e)}setupLightingModel(){return new pP}setupVariants(){const e=(this.shininessNode?rS(this.shininessNode):nC).max(1e-4);mN.assign(e);const t=this.specularNode||sC;fN.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}wI("MeshPhongNodeMaterial",vP);const yP=eS((()=>{const e=qE.dFdx().abs().max(qE.dFdy().abs());return e.x.max(e.y).max(e.z)})),_P=eS((e=>{const{roughness:t}=e,n=yP();let i=t.max(.0525);return i=i.add(n),i=i.min(1),i})),xP=_P,bP=eS((e=>{const{alpha:t,dotNL:n,dotNV:i}=e,r=t.pow2(),s=n.mul(r.add(r.oneMinus().mul(i.pow2())).sqrt()),a=i.mul(r.add(r.oneMinus().mul(n.pow2())).sqrt());return jN(.5,s.add(a).max(nT))})).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),wP=eS((e=>{let{alpha:t,dotNH:n}=e;const i=t.pow2(),r=n.pow2().mul(i.oneMinus()).oneMinus();return i.div(r.pow2()).mul(1/Math.PI)})).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),SP=eS((e=>{const{lightDirection:t,f0:n,f90:i,roughness:r,iridescenceFresnel:s}=e,a=e.normalView||KE,o=r.pow2(),l=t.add(RC).normalize(),c=a.dot(t).clamp(),u=a.dot(RC).clamp(),d=a.dot(l).clamp(),h=RC.dot(l).clamp();let p=cP({f0:n,f90:i,dotVH:h});s&&(p=dN.mix(p,s));const f=bP({alpha:o,dotNL:c,dotNV:u}),m=wP({alpha:o,dotNH:d});return p.mul(f).mul(m)})),NP=SP,TP=eS((e=>{let{roughness:t,dotNV:n}=e;const i=gS(-1,-.0275,-.572,.022),r=gS(1,.0425,1.04,-.04),s=t.mul(i).add(r),a=s.x.mul(s.x).min(n.mul(-9.28).exp2()).mul(s.x).add(s.y);return lS(-1.04,1.04).mul(a).add(s.zw)})).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),EP=TP,CP=eS((e=>{const{dotNV:t,specularColor:n,specularF90:i,roughness:r}=e,s=EP({dotNV:t,roughness:r});return n.mul(s.x).add(i.mul(s.y))})),MP=CP,IP=eS((e=>{let{f:t,f90:n,dotVH:i}=e;const r=i.oneMinus().saturate(),s=r.mul(r),a=r.mul(s,s).clamp(0,.9999);return t.sub(hS(n).mul(a)).div(a.oneMinus())})).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),AP=eS((e=>{let{roughness:t,dotNH:n}=e;const i=t.pow2(),r=rS(1).div(i),s=n.pow2().oneMinus().max(.0078125);return rS(2).add(r).mul(s.pow(r.mul(.5))).div(2*Math.PI)})).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),RP=eS((e=>{let{dotNV:t,dotNL:n}=e;return rS(1).div(rS(4).mul(n.add(t).sub(n.mul(t))))})).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),PP=eS((e=>{let{lightDirection:t}=e;const n=t.add(RC).normalize(),i=KE.dot(t).clamp(),r=KE.dot(RC).clamp(),s=KE.dot(n).clamp(),a=AP({roughness:uN,dotNH:s}),o=RP({dotNV:r,dotNL:i});return cN.mul(a).mul(o)})),kP=NS(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),OP=(e,t)=>e.sub(t).div(e.add(t)).pow2(),LP=(e,t)=>{const n=e.mul(2*Math.PI*1e-9),i=hS(54856e-17,44201e-17,52481e-17),r=hS(1681e3,1795300,2208400),s=hS(43278e5,93046e5,66121e5),a=rS(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(n.mul(2239900).add(t.x).cos()).mul(n.pow2().mul(-45282e5).exp());let o=i.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(n).add(t).cos()).mul(n.pow2().negate().mul(s).exp());o=hS(o.x.add(a),o.y,o.z).div(1.0685e-7);return kP.mul(o)},DP=eS((e=>{let{outsideIOR:t,eta2:n,cosTheta1:i,thinFilmThickness:r,baseF0:s}=e;const a=$T(t,n,eE(0,.03,r)),o=t.div(a).pow2().mul(rS(1).sub(i.pow2())),l=rS(1).sub(o).sqrt(),c=OP(a,t),u=cP({f0:c,f90:1,dotVH:i}),d=u.oneMinus(),h=a.lessThan(t).cond(Math.PI,0),p=rS(Math.PI).sub(h),f=(e=>{const t=e.sqrt();return hS(1).add(t).div(hS(1).sub(t))})(s.clamp(0,.9999)),m=OP(f,a.vec3()),g=cP({f0:m,f90:1,dotVH:l}),v=hS(f.x.lessThan(a).cond(Math.PI,0),f.y.lessThan(a).cond(Math.PI,0),f.z.lessThan(a).cond(Math.PI,0)),y=a.mul(r,l,2),_=hS(p).add(v),x=u.mul(g).clamp(1e-5,.9999),b=x.sqrt(),w=d.pow2().mul(g).div(hS(1).sub(x));let S=u.add(w),N=w.sub(d);for(let T=1;T<=2;++T){N=N.mul(b);const e=LP(rS(T).mul(y),rS(T).mul(_)).mul(2);S=S.add(N.mul(e))}return S.max(hS(0))})).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),jP=eS((e=>{let{normal:t,viewDir:n,roughness:i}=e;const r=t.dot(n).saturate(),s=i.pow2(),a=bM(i.lessThan(.25),rS(-339.2).mul(s).add(rS(161.4).mul(i)).sub(25.9),rS(-8.48).mul(s).add(rS(14.3).mul(i)).sub(9.95)),o=bM(i.lessThan(.25),rS(44).mul(s).sub(rS(23.7).mul(i)).add(3.26),rS(1.97).mul(s).sub(rS(3.27).mul(i)).add(.72));return bM(i.lessThan(.25),0,rS(.1).mul(i).sub(.025)).add(a.mul(r).add(o).exp()).mul(1/Math.PI).saturate()})),UP=hS(.04),zP=hS(1);const FP=class extends $S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(){if(!0===this.clearcoat&&(this.clearcoatRadiance=hS().temp("clearcoatRadiance"),this.clearcoatSpecularDirect=hS().temp("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=hS().temp("clearcoatSpecularIndirect")),!0===this.sheen&&(this.sheenSpecularDirect=hS().temp("sheenSpecularDirect"),this.sheenSpecularIndirect=hS().temp("sheenSpecularIndirect")),!0===this.iridescence){const e=KE.dot(RC).clamp();this.iridescenceFresnel=DP({outsideIOR:rS(1),eta2:hN,cosTheta1:e,thinFilmThickness:pN,baseF0:fN}),this.iridescenceF0=IP({f:this.iridescenceFresnel,f90:1,dotVH:e})}}computeMultiscattering(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rS(1);const i=KE.dot(RC).clamp(),r=EP({roughness:sN,dotNV:i}),s=(this.iridescenceF0?dN.mix(fN,this.iridescenceF0):fN).mul(r.x).add(n.mul(r.y)),a=r.x.add(r.y).oneMinus(),o=fN.add(fN.oneMinus().mul(.047619)),l=s.mul(o).div(a.mul(o).oneMinus());e.addAssign(s),t.addAssign(l.mul(a))}direct(e){let{lightDirection:t,lightColor:n,reflectedLight:i}=e;const r=KE.dot(t).clamp().mul(n);if(!0===this.sheen&&this.sheenSpecularDirect.addAssign(r.mul(PP({lightDirection:t}))),!0===this.clearcoat){const e=$E.dot(t).clamp().mul(n);this.clearcoatSpecularDirect.addAssign(e.mul(NP({lightDirection:t,f0:UP,f90:zP,roughness:lN,normalView:$E})))}i.directDiffuse.addAssign(r.mul(uP({diffuseColor:rN.rgb}))),i.directSpecular.addAssign(r.mul(NP({lightDirection:t,f0:fN,f90:1,roughness:sN,iridescence:this.iridescence,iridescenceFresnel:this.iridescenceFresnel})))}indirectDiffuse(e){let{irradiance:t,reflectedLight:n}=e;n.indirectDiffuse.addAssign(t.mul(uP({diffuseColor:rN})))}indirectSpecular(e){let{radiance:t,iblIrradiance:n,reflectedLight:i}=e;if(!0===this.sheen&&this.sheenSpecularIndirect.addAssign(n.mul(cN,jP({normal:KE,viewDir:RC,roughness:uN}))),!0===this.clearcoat){const e=$E.dot(RC).clamp(),t=MP({dotNV:e,specularColor:UP,specularF90:zP,roughness:lN});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(t))}const r=hS().temp("singleScattering"),s=hS().temp("multiScattering"),a=n.mul(1/Math.PI);this.computeMultiscattering(r,s);const o=r.add(s),l=rN.mul(o.r.max(o.g).max(o.b).oneMinus());i.indirectSpecular.addAssign(t.mul(r)),i.indirectSpecular.addAssign(s.mul(a)),i.indirectDiffuse.addAssign(l.mul(a))}ambientOcclusion(e){let{ambientOcclusion:t,reflectedLight:n}=e;const i=KE.dot(RC).clamp().add(t),r=sN.mul(-16).oneMinus().negate().exp2(),s=t.sub(i.pow(r).oneMinus()).clamp();!0===this.clearcoat&&this.clearcoatSpecularIndirect.mulAssign(t),!0===this.sheen&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(s)}finish(e){const{outgoingLight:t}=e;if(!0===this.clearcoat){const e=$E.dot(RC).clamp(),n=cP({dotVH:e,f0:UP,f90:zP}),i=t.mul(oN.mul(n).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(oN));t.assign(i)}if(!0===this.sheen){const e=cN.r.max(cN.g).max(cN.b).mul(.157).oneMinus(),n=t.mul(e).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(n)}}},VP=new Jx;class BP extends bI{constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(VP),this.setValues(e)}setupLightingModel(){return new FP}setupVariants(){const e=this.metalnessNode?rS(this.metalnessNode):lC;aN.assign(e);let t=this.roughnessNode?rS(this.roughnessNode):oC;t=xP({roughness:t}),sN.assign(t);const n=$T(hS(.04),rN.rgb,e);fN.assign(n),rN.assign(gS(rN.rgb.mul(e.oneMinus()),rN.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const HP=BP;wI("MeshStandardNodeMaterial",BP);const WP=new $x;class qP extends HP{constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.setDefaultValues(WP),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||null!==this.clearcoatNode}get useIridescence(){return this.iridescence>0||null!==this.iridescenceNode}get useSheen(){return this.sheen>0||null!==this.sheenNode}setupLightingModel(){return new FP(this.useClearcoat,this.useSheen,this.useIridescence)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const e=this.clearcoatNode?rS(this.clearcoatNode):uC,t=this.clearcoatRoughnessNode?rS(this.clearcoatRoughnessNode):dC;oN.assign(e),lN.assign(t)}if(this.useSheen){const e=this.sheenNode?hS(this.sheenNode):fC,t=this.sheenRoughnessNode?rS(this.sheenRoughnessNode):mC;cN.assign(e),uN.assign(t)}if(this.useIridescence){const e=this.iridescenceNode?rS(this.iridescenceNode):gC,t=this.iridescenceIORNode?rS(this.iridescenceIORNode):vC,n=this.iridescenceThicknessNode?rS(this.iridescenceThicknessNode):yC;dN.assign(e),hN.assign(t),pN.assign(n)}}setupNormal(e){super.setupNormal(e);const t=this.clearcoatNormalNode?hS(this.clearcoatNormalNode):hC;$E.assign(t)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,super.copy(e)}}const GP=qP;wI("MeshPhysicalNodeMaterial",qP);class YP extends FP{constructor(e,t,n,i){super(e,t,n),this.useSSS=i}direct(e,t,n){let{lightDirection:i,lightColor:r,reflectedLight:s}=e;if(!0===this.useSSS){const e=n.material,{thicknessColorNode:t,thicknessDistortionNode:a,thicknessAmbientNode:o,thicknessAttenuationNode:l,thicknessPowerNode:c,thicknessScaleNode:u}=e,d=i.add(KE.mul(a)).normalize(),h=rS(RC.dot(d.negate()).saturate().pow(c).mul(u)),p=hS(h.add(o).mul(t));s.directDiffuse.addAssign(p.mul(l.mul(r)))}super.direct({lightDirection:i,lightColor:r,reflectedLight:s},t,n)}}class XP extends GP{constructor(e){super(e),this.thicknessColorNode=null,this.thicknessDistortionNode=rS(.1),this.thicknessAmbientNode=rS(0),this.thicknessAttenuationNode=rS(.1),this.thicknessPowerNode=rS(2),this.thicknessScaleNode=rS(10)}get useSSS(){return null!==this.thicknessColorNode}setupLightingModel(){return new YP(this.useClearcoat,this.useSheen,this.useIridescence,this.useSSS)}copy(e){return this.thicknessColorNode=e.thicknessColorNode,this.thicknessDistortionNode=e.thicknessDistortionNode,this.thicknessAmbientNode=e.thicknessAmbientNode,this.thicknessAttenuationNode=e.thicknessAttenuationNode,this.thicknessPowerNode=e.thicknessPowerNode,this.thicknessScaleNode=e.thicknessScaleNode,super.copy(e)}}wI("MeshSSSNodeMaterial",XP);const KP=new Gx;class JP extends bI{constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.normals=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(KP),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}wI("PointsNodeMaterial",JP);const $P=new Hx;class QP extends bI{constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this.normals=!1,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues($P),this.setValues(e)}setupPosition(e){let{object:t,context:n}=e;const{positionNode:i,rotationNode:r,scaleNode:s}=this,a=CC;let o=VE.mul(hS(i||0)),l=lS(HE[0].xyz.length(),HE[1].xyz.length());null!==s&&(l=l.mul(s));let c=a.xy;t.center&&!0===t.center.isVector2&&(c=c.sub(MN(t.center).sub(.5))),c=c.mul(l);const u=rS(r||pC),d=c.rotate(u);o=gS(o.xy.add(d),o.zw);const h=LE.mul(o);return n.vertex=a,h}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}}wI("SpriteNodeMaterial",QP);const ZP=Vb.createMaterialFromType;Vb.createMaterialFromType=function(e){const t=SI(e);return void 0!==t?t:ZP.call(this,e)};class ek{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.type=e,this.inputs=t,this.name=n,this.presicion=i}getCode(){console.warn("Abstract function.")}}ek.isNodeFunction=!0;const tk=eS((e=>{let[t,n,i]=e;const r=rS(i).toVar(),s=rS(n).toVar(),a=oS(t).toVar();return bM(a,s,r)})),nk=eS((e=>{let[t,n]=e;const i=oS(n).toVar(),r=rS(t).toVar();return bM(i,r.negate(),r)})),ik=eS((e=>{let[t]=e;const n=rS(t).toVar();return sS(mT(n))})),rk=eS((e=>{let[t,n]=e;const i=rS(t).toVar();return n.assign(ik(i)),i.sub(rS(n))})),sk=eS((e=>{let[t,n,i,r,s,a]=e;const o=rS(a).toVar(),l=rS(s).toVar(),c=rS(r).toVar(),u=rS(i).toVar(),d=rS(n).toVar(),h=rS(t).toVar(),p=rS(LN(1,l)).toVar();return LN(1,o).mul(h.mul(p).add(d.mul(l))).add(o.mul(u.mul(p).add(c.mul(l))))})),ak=eS((e=>{let[t,n,i,r,s,a]=e;const o=rS(a).toVar(),l=rS(s).toVar(),c=hS(r).toVar(),u=hS(i).toVar(),d=hS(n).toVar(),h=hS(t).toVar(),p=rS(LN(1,l)).toVar();return LN(1,o).mul(h.mul(p).add(d.mul(l))).add(o.mul(u.mul(p).add(c.mul(l))))})),ok=FI([sk,ak]),lk=eS((e=>{let[t,n,i,r,s,a,o,l,c,u,d]=e;const h=rS(d).toVar(),p=rS(u).toVar(),f=rS(c).toVar(),m=rS(l).toVar(),g=rS(o).toVar(),v=rS(a).toVar(),y=rS(s).toVar(),_=rS(r).toVar(),x=rS(i).toVar(),b=rS(n).toVar(),w=rS(t).toVar(),S=rS(LN(1,f)).toVar(),N=rS(LN(1,p)).toVar();return rS(LN(1,h)).toVar().mul(N.mul(w.mul(S).add(b.mul(f))).add(p.mul(x.mul(S).add(_.mul(f))))).add(h.mul(N.mul(y.mul(S).add(v.mul(f))).add(p.mul(g.mul(S).add(m.mul(f))))))})),ck=eS((e=>{let[t,n,i,r,s,a,o,l,c,u,d]=e;const h=rS(d).toVar(),p=rS(u).toVar(),f=rS(c).toVar(),m=hS(l).toVar(),g=hS(o).toVar(),v=hS(a).toVar(),y=hS(s).toVar(),_=hS(r).toVar(),x=hS(i).toVar(),b=hS(n).toVar(),w=hS(t).toVar(),S=rS(LN(1,f)).toVar(),N=rS(LN(1,p)).toVar();return rS(LN(1,h)).toVar().mul(N.mul(w.mul(S).add(b.mul(f))).add(p.mul(x.mul(S).add(_.mul(f))))).add(h.mul(N.mul(y.mul(S).add(v.mul(f))).add(p.mul(g.mul(S).add(m.mul(f))))))})),uk=FI([lk,ck]),dk=eS((e=>{let[t,n,i]=e;const r=rS(i).toVar(),s=rS(n).toVar(),a=aS(t).toVar(),o=aS(a.bitAnd(aS(7))).toVar(),l=rS(tk(o.lessThan(aS(4)),s,r)).toVar(),c=rS(DN(2,tk(o.lessThan(aS(4)),r,s))).toVar();return nk(l,oS(o.bitAnd(aS(1)))).add(nk(c,oS(o.bitAnd(aS(2)))))})),hk=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=rS(n).toVar(),l=aS(t).toVar(),c=aS(l.bitAnd(aS(15))).toVar(),u=rS(tk(c.lessThan(aS(8)),o,a)).toVar(),d=rS(tk(c.lessThan(aS(4)),a,tk(c.equal(aS(12)).or(c.equal(aS(14))),o,s))).toVar();return nk(u,oS(c.bitAnd(aS(1)))).add(nk(d,oS(c.bitAnd(aS(2)))))})),pk=FI([dk,hk]),fk=eS((e=>{let[t,n,i]=e;const r=rS(i).toVar(),s=rS(n).toVar(),a=fS(t).toVar();return hS(pk(a.x,s,r),pk(a.y,s,r),pk(a.z,s,r))})),mk=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=rS(n).toVar(),l=fS(t).toVar();return hS(pk(l.x,o,a,s),pk(l.y,o,a,s),pk(l.z,o,a,s))})),gk=FI([fk,mk]),vk=eS((e=>{let[t]=e;const n=rS(t).toVar();return DN(.6616,n)})),yk=eS((e=>{let[t]=e;const n=rS(t).toVar();return DN(.982,n)})),_k=eS((e=>{let[t]=e;const n=hS(t).toVar();return DN(.6616,n)})),xk=FI([vk,_k]),bk=eS((e=>{let[t]=e;const n=hS(t).toVar();return DN(.982,n)})),wk=FI([yk,bk]),Sk=eS((e=>{let[t,n]=e;const i=sS(n).toVar(),r=aS(t).toVar();return r.shiftLeft(i).bitOr(r.shiftRight(sS(32).sub(i)))})),Nk=eS((e=>{let[t,n,i]=e;t.subAssign(i),t.bitXorAssign(Sk(i,sS(4))),i.addAssign(n),n.subAssign(t),n.bitXorAssign(Sk(t,sS(6))),t.addAssign(i),i.subAssign(n),i.bitXorAssign(Sk(n,sS(8))),n.addAssign(t),t.subAssign(i),t.bitXorAssign(Sk(i,sS(16))),i.addAssign(n),n.subAssign(t),n.bitXorAssign(Sk(t,sS(19))),t.addAssign(i),i.subAssign(n),i.bitXorAssign(Sk(n,sS(4))),n.addAssign(t)})),Tk=eS((e=>{let[t,n,i]=e;const r=aS(i).toVar(),s=aS(n).toVar(),a=aS(t).toVar();return r.bitXorAssign(s),r.subAssign(Sk(s,sS(14))),a.bitXorAssign(r),a.subAssign(Sk(r,sS(11))),s.bitXorAssign(a),s.subAssign(Sk(a,sS(25))),r.bitXorAssign(s),r.subAssign(Sk(s,sS(16))),a.bitXorAssign(r),a.subAssign(Sk(r,sS(4))),s.bitXorAssign(a),s.subAssign(Sk(a,sS(14))),r.bitXorAssign(s),r.subAssign(Sk(s,sS(24))),r})),Ek=eS((e=>{let[t]=e;const n=aS(t).toVar();return rS(n).div(rS(aS(sS(4294967295))))})),Ck=eS((e=>{let[t]=e;const n=rS(t).toVar();return n.mul(n.mul(n.mul(n.mul(n.mul(6).sub(15)).add(10))))})),Mk=eS((e=>{let[t]=e;const n=sS(t).toVar(),i=aS(aS(1)).toVar(),r=aS(aS(sS(3735928559)).add(i.shiftLeft(aS(2)).add(aS(13)))).toVar();return Tk(r.add(aS(n)),r,r)})),Ik=eS((e=>{let[t,n]=e;const i=sS(n).toVar(),r=sS(t).toVar(),s=aS(aS(2)).toVar(),a=aS().toVar(),o=aS().toVar(),l=aS().toVar();return a.assign(o.assign(l.assign(aS(sS(3735928559)).add(s.shiftLeft(aS(2)).add(aS(13)))))),a.addAssign(aS(r)),o.addAssign(aS(i)),Tk(a,o,l)})),Ak=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=sS(n).toVar(),a=sS(t).toVar(),o=aS(aS(3)).toVar(),l=aS().toVar(),c=aS().toVar(),u=aS().toVar();return l.assign(c.assign(u.assign(aS(sS(3735928559)).add(o.shiftLeft(aS(2)).add(aS(13)))))),l.addAssign(aS(a)),c.addAssign(aS(s)),u.addAssign(aS(r)),Tk(l,c,u)})),Rk=eS((e=>{let[t,n,i,r]=e;const s=sS(r).toVar(),a=sS(i).toVar(),o=sS(n).toVar(),l=sS(t).toVar(),c=aS(aS(4)).toVar(),u=aS().toVar(),d=aS().toVar(),h=aS().toVar();return u.assign(d.assign(h.assign(aS(sS(3735928559)).add(c.shiftLeft(aS(2)).add(aS(13)))))),u.addAssign(aS(l)),d.addAssign(aS(o)),h.addAssign(aS(a)),Nk(u,d,h),u.addAssign(aS(s)),Tk(u,d,h)})),Pk=eS((e=>{let[t,n,i,r,s]=e;const a=sS(s).toVar(),o=sS(r).toVar(),l=sS(i).toVar(),c=sS(n).toVar(),u=sS(t).toVar(),d=aS(aS(5)).toVar(),h=aS().toVar(),p=aS().toVar(),f=aS().toVar();return h.assign(p.assign(f.assign(aS(sS(3735928559)).add(d.shiftLeft(aS(2)).add(aS(13)))))),h.addAssign(aS(u)),p.addAssign(aS(c)),f.addAssign(aS(l)),Nk(h,p,f),h.addAssign(aS(o)),p.addAssign(aS(a)),Tk(h,p,f)})),kk=FI([Mk,Ik,Ak,Rk,Pk]),Ok=eS((e=>{let[t,n]=e;const i=sS(n).toVar(),r=sS(t).toVar(),s=aS(kk(r,i)).toVar(),a=fS().toVar();return a.x.assign(s.bitAnd(sS(255))),a.y.assign(s.shiftRight(sS(8)).bitAnd(sS(255))),a.z.assign(s.shiftRight(sS(16)).bitAnd(sS(255))),a})),Lk=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=sS(n).toVar(),a=sS(t).toVar(),o=aS(kk(a,s,r)).toVar(),l=fS().toVar();return l.x.assign(o.bitAnd(sS(255))),l.y.assign(o.shiftRight(sS(8)).bitAnd(sS(255))),l.z.assign(o.shiftRight(sS(16)).bitAnd(sS(255))),l})),Dk=FI([Ok,Lk]),jk=eS((e=>{let[t]=e;const n=lS(t).toVar(),i=sS().toVar(),r=sS().toVar(),s=rS(rk(n.x,i)).toVar(),a=rS(rk(n.y,r)).toVar(),o=rS(Ck(s)).toVar(),l=rS(Ck(a)).toVar(),c=rS(ok(pk(kk(i,r),s,a),pk(kk(i.add(sS(1)),r),s.sub(1),a),pk(kk(i,r.add(sS(1))),s,a.sub(1)),pk(kk(i.add(sS(1)),r.add(sS(1))),s.sub(1),a.sub(1)),o,l)).toVar();return xk(c)})),Uk=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=sS().toVar(),r=sS().toVar(),s=sS().toVar(),a=rS(rk(n.x,i)).toVar(),o=rS(rk(n.y,r)).toVar(),l=rS(rk(n.z,s)).toVar(),c=rS(Ck(a)).toVar(),u=rS(Ck(o)).toVar(),d=rS(Ck(l)).toVar(),h=rS(uk(pk(kk(i,r,s),a,o,l),pk(kk(i.add(sS(1)),r,s),a.sub(1),o,l),pk(kk(i,r.add(sS(1)),s),a,o.sub(1),l),pk(kk(i.add(sS(1)),r.add(sS(1)),s),a.sub(1),o.sub(1),l),pk(kk(i,r,s.add(sS(1))),a,o,l.sub(1)),pk(kk(i.add(sS(1)),r,s.add(sS(1))),a.sub(1),o,l.sub(1)),pk(kk(i,r.add(sS(1)),s.add(sS(1))),a,o.sub(1),l.sub(1)),pk(kk(i.add(sS(1)),r.add(sS(1)),s.add(sS(1))),a.sub(1),o.sub(1),l.sub(1)),c,u,d)).toVar();return wk(h)})),zk=FI([jk,Uk]),Fk=eS((e=>{let[t]=e;const n=lS(t).toVar(),i=sS().toVar(),r=sS().toVar(),s=rS(rk(n.x,i)).toVar(),a=rS(rk(n.y,r)).toVar(),o=rS(Ck(s)).toVar(),l=rS(Ck(a)).toVar(),c=hS(ok(gk(Dk(i,r),s,a),gk(Dk(i.add(sS(1)),r),s.sub(1),a),gk(Dk(i,r.add(sS(1))),s,a.sub(1)),gk(Dk(i.add(sS(1)),r.add(sS(1))),s.sub(1),a.sub(1)),o,l)).toVar();return xk(c)})),Vk=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=sS().toVar(),r=sS().toVar(),s=sS().toVar(),a=rS(rk(n.x,i)).toVar(),o=rS(rk(n.y,r)).toVar(),l=rS(rk(n.z,s)).toVar(),c=rS(Ck(a)).toVar(),u=rS(Ck(o)).toVar(),d=rS(Ck(l)).toVar(),h=hS(uk(gk(Dk(i,r,s),a,o,l),gk(Dk(i.add(sS(1)),r,s),a.sub(1),o,l),gk(Dk(i,r.add(sS(1)),s),a,o.sub(1),l),gk(Dk(i.add(sS(1)),r.add(sS(1)),s),a.sub(1),o.sub(1),l),gk(Dk(i,r,s.add(sS(1))),a,o,l.sub(1)),gk(Dk(i.add(sS(1)),r,s.add(sS(1))),a.sub(1),o,l.sub(1)),gk(Dk(i,r.add(sS(1)),s.add(sS(1))),a,o.sub(1),l.sub(1)),gk(Dk(i.add(sS(1)),r.add(sS(1)),s.add(sS(1))),a.sub(1),o.sub(1),l.sub(1)),c,u,d)).toVar();return wk(h)})),Bk=FI([Fk,Vk]),Hk=eS((e=>{let[t]=e;const n=rS(t).toVar(),i=sS(ik(n)).toVar();return Ek(kk(i))})),Wk=eS((e=>{let[t]=e;const n=lS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar();return Ek(kk(i,r))})),qk=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar(),s=sS(ik(n.z)).toVar();return Ek(kk(i,r,s))})),Gk=eS((e=>{let[t]=e;const n=gS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar(),s=sS(ik(n.z)).toVar(),a=sS(ik(n.w)).toVar();return Ek(kk(i,r,s,a))})),Yk=(FI([Hk,Wk,qk,Gk]),eS((e=>{let[t]=e;const n=rS(t).toVar(),i=sS(ik(n)).toVar();return hS(Ek(kk(i,sS(0))),Ek(kk(i,sS(1))),Ek(kk(i,sS(2))))}))),Xk=eS((e=>{let[t]=e;const n=lS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar();return hS(Ek(kk(i,r,sS(0))),Ek(kk(i,r,sS(1))),Ek(kk(i,r,sS(2))))})),Kk=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar(),s=sS(ik(n.z)).toVar();return hS(Ek(kk(i,r,s,sS(0))),Ek(kk(i,r,s,sS(1))),Ek(kk(i,r,s,sS(2))))})),Jk=eS((e=>{let[t]=e;const n=gS(t).toVar(),i=sS(ik(n.x)).toVar(),r=sS(ik(n.y)).toVar(),s=sS(ik(n.z)).toVar(),a=sS(ik(n.w)).toVar();return hS(Ek(kk(i,r,s,a,sS(0))),Ek(kk(i,r,s,a,sS(1))),Ek(kk(i,r,s,a,sS(2))))})),$k=FI([Yk,Xk,Kk,Jk]),Qk=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=sS(n).toVar(),l=hS(t).toVar(),c=rS(0).toVar(),u=rS(1).toVar();return JC({start:sS(0),end:o},(e=>{let{i:t}=e;c.addAssign(u.mul(zk(l))),u.mulAssign(s),l.mulAssign(a)})),c})),Zk=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=sS(n).toVar(),l=hS(t).toVar(),c=hS(0).toVar(),u=rS(1).toVar();return JC({start:sS(0),end:o},(e=>{let{i:t}=e;c.addAssign(u.mul(Bk(l))),u.mulAssign(s),l.mulAssign(a)})),c})),eO=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=sS(n).toVar(),l=hS(t).toVar();return lS(Qk(l,o,a,s),Qk(l.add(hS(sS(19),sS(193),sS(17))),o,a,s))})),tO=eS((e=>{let[t,n,i,r]=e;const s=rS(r).toVar(),a=rS(i).toVar(),o=sS(n).toVar(),l=hS(t).toVar(),c=hS(Zk(l,o,a,s)).toVar(),u=rS(Qk(l.add(hS(sS(19),sS(193),sS(17))),o,a,s)).toVar();return gS(c,u)})),nO=eS((e=>{let[t,n,i,r,s,a,o]=e;const l=sS(o).toVar(),c=rS(a).toVar(),u=sS(s).toVar(),d=sS(r).toVar(),h=sS(i).toVar(),p=sS(n).toVar(),f=lS(t).toVar(),m=hS($k(lS(p.add(d),h.add(u)))).toVar(),g=lS(m.x,m.y).toVar();g.subAssign(.5),g.mulAssign(c),g.addAssign(.5);const v=lS(lS(rS(p),rS(h)).add(g)).toVar(),y=lS(v.sub(f)).toVar();return nS(l.equal(sS(2)),(()=>TT(y.x).add(TT(y.y)))),nS(l.equal(sS(3)),(()=>UT(TT(y.x),TT(y.y)))),WT(y,y)})),iO=eS((e=>{let[t,n,i,r,s,a,o,l,c]=e;const u=sS(c).toVar(),d=rS(l).toVar(),h=sS(o).toVar(),p=sS(a).toVar(),f=sS(s).toVar(),m=sS(r).toVar(),g=sS(i).toVar(),v=sS(n).toVar(),y=hS(t).toVar(),_=hS($k(hS(v.add(f),g.add(p),m.add(h)))).toVar();_.subAssign(.5),_.mulAssign(d),_.addAssign(.5);const x=hS(hS(rS(v),rS(g),rS(m)).add(_)).toVar(),b=hS(x.sub(y)).toVar();return nS(u.equal(sS(2)),(()=>TT(b.x).add(TT(b.y).add(TT(b.z))))),nS(u.equal(sS(3)),(()=>UT(UT(TT(b.x),TT(b.y)),TT(b.z)))),WT(b,b)})),rO=FI([nO,iO]),sO=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=lS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=lS(rk(a.x,o),rk(a.y,l)).toVar(),u=rS(1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;const i=rS(rO(c,t,n,o,l,s,r)).toVar();u.assign(jT(u,i))}))})),nS(r.equal(sS(0)),(()=>{u.assign(pT(u))})),u})),aO=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=lS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=lS(rk(a.x,o),rk(a.y,l)).toVar(),u=lS(1e6,1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;const i=rS(rO(c,t,n,o,l,s,r)).toVar();nS(i.lessThan(u.x),(()=>{u.y.assign(u.x),u.x.assign(i)})).elseif(i.lessThan(u.y),(()=>{u.y.assign(i)}))}))})),nS(r.equal(sS(0)),(()=>{u.assign(pT(u))})),u})),oO=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=lS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=lS(rk(a.x,o),rk(a.y,l)).toVar(),u=hS(1e6,1e6,1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;const i=rS(rO(c,t,n,o,l,s,r)).toVar();nS(i.lessThan(u.x),(()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(i)})).elseif(i.lessThan(u.y),(()=>{u.z.assign(u.y),u.y.assign(i)})).elseif(i.lessThan(u.z),(()=>{u.z.assign(i)}))}))})),nS(r.equal(sS(0)),(()=>{u.assign(pT(u))})),u})),lO=eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=hS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=sS().toVar(),u=hS(rk(a.x,o),rk(a.y,l),rk(a.z,c)).toVar(),d=rS(1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;JC({start:-1,end:sS(1),name:"z",condition:"<="},(e=>{let{z:i}=e;const a=rS(rO(u,t,n,i,o,l,c,s,r)).toVar();d.assign(jT(d,a))}))}))})),nS(r.equal(sS(0)),(()=>{d.assign(pT(d))})),d})),cO=(FI([sO,lO]),eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=hS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=sS().toVar(),u=hS(rk(a.x,o),rk(a.y,l),rk(a.z,c)).toVar(),d=lS(1e6,1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;JC({start:-1,end:sS(1),name:"z",condition:"<="},(e=>{let{z:i}=e;const a=rS(rO(u,t,n,i,o,l,c,s,r)).toVar();nS(a.lessThan(d.x),(()=>{d.y.assign(d.x),d.x.assign(a)})).elseif(a.lessThan(d.y),(()=>{d.y.assign(a)}))}))}))})),nS(r.equal(sS(0)),(()=>{d.assign(pT(d))})),d}))),uO=(FI([aO,cO]),eS((e=>{let[t,n,i]=e;const r=sS(i).toVar(),s=rS(n).toVar(),a=hS(t).toVar(),o=sS().toVar(),l=sS().toVar(),c=sS().toVar(),u=hS(rk(a.x,o),rk(a.y,l),rk(a.z,c)).toVar(),d=hS(1e6,1e6,1e6).toVar();return JC({start:-1,end:sS(1),name:"x",condition:"<="},(e=>{let{x:t}=e;JC({start:-1,end:sS(1),name:"y",condition:"<="},(e=>{let{y:n}=e;JC({start:-1,end:sS(1),name:"z",condition:"<="},(e=>{let{z:i}=e;const a=rS(rO(u,t,n,i,o,l,c,s,r)).toVar();nS(a.lessThan(d.x),(()=>{d.z.assign(d.y),d.y.assign(d.x),d.x.assign(a)})).elseif(a.lessThan(d.y),(()=>{d.z.assign(d.y),d.y.assign(a)})).elseif(a.lessThan(d.z),(()=>{d.z.assign(a)}))}))}))})),nS(r.equal(sS(0)),(()=>{d.assign(pT(d))})),d})));FI([oO,uO]);tk.setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),nk.setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),ik.setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),sk.setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),ak.setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),lk.setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),ck.setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),dk.setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),hk.setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),fk.setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),mk.setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),vk.setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),yk.setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),_k.setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),bk.setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),Sk.setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),Tk.setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),Ek.setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),Ck.setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),Mk.setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Ik.setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Ak.setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Rk.setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),Pk.setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),Ok.setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Lk.setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),jk.setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),Uk.setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),Fk.setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Vk.setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Hk.setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Wk.setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),qk.setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),Gk.setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),Yk.setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),Xk.setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Kk.setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Jk.setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),Qk.setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Zk.setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),eO.setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),tO.setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),nO.setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),iO.setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),sO.setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),aO.setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),oO.setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),lO.setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),cO.setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),uO.setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});const dO=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=rS(n.x).toVar(),r=rS(n.y).toVar(),s=rS(n.z).toVar();nS(r.lessThan(1e-4),(()=>hS(s,s,s))).else((()=>{i.assign(DN(6,i.sub(mT(i))));const e=sS(OT(i)).toVar(),t=rS(i.sub(rS(e))).toVar(),n=rS(s.mul(LN(1,r))).toVar(),a=rS(s.mul(LN(1,r.mul(t)))).toVar(),o=rS(s.mul(LN(1,r.mul(LN(1,t))))).toVar();return nS(e.equal(sS(0)),(()=>hS(s,o,n))).elseif(e.equal(sS(1)),(()=>hS(a,s,n))).elseif(e.equal(sS(2)),(()=>hS(n,s,o))).elseif(e.equal(sS(3)),(()=>hS(n,a,s))).elseif(e.equal(sS(4)),(()=>hS(o,n,s))),hS(s,n,a)}))})),hO=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=rS(n.x).toVar(),r=rS(n.y).toVar(),s=rS(n.z).toVar(),a=rS(jT(i,jT(r,s))).toVar(),o=rS(UT(i,UT(r,s))).toVar(),l=rS(o.sub(a)).toVar(),c=rS().toVar(),u=rS().toVar(),d=rS().toVar();return d.assign(o),nS(o.greaterThan(0),(()=>{u.assign(l.div(o))})).else((()=>{u.assign(0)})),nS(u.lessThanEqual(0),(()=>{c.assign(0)})).else((()=>{nS(i.greaterThanEqual(o),(()=>{c.assign(r.sub(s).div(l))})).elseif(r.greaterThanEqual(o),(()=>{c.assign(ON(2,s.sub(i).div(l)))})).else((()=>{c.assign(ON(4,i.sub(r).div(l)))})),c.mulAssign(1/6),nS(c.lessThan(0),(()=>{c.addAssign(1)}))})),hS(c,u,d)}));dO.setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),hO.setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]});const pO=eS((e=>{let[t]=e;const n=hS(t).toVar(),i=mS(BN(n,hS(.04045))).toVar(),r=hS(n.div(12.92)).toVar(),s=hS(GT(UT(n.add(hS(.055)),hS(0)).div(1.055),hS(2.4))).toVar();return $T(r,s,i)}));pO.setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]});class fO{constructor(e){this.owner=e}async getFromDatabase(){try{const e=Eh(Kh(Qa),"carritos/".concat(this.owner)),t=await Rh(e);return t.exists()?t.val():null}catch(yo){return console.error("Error getting data from Firebase",yo),null}}async crearCarrito(e){try{const t=Eh(Kh(Qa),"carritos/".concat(this.owner)),n=await this.getFromDatabase();let i;return i=n?{owner:this.owner,productos:Array.isArray(n.productos)?n.productos:[]}:{owner:this.owner,productos:[]},i.productos.push(e),await Ah(t,i),console.log("Producto agregado correctamente:",e),!0}catch(yo){return console.error("Error al guardar los datos:",yo),!1}}async limpiarCarrito(e){try{const t=Eh(Kh(Qa),"carritos/".concat(e,"/productos"));await Ih(t)}catch(yo){console.error("Error al realizar el cobro:",yo)}}async eliminarProducto(e){const t=Eh(Kh(Qa),"carritos/".concat(this.owner,"/productos"));await this.limpiarCarrito(this.owner),await Ah(t,e)}async realizarCobro(e,t){try{const n=new Ag,i=await n.getUserDataR(),r=await this.getFromDatabase(),s=Eh(Kh(Qa),"users/".concat(i.firebaseKey));if(1==e){if(i.walletDiv<t)throw new Error("Insufficient funds in Wallet");i.walletDiv=i.walletDiv-t}else if(2==e){if(i.walletCom<t)throw new Error("Insufficient funds in Wallet");i.walletCom=i.walletCom-t}else if(3==e){if(i.walletEc<t)throw new Error("Insufficient funds in Wallet");i.walletEc=i.walletEc-t}await Ah(s,i),n.saveInHistory(i.userName,-t,"Buy in marketplace","");return new Rg("Pending",t,"",r.productos,i.userName).creaOrden(),await this.limpiarCarrito(i.firebaseKey),this.asignarBono(i.userName,i.referredBy,1,t,n.editAnyUser,n.saveInHistory),null}catch(yo){return console.error("Error al realizar el cobro:",yo),yo.message}}async asignarBono(e,t,n,i,r,s){const a=[.1,.05,.02,.01,.01,.005,.005];if(n>7)return;const o=Eh(Kh(Qa),"users");try{const l=await Rh(o);if(l.exists()){const o=l.val(),c=Object.values(o).find((e=>e.userName===t));if(c){const t=i*a[n-1];let o=c.walletEc||0;o+=t,c.walletEc=parseFloat((o+t).toFixed(2)),r(c),s(c.userName,t,"Purchase commission",e+" (Level "+n+")"),this.asignarBono(e,c.referredBy,n+1,i,r,s)}}}catch(yo){console.error("Error al obtener los datos:",yo)}}}const mO=e=>{let{img:t,firebaseKey:n,product:r}=e;const[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(1),p=()=>{a(!s)};return(0,vr.jsxs)("section",{children:[(0,vr.jsx)(_r,{visible:o,setVisible:l,texto:"Product added to cart"}),(0,vr.jsx)(kg,{visible:c,setVisible:u,texto:"Something went wrong"}),s&&(0,vr.jsxs)("div",{className:"detalles",children:[(0,vr.jsx)("div",{className:"ov"}),(0,vr.jsxs)("div",{className:"content-ec",children:[(0,vr.jsx)("div",{className:"sec4-pec",children:(0,vr.jsx)("button",{onClick:p,children:(0,vr.jsx)("i",{class:"bi bi-x"})})}),(0,vr.jsx)("div",{className:"sec5-pec",children:(0,vr.jsx)("img",{src:t,alt:"producto"})}),(0,vr.jsxs)("div",{className:"sec6-pec",children:[(0,vr.jsx)("p",{className:"p1-pec",children:r.nombre}),(0,vr.jsx)("p",{children:r.desc}),(0,vr.jsx)("p",{className:"p2-pec",children:"Benefits"}),(0,vr.jsxs)("ul",{className:"beneficios",children:[(0,vr.jsx)("li",{children:r.benefits.b1}),(0,vr.jsx)("li",{children:r.benefits.b2}),(0,vr.jsx)("li",{children:r.benefits.b3}),(0,vr.jsx)("li",{children:r.benefits.b4})]}),(0,vr.jsx)("p",{className:"p3-pec",children:"quantity:"}),(0,vr.jsx)("input",{type:"Number",value:d,onChange:e=>h(Math.abs(Number(e.target.value))),placeholder:1}),(0,vr.jsx)("button",{onClick:()=>{new fO(n).crearCarrito({nombre:r.nombre,precio:r.precio,cantidad:d}).then((e=>{l(!0)}))},children:"Add to cart"})]})]})]}),(0,vr.jsxs)("section",{className:s?"CardProduct2":"CardProduct",children:[(0,vr.jsx)("div",{className:"sec0-pec",children:(0,vr.jsx)("img",{src:t,alt:"producto"})}),(0,vr.jsx)("div",{className:"sec1-pec",children:(0,vr.jsx)("p",{children:r.nombre})}),(0,vr.jsx)("div",{className:"sec2-pec",children:(0,vr.jsx)("p",{children:r.desc})}),(0,vr.jsxs)("div",{className:"sec3-pec",children:[(0,vr.jsxs)("p",{children:[r.precio," USDT"]}),(0,vr.jsx)("button",{onClick:p,children:"Buy now"})]})]})]})},gO=n.p+"static/media/qrecc.f34f1bbcace68d6fa637.png",vO=n.p+"static/media/qrfi.a3a5952f59aa711ce35d.png",yO=n.p+"static/media/copyfi.fb756952b94b39a8efd3.png",_O=n.p+"static/media/advertecniafi.3e4f3cd828621285251d.png";class xO{constructor(e,t,n){this.getFactura=async e=>{const t=Hh(Eh(Kh(Qa),"peticiones/"),Fh("code"),Bh(e)),n=await Rh(t);if(n.exists()){const e=Object.values(n.val())[0];if(e)return e;throw new Error("Invoice not found")}return null},this.monto=t,this.concepto=e,this.wallet=n}async save(){try{const e=new Ag,t=await e.getUserDataR(),n=Mh(Eh(Kh(Qa),"peticiones/")),i={userName:t.userName,concepto:this.concepto,monto:this.monto,email:t.email,firebaseKey:n.key,owner:t.firebaseKey,wallet:this.wallet||""};await Ah(n,i)}catch(yo){console.error("Error al agregar la orden: ",yo)}}async saveFactura(e){try{const t=new Ag,n=(await t.getUserDataR(),Mh(Eh(Kh(Qa),"peticiones/")));e.firebaseKey=n.key,await Ah(n,e)}catch(yo){console.error("Error al agregar la orden: ",yo)}}async saveProducts(e){try{const t=new Ag,n=await t.getUserDataR(),i=Mh(Eh(Kh(Qa),"peticiones/")),r={userName:n.userName,concepto:this.concepto,monto:this.monto,email:n.email,firebaseKey:i.key,owner:n.firebaseKey,productos:e||[]};await Ah(i,r)}catch(yo){console.error("Error al agregar la orden: ",yo)}}async saveRetiro(){try{const e=new Ag,t=await e.getUserDataR(),n=Mh(Eh(Kh(Qa),"peticiones/")),i={userName:t.userName,concepto:this.concepto,monto:this.monto,email:t.email,firebaseKey:n.key,owner:t.firebaseKey,usdtAddress:t.usdtAddress,wallet:this.wallet||"",estado:1,hora:e.obtenerHora(),fecha:e.obtenerFecha()};await Ah(n,i)}catch(yo){console.error("Error al agregar la orden: ",yo)}}async borrar(e){try{const t=Eh(Kh(Qa),"peticiones/".concat(e));await Ih(t),console.log("datos borrados correctamente")}catch(yo){console.error("Error al realizar el cobro:",yo)}}}class bO{constructor(e,t,n,i,r,s,a,o){this.estadoSeleccionado=e,this.direccion=t,this.numExt=n,this.numInt=i,this.colonia=r,this.city=s,this.cp=a,this.owner=o}async saveDireccion(){const e=Eh(Kh(Qa),"direcciones/".concat(this.owner)),t={estadoSeleccionado:this.estadoSeleccionado,direccion:this.direccion,numExt:this.numExt,numInt:this.numInt,colonia:this.colonia,city:this.city,cp:this.cp,owner:this.owner};await Ah(e,t)}async getDireccion(e,t){const n=Eh(Kh(Qa),"direcciones/".concat(e,"/")),i=await Rh(n);if(i.exists()){t(i.val())}else t([])}async direccionIsEmpty(e){const t=Eh(Kh(Qa),"direcciones/".concat(e,"/")),n=await Rh(t);if(n.exists()){const e=n.val();return""!=e.estadoSeleccionado&&""!=e.direccion&&""!=e.numExt&&""!=e.colonia&&""!=e.city&&""!=e.cp}return!1}}const wO=e=>{let{opc:t,total:n,productos:r,keyF:s}=e;const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[f,m]=(0,i.useState)(""),g=()=>{o(!a)};return(0,vr.jsxs)("section",{className:"compQR-main",children:[(0,vr.jsx)(_r,{visible:u,setVisible:d,texto:f}),(0,vr.jsx)(kg,{visible:h,setVisible:p,texto:f}),(0,vr.jsx)("button",{onClick:async()=>{if(4==t)g();else{const e=new bO;if(await e.direccionIsEmpty(s))if(0===r.length)p(!0),m("You don't have any products");else{const e=new fO(s),i=await e.realizarCobro(t,n);i?(p(!0),m(i)):(d(!0),m("Your order was created successfully"))}else p(!0),m("You do not have any registered address")}},children:"Pay"}),a&&(0,vr.jsx)("section",{className:a?"compQR":"none",children:(0,vr.jsxs)("div",{className:"modal-content",children:[(0,vr.jsxs)("div",{className:"sec1-qr",children:[(0,vr.jsx)("div",{className:"s1-qr",children:(0,vr.jsx)("p",{className:"textoM3",children:"Direct payment"})}),(0,vr.jsx)("div",{className:"s2-qr",children:(0,vr.jsx)("img",{src:gO,alt:"qr"})}),(0,vr.jsxs)("div",{className:"s3-qr",children:[(0,vr.jsx)("p",{children:"Wallet address to pay"}),(0,vr.jsxs)("div",{className:"walletInput",children:[(0,vr.jsx)("input",{type:"text",id:"wallet",readOnly:!0,value:"TFDno1XUsT8RBiSsu4Mj2AxhmPwC4mvHuN"}),(0,vr.jsx)("button",{onClick:()=>{document.getElementById("wallet").select(),document.execCommand("copy"),window.getSelection().removeAllRanges()},children:(0,vr.jsx)("i",{class:"bi bi-copy"})})]})]}),(0,vr.jsxs)("div",{className:"s4-qr",children:[(0,vr.jsx)("p",{children:"Amount"}),(0,vr.jsx)("input",{type:"text",id:"wallet",readOnly:!0,value:n.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")+" USDT"})]}),(0,vr.jsxs)("div",{className:"s5-qr",children:[(0,vr.jsx)("button",{className:"boton3",onClick:g,children:(0,vr.jsx)("span",{children:"Close"})}),(0,vr.jsx)("button",{className:"boton2",onClick:()=>{new xO("Pago directo de ecomerce",n).saveProducts(r)},children:"Finish payment"})]}),(0,vr.jsx)("div",{className:"s11-qr",children:(0,vr.jsx)("p",{children:'Press the button "Finish payment" to complete the request'})})]}),(0,vr.jsxs)("div",{className:"sec2-qr",children:[(0,vr.jsx)("div",{className:"s6-qr",children:(0,vr.jsx)("p",{className:"textoM3",children:"How to make a deposit?"})}),(0,vr.jsxs)("div",{className:"s7-qr",children:[(0,vr.jsx)("img",{src:vO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Scan the Qr code with your payment app"})]}),(0,vr.jsxs)("div",{className:"s8-qr",children:[(0,vr.jsx)("img",{src:yO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Copy the USDT address and amount to pay, then paste them into your payment app"})]}),(0,vr.jsxs)("div",{className:"s9-qr",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Transfer only Tether USD TRC20 token (USDT). Transferring other currency will result in the toss of funds"})]}),(0,vr.jsxs)("div",{className:"s10-qr",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Make sure to correctly send the transaction, verifying the exact amount and that the Wallet is correct. Any sending error will result in the loss of funds."})]})]})]})})]})},SO=e=>{let{userData:t}=e;const[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(0),[p,f]=(0,i.useState)(0),[m,g]=(0,i.useState)(0),v=()=>{a(!s),y()},y=()=>{try{const e=Kh(),n=Lh(Eh(e,"carritos/"+t.firebaseKey+"/productos"),(e=>{const t=e.val();r(t||[])}));return()=>n()}catch(yo){console.log(yo)}};(0,i.useEffect)((()=>{const e=n.reduce(((e,t)=>e+t.cantidad),0),t=n.reduce(((e,t)=>e+t.precio*t.cantidad),0);h(t),e<4?(g("8.00"),f(t+8)):(f(t),g(0))}),[n]);return(0,vr.jsxs)("section",{className:"Cart-ec",children:[(0,vr.jsx)("button",{className:"cartbtn",onClick:v,children:(0,vr.jsx)("i",{class:"bi bi-cart-fill"})}),s&&(0,vr.jsxs)("section",{className:"cart-modal-ec",children:[(0,vr.jsx)("div",{className:"overlay-ec"}),(0,vr.jsxs)("div",{className:"contenido-cart",children:[(0,vr.jsx)("div",{className:"sec0-ecc",children:(0,vr.jsx)("button",{onClick:v,children:(0,vr.jsx)("i",{class:"bi bi-x"})})}),(0,vr.jsx)("div",{className:"sec1-ecc",children:(0,vr.jsx)("p",{children:"Shopping cart"})}),(0,vr.jsx)("div",{className:"sec2-ecc",children:n&&n.length>0?n.map(((e,n)=>(0,vr.jsxs)("div",{className:"s21-ecc",children:[(0,vr.jsxs)("div",{className:"item-ecc",children:[(0,vr.jsx)("p",{children:e.nombre}),(0,vr.jsxs)("span",{children:[e.precio," USDT x ",e.cantidad]})]}),(0,vr.jsx)("button",{onClick:()=>(async e=>{const n=new fO(t.firebaseKey);n.getFromDatabase().then((t=>{console.log(t);const i=t.productos;if(e>=0&&e<i.length){const t=i.filter(((t,n)=>n!==e));n.eliminarProducto(t)}else console.error("\xcdndice no v\xe1lido")}))})(n),children:(0,vr.jsx)("i",{class:"bi bi-x"})})]}))):(0,vr.jsx)("p",{children:"You have no added products"})}),(0,vr.jsxs)("div",{className:"sec3-ecc",children:[(0,vr.jsx)("p",{children:"Subtotal: "}),(0,vr.jsxs)("p",{children:[d.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]}),(0,vr.jsxs)("div",{className:"sec4-ecc",children:[(0,vr.jsx)("p",{children:"Shipping: "}),(0,vr.jsxs)("p",{children:[m," USDT"]})]}),(0,vr.jsxs)("div",{className:"sec5-ecc",children:[(0,vr.jsx)("p",{children:"Total: "}),(0,vr.jsxs)("p",{children:[p.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]}),(0,vr.jsx)("div",{className:"sec6-ecc",children:(0,vr.jsxs)("select",{className:"payment-select",value:o,onChange:e=>l(e.target.value),children:[(0,vr.jsxs)("option",{value:1,children:["Dividend Wallet: ",t.walletDiv.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]}),(0,vr.jsxs)("option",{value:2,children:["Commission Wallet: ",t.walletCom.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]}),(0,vr.jsxs)("option",{value:3,children:["Ecommerce wallet: ",t.walletEc||"0".toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]})}),(0,vr.jsx)("div",{className:"sec7-ecc",children:(0,vr.jsx)(wO,{opc:o,total:p,productos:n,keyF:t.firebaseKey})})]})]})]})},NO=n.p+"static/media/producto1.b71daf917b95fef67810.png",TO=n.p+"static/media/producto2.8415230efd3dbdb44892.png",EO=n.p+"static/media/producto3.614206065db3517876c0.png",CO=n.p+"static/media/producto4.28255c57b27614fd32bb.png",MO=n.p+"static/media/producto5.2a3a37aa5e257521c598.png",IO=n.p+"static/media/producto6.44778031b14ed37fcf29.png",AO=n.p+"static/media/producto7.0958e560422d48868500.png",RO=n.p+"static/media/producto8.9c054ef3ccd937dd7451.png",PO=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),s=new Ag,a={GoldMilk:{nombre:"Gold milk",desc:"Spice up your day",precio:"35.00",benefits:{b1:"Antioxidant",b2:"Anti-inflammatory",b3:"Anti carcinogenic",b4:"Regulates metabolism"}},Alkavit:{nombre:"Alkavit",desc:"Alkaline balance",precio:"35.00",benefits:{b1:"Antioxidant",b2:"Strengthens the immune system",b3:"Balances the digestive system",b4:"Control digestive problems"}},Vita100:{nombre:"Vita 100",desc:"The energy you need",precio:"35.00",benefits:{b1:"Greater concentration",b2:"Physical and mental resistance",b3:"Cardio-protection",b4:"Energy"}},CleanFiber:{nombre:"Clean fiber",desc:"Incomparable balance",precio:"35.00",benefits:{b1:"Diuretic",b2:"Laxative",b3:"Weight control",b4:"Combat chronic constipation"}},Kino:{nombre:"Kino",desc:"Great taste",precio:"35.00",benefits:{b1:"Glucose regulator",b2:"Diuretic",b3:"Cardio-protection",b4:"Energy"}},LemonClean:{nombre:"Lemon clean",desc:"Lemon punch",precio:"35.00",benefits:{b1:"Weight control",b2:"Detoxifier",b3:"Anti-constipation",b4:"Anticancer"}},FruitRelax:{nombre:"Fruit relax",desc:"Just relax!",precio:"35.00",benefits:{b1:"Antidepressant",b2:"Prevents ADHD",b3:"Anti-stress",b4:"Prevents insomnia"}},Actigenol:{nombre:"Actigenol",desc:"Renew yourself every day",precio:"35.00",benefits:{b1:"Anti-aging",b2:"Activates the immune system",b3:"Strengthens joints",b4:"Antioxidant"}}};(0,i.useEffect)((()=>{o()}),[]);const o=()=>{s.fetchUserData().then((e=>{e&&(t(e),r(!1))}))};return n?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)("section",{className:"Ecomerce",children:[(0,vr.jsxs)("header",{children:[(0,vr.jsxs)("p",{children:[(0,vr.jsx)("i",{class:"bi bi-shop"})," ",(0,vr.jsx)("span",{children:"E-comerce"})]}),(0,vr.jsx)(SO,{userData:e})]}),(0,vr.jsxs)("div",{className:"discover",children:[(0,vr.jsx)("p",{children:"Discover our exclusive products!"}),(0,vr.jsx)("br",{}),(0,vr.jsx)("span",{children:"Don't miss the opportunity to purchase these incredible products"})]}),(0,vr.jsxs)("section",{className:"Shopping",children:[(0,vr.jsx)("p",{className:"titulos",children:"Shopping"}),(0,vr.jsxs)("div",{className:"productos",children:[(0,vr.jsx)(mO,{img:NO,firebaseKey:e.firebaseKey,product:a.GoldMilk}),(0,vr.jsx)(mO,{img:TO,firebaseKey:e.firebaseKey,product:a.Alkavit}),(0,vr.jsx)(mO,{img:EO,firebaseKey:e.firebaseKey,product:a.Vita100}),(0,vr.jsx)(mO,{img:CO,firebaseKey:e.firebaseKey,product:a.CleanFiber}),(0,vr.jsx)(mO,{img:MO,firebaseKey:e.firebaseKey,product:a.Kino}),(0,vr.jsx)(mO,{img:IO,firebaseKey:e.firebaseKey,product:a.LemonClean}),(0,vr.jsx)(mO,{img:AO,firebaseKey:e.firebaseKey,product:a.FruitRelax}),(0,vr.jsx)(mO,{img:RO,firebaseKey:e.firebaseKey,product:a.Actigenol})]})]}),(0,vr.jsxs)("div",{className:"wallet-sec",children:[(0,vr.jsx)("p",{className:"titulos",children:"Wallet-comerce"}),(0,vr.jsx)("div",{className:"historial",children:(0,vr.jsx)(Mg,{userData:e})})]}),(0,vr.jsxs)("section",{className:"orders",children:[(0,vr.jsx)("p",{className:"titulos",children:"Orders"}),(0,vr.jsx)("div",{className:"historial",children:(0,vr.jsx)(Pg,{userName:e.userName})})]})]})};class kO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";this.status=e,this.text=t}}const OO={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!==typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},LO=e=>e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},DO=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await fetch(OO.origin+e,{method:"POST",headers:n,body:t}),r=await i.text(),s=new kO(i.status,r);if(i.ok)return s;throw s},jO=(e,t,n)=>{if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},UO=e=>e.webdriver||!e.languages||0===e.languages.length,zO=()=>new kO(451,"Unavailable For Headless Browser"),FO=(e,t)=>{if((e=>{var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"===typeof n&&e.list.includes(n)},VO=()=>new kO(403,"Forbidden"),BO=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a string"})(t.throttle,t.id);const i=t.id||e,r=await(async(e,t,n)=>{const i=Number(await n.get(e)||0);return t-Date.now()+i})(i,t.throttle,n);return r>0||(await n.set(i,Date.now().toString()),!1)},HO=()=>new kO(429,"Too Many Requests"),WO=async(e,t,n,i)=>{const r=LO(i),s=r.publicKey||OO.publicKey,a=r.blockHeadless||OO.blockHeadless,o=OO.storageProvider||r.storageProvider,l={...OO.blockList,...r.blockList},c={...OO.limitRate,...r.limitRate};if(a&&UO(navigator))return Promise.reject(zO());if(jO(s,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&FO(l,n))return Promise.reject(VO());if(await BO(location.pathname,c,o))return Promise.reject(HO());const u={lib_version:"4.3.3",user_id:s,service_id:e,template_id:t,template_params:n};return DO("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})};const qO=class{constructor(e,t){this.sendEmailSupport=(e,t,n)=>{WO("service_033kgeg",this.plantilla,{from_name:this.destinatario,Motivo:e,UserName:t,Mensaje:n,reply_to:this.destinatario},{publicKey:"0wCoAjcnZT2N0PVfE"}).then((()=>{console.log("SUCCESS!")}),(e=>{console.log("FAILED...",e.text)}))},this.destinatario=e,this.plantilla=t}},GO=e=>{const[t,n]=(0,i.useState)("Soporte General"),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)("");return(0,vr.jsxs)("section",{className:"support",children:[(0,vr.jsx)(_r,{visible:a,setVisible:o,texto:l}),(0,vr.jsxs)("div",{className:"sec0-sp",children:[(0,vr.jsx)("i",{className:"bi bi-exclamation-octagon"}),(0,vr.jsx)("span",{children:"Support"})]}),(0,vr.jsxs)("div",{className:"sec1-sp",children:[(0,vr.jsx)("label",{for:"support-options",children:"Select your request:"}),(0,vr.jsx)("div",{class:"custom-select-wrapper",children:(0,vr.jsxs)("select",{id:"support-options",class:"custom-select",onChange:e=>n(e.target.value),children:[(0,vr.jsx)("option",{value:"Soporte General",children:"Soporte General"}),(0,vr.jsx)("option",{value:"Soporte General",children:"Capital request starter package (Forced term 12 months, after 12 months: -30%, after 24 months: 0%)"}),(0,vr.jsx)("option",{value:"la acreditaci\xf3n de dividendos",children:"I did not receive my dividends correctly"}),(0,vr.jsx)("option",{value:"la acreditacion de comisiones",children:"I did not receive my commissions correctly"}),(0,vr.jsx)("option",{value:"un retiro pendiente",children:"I have a pending withdrawal"}),(0,vr.jsx)("option",{value:"la compra de un paquete de inicio (Aun no se refleja)",children:"Buy a starter pack (Not yet reflected)"}),(0,vr.jsx)("option",{value:"la actulizacion datos generales",children:"General data update support"})]})})]}),(0,vr.jsxs)("div",{className:"sec2-sp",children:[(0,vr.jsx)("p",{children:"Tell us your problem"}),(0,vr.jsx)("textarea",{value:r,onChange:e=>s(e.target.value),placeholder:"Write your problem here"})]}),(0,vr.jsx)("div",{className:"sec3-sp",children:(0,vr.jsx)("button",{class:"btn2",onClick:()=>{new qO(e.email,"template_zkw75fr").sendEmailSupport(t,e.userName,r),o(!0),c("Report sent successfully")},children:"Send"})}),(0,vr.jsx)("div",{className:"sec4-sp",children:(0,vr.jsxs)("div",{className:"contenido",children:[(0,vr.jsx)("p",{children:"We do our best to solve all your problems and provide you with quality service."}),(0,vr.jsx)("img",{alt:"support_img"})]})})]})},YO=e=>{let{ti:t,value:n,name:i,changeState:r,pl:s,block:a}=e;return(0,vr.jsxs)("div",{className:a?"blockTextInput":"TextInput",children:[(0,vr.jsx)("p",{className:"textoM2",children:t}),(0,vr.jsx)("input",{type:"text",value:n,onChange:e=>r(i,e.target.value),readOnly:a,placeholder:s})]})},XO=e=>{let{ti:t,...n}=e;return(0,vr.jsxs)("div",{className:n.readOnly?"blockTextInput":"TextInput",children:[(0,vr.jsx)("p",{className:"textoM2",children:t}),(0,vr.jsx)("input",{...n})]})},KO=e=>{let{ti:t,selectProps:n,inputProps:i}=e;return(0,vr.jsxs)("div",{className:"PhoneInput",children:[(0,vr.jsx)("p",{className:"textoM2",children:t}),(0,vr.jsxs)("div",{className:"phoneInputContainer",children:[(0,vr.jsxs)("select",{className:"ladaSelect",...n,children:[(0,vr.jsx)("option",{value:"+52",children:"+52 (MX)"}),(0,vr.jsx)("option",{value:"+1",children:"+1 (US)"})]}),(0,vr.jsx)("input",{className:"phoneNumberInput",...i})]})]})},JO=e=>{let{...t}=e;return(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsxs)("label",{className:"switch",children:[(0,vr.jsx)("input",{type:"checkbox",...t}),(0,vr.jsx)("span",{className:"slider"})]})})},$O=n.p+"static/media/user.2a6deb903f5eccd27ae8.png",QO="firebasestorage.googleapis.com",ZO="storageBucket";class eL extends ns{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(iL(e),"Firebase Storage: ".concat(t," (").concat(iL(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,eL.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iL(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var tL,nL;function iL(e){return"storage/"+e}function rL(){return new eL(tL.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function sL(){return new eL(tL.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aL(){return new eL(tL.CANCELED,"User canceled the upload/download.")}function oL(e){return new eL(tL.INVALID_ARGUMENT,e)}function lL(){return new eL(tL.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(tL||(tL={}));class cL{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=cL.makeFromUrl(e,t)}catch(r){return new cL(e,"")}if(""===n.path)return n;throw i=e,new eL(tL.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===QO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new cL(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new eL(tL.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class uL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function dL(e,t,n,i){if(i<t)throw oL("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw oL("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function hL(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function pL(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(nL||(nL={}));class fL{constructor(e,t,n,i,r,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new mL(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===nL.NO_ERROR,r=n.getStatus();if(!t||pL(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===nL.ABORT;return void e(!1,new mL(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new mL(s,n))}))},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){i(s)}else if(null!==r){const e=rL();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?lL():aL())}else{i(sL())}};this.canceled_?t(0,new mL(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function d(t){r=setTimeout((()=>{r=null,e(p,l())}),t)}function h(){s&&clearTimeout(s)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===o?(o=2,s=0):s=1e3*(i+Math.random()),d(s)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==r?(e||(o=2),clearTimeout(r),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mL{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function gL(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class vL{constructor(e,t){this._service=e,this._location=t instanceof cL?t:cL.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vL(e,t)}get root(){const e=new cL(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gL(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new cL(this._location.bucket,e);return new vL(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new eL(tL.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function yL(e,t){const n=null===t||void 0===t?void 0:t[ZO];return null==n?null:cL.makeFromBucketSpec(n,e)}class _L{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=QO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?cL.makeFromBucketSpec(i,this._host):yL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=cL.makeFromBucketSpec(this._url,e):this._bucket=yL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vL(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new uL(lL());{const s=function(e,t,n,i,r,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=hL(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new fL(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const xL="@firebase/storage",bL="0.12.4",wL="storage";function SL(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new _L(i,r,s,n,Da)}Ra(new Ss(wL,SL,"PUBLIC").setMultipleInstances(!0)),za(xL,bL,""),za(xL,bL,"esm2017");const NL="template_5faskmk",TL=1,EL=2,CL=3,ML=4,IL=()=>{const{userLogged:e,sendEmail:t,updateNip:n}=sr(),r=(0,i.useRef)(),[s,a]=(0,i.useState)({state:TL,isLoading:!1,code:"",input:""});(0,i.useEffect)((()=>{null!==e&&void 0!==e&&e.twoStepVeref&&Hi(a,"state",ML)}),[e]);const o=()=>{if(s.code==s.input)return Hi(a,"state",CL),void Hi(a,"input","");r.current.showAlert("Wrong code!",!1)},l=async()=>{200==await n(s.input)?Hi(a,"state",ML):r.current.showAlert("Something went wrong",!1)};return(0,vr.jsxs)("section",{className:"TSV",children:[(0,vr.jsx)(Er,{ref:r}),(0,vr.jsx)("header",{children:(0,vr.jsx)("h1",{children:"Two-factor authentication"})}),(0,vr.jsxs)("section",{className:"contenido",children:[(0,vr.jsx)("div",{className:"resaltado",children:(0,vr.jsx)("p",{children:"Two-factor authentication improves the security and privacy of accounts and personal data, reducing the risk of identity theft or phishing."})}),s.isLoading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[s.state==TL&&(0,vr.jsx)("button",{onClick:async()=>{Hi(a,"isLoading",!0);const n=Math.floor(1e5+9e5*Math.random());Hi(a,"code",n);const i={code:n,email:e.email};200==await t(NL,i)?(Hi(a,"state",EL),Hi(a,"isLoading",!1),r.current.showAlert("E-mail send",!0)):r.current.showAlert("Something went wrong",!1)},children:"Start"}),s.state==ML&&(0,vr.jsxs)("div",{className:"completado",children:[(0,vr.jsx)("p",{children:"You have completed two-step verification"}),(0,vr.jsx)("i",{class:"bi bi-check-circle-fill"})]}),(0,vr.jsxs)("section",{className:"code",children:[s.state==EL&&(0,vr.jsxs)("div",{className:"inputData",children:[(0,vr.jsx)("p",{children:"Enter the code that is sent to your email"}),(0,vr.jsx)("input",{type:"text",value:s.input,onChange:e=>Hi(a,"input",e.target.value)}),(0,vr.jsx)("button",{onClick:o,children:"Verify"})]}),s.state==CL&&(0,vr.jsxs)("div",{className:"inputData",children:[(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Enter a 4-digit code"}),", this code will be used to change your USDT (TRC20) wallet and make virtual office withdrawals"]}),(0,vr.jsx)("input",{type:"text",value:s.input,onChange:e=>{const t=e.target.value;/^\d{0,4}$/.test(t)&&Hi(a,"input",t)}}),(0,vr.jsx)("button",{onClick:l,children:" Finish"})]})]})]})]})]})},AL=[{label:"Username",key:"username",block:!0},{label:"Email",key:"email",block:!0},{label:"Names",key:"nombres",block:!1},{label:"Surname",key:"apellidos",block:!1},{label:"Phone",key:"telefono",block:!1},{label:"USDT Wallet(TRC20)",key:"usdtWallet",block:!1}],RL=()=>{const e=(0,i.useRef)(),{userLogged:t,saveIc:n,update:r}=sr(),[s,a]=(0,i.useState)({verificado:!1,imageUrl:"",isLoading:!1,visiblePic:!1,ic:!1,idIc:""}),[o,l]=(0,i.useState)({nombres:"",apellidos:"",usdtWallet:"",lada:"+52",telefono:""});(0,i.useEffect)((()=>{const e=t.wallet.interesCompuesto.find((e=>"com"==e.tipo));e&&(Hi(a,"ic",e.activo),Hi(a,"idIc",e.interes_compuesto_id))}),[t]),(0,i.useEffect)((()=>{console.log(t),l((e=>({...e,nombres:t.nombres,apellidos:t.apellidos,usdtWallet:t.wallet.wallet_address||"",lada:t.lada||"+52",telefono:t.telefono})))}),[]);return(0,vr.jsxs)("div",{children:[(0,vr.jsx)(Er,{ref:e}),s.isLoading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)("section",{className:"contenido userPerfil",children:[(0,vr.jsxs)("div",{className:"titulos sec0-up",children:[(0,vr.jsx)("i",{className:"bi bi-person-gear"}),(0,vr.jsx)("span",{children:"Profile"})]}),(0,vr.jsxs)("div",{className:"sec1-up",children:[(0,vr.jsx)("div",{onClick:()=>Hi(a,"visiblePic",!0),className:"uih",children:(0,vr.jsx)("i",{className:"bi bi-pencil"})}),(0,vr.jsx)("img",{className:"userImg",src:s.imageUrl||$O,alt:"user"}),(0,vr.jsx)("button",{onClick:()=>Hi(a,"visiblePic",!0),children:(0,vr.jsx)("i",{className:"bi bi-pencil-square"})}),(0,vr.jsx)("div",{className:"userInfo",children:(0,vr.jsxs)("div",{className:"infos",children:[(0,vr.jsx)("p",{className:"textoG",children:null===t||void 0===t?void 0:t.username}),(0,vr.jsx)("p",{className:"textoM",children:null===t||void 0===t?void 0:t.email})]})})]}),(0,vr.jsxs)("div",{className:"sec2-up",children:[(0,vr.jsx)("div",{className:"dtp0 textoM3",children:(0,vr.jsx)("p",{children:"Personal data"})}),(0,vr.jsxs)("div",{className:"dtp1",children:[AL.map((e=>(0,vr.jsx)("div",{children:"telefono"===e.key?(0,vr.jsx)(KO,{inputProps:{type:"text",value:o[e.key],placeholder:t[e.key],onChange:t=>Hi(l,e.key,t.target.value),readOnly:e.block},selectProps:{value:o.lada,onChange:e=>Hi(l,"lada",e.target.value)},ti:e.label}):(0,vr.jsx)(XO,{type:"text",value:o[e.key],placeholder:t[e.key],onChange:t=>Hi(l,e.key,t.target.value),readOnly:e.block,ti:e.label})},e.key))),(0,vr.jsx)("button",{onClick:async()=>{const n={...o,username:null===t||void 0===t?void 0:t.username};console.log(n);200==await r(n)?e.current.showAlert("Changes made successfully",!0):e.current.showAlert("Something went wrong",!1)},className:"boton1",children:(0,vr.jsx)("span",{className:"button_top",children:"Save"})})]})]}),(0,vr.jsxs)("div",{className:"sec3-up",children:[(0,vr.jsx)("div",{className:"s30-up textoM3",children:(0,vr.jsx)("p",{children:"Use compound interest"})}),(0,vr.jsx)("div",{className:"s31-up textoM2",children:(0,vr.jsx)("p",{children:'The "compound interest" feature automatically reinvests into the starter pack every 100 USDT earned in the activated wallet. This reinvestment is carried out daily at 00:00 hours (Miami time).'})}),(0,vr.jsxs)("div",{className:"s33-up textoM2",children:[(0,vr.jsx)("p",{children:"Activate compound interest from the commission wallet"}),(0,vr.jsx)(JO,{checked:s.ic,onClick:async()=>{const i={wallet_id:t.wallet.wallet_id,tipo:"com",activo:!s.ic};s.idIc&&(i.id=s.idIc);const r=await n(i);null!==r&&void 0!==r&&r.status&&200==(null===r||void 0===r?void 0:r.status)?e.current.showAlert("Compound interest activated",!0):e.current.showAlert(Cr((null===r||void 0===r?void 0:r.status)||400),!1),Hi(a,"ic",!s.ic)}})]})]}),(0,vr.jsx)("div",{className:"sec6-up",children:(0,vr.jsx)(IL,{})})]})]})};var PL=n(5540),kL=n(7321),OL=n(8168),LL=n(8587),DL=n(3404),jL=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=(0,kL.createBrowserHistory)(t.props),t}return(0,PL.A)(t,e),t.prototype.render=function(){return i.createElement(rr.Router,{history:this.history,children:this.props.children})},t}(i.Component);i.Component;var UL=function(e,t){return"function"===typeof e?e(t):e},zL=function(e,t){return"string"===typeof e?(0,kL.createLocation)(e,null,null,t):e},FL=function(e){return e},VL=i.forwardRef;"undefined"===typeof VL&&(VL=FL);var BL=VL((function(e,t){var n=e.innerRef,r=e.navigate,s=e.onClick,a=(0,LL.A)(e,["innerRef","navigate","onClick"]),o=a.target,l=(0,OL.A)({},a,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=FL!==VL&&t||n,i.createElement("a",l)}));var HL=VL((function(e,t){var n=e.component,r=void 0===n?BL:n,s=e.replace,a=e.to,o=e.innerRef,l=(0,LL.A)(e,["component","replace","to","innerRef"]);return i.createElement(rr.__RouterContext.Consumer,null,(function(e){e||(0,DL.A)(!1);var n=e.history,c=zL(UL(a,e.location),e.location),u=c?n.createHref(c):"",d=(0,OL.A)({},l,{href:u,navigate:function(){var t=UL(a,e.location),i=(0,kL.createPath)(e.location)===(0,kL.createPath)(zL(t));(s||i?n.replace:n.push)(t)}});return FL!==VL?d.ref=t||o:d.innerRef=o,i.createElement(r,d)}))})),WL=function(e){return e},qL=i.forwardRef;"undefined"===typeof qL&&(qL=WL);qL((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,s=e.activeClassName,a=void 0===s?"active":s,o=e.activeStyle,l=e.className,c=e.exact,u=e.isActive,d=e.location,h=e.sensitive,p=e.strict,f=e.style,m=e.to,g=e.innerRef,v=(0,LL.A)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(rr.__RouterContext.Consumer,null,(function(e){e||(0,DL.A)(!1);var n=d||e.location,s=zL(UL(m,n),n),y=s.pathname,_=y&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=_?(0,rr.matchPath)(n.pathname,{path:_,exact:c,sensitive:h,strict:p}):null,b=!!(u?u(x,n):x),w="function"===typeof l?l(b):l,S="function"===typeof f?f(b):f;b&&(w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(w,a),S=(0,OL.A)({},S,o));var N=(0,OL.A)({"aria-current":b&&r||null,className:w,style:S,to:s},v);return WL!==qL?N.ref=t||g:N.innerRef=g,i.createElement(HL,N)}))}));const GL=(0,i.forwardRef)(((e,t)=>{let{proceso:n}=e;const[r,s]=(0,i.useState)({nip:"",visible:!1}),{userLogged:a,validateNip:o}=sr(),l=(0,i.useRef)(),c=(e,t)=>{s((n=>({...n,[e]:t})))},u=()=>{c("visible",!r.visible)};if((0,i.useImperativeHandle)(t,(()=>({show:()=>{u()}}))),!r.visible)return;return(0,vr.jsxs)("section",{className:"ModalNip",children:[(0,vr.jsx)(Er,{ref:l}),(0,vr.jsx)("div",{className:"overlay"}),(0,vr.jsxs)("div",{className:"modal-contentNip",children:[(0,vr.jsx)("p",{children:"Enter your NIP"}),(0,vr.jsx)("input",{type:"password",value:r.nip,onChange:e=>c("nip",e.target.value),maxLength:4,placeholder:"Enter 4-digit NIP"}),(0,vr.jsxs)("div",{className:"botones",children:[(0,vr.jsx)("button",{onClick:u,children:"Close"}),(0,vr.jsx)("button",{onClick:async function(){(a.wallet.nip||(l.current.showAlert("complete two-step verification to get your PIN",!1),0))&&(await o(r.nip)?n():l.current.showAlert("Incorrect nip",!1))},className:"azul",children:"Verify"})]})]})]})})),YL=GL,XL=Ri({name:"peticion",initialState:{newPeticion:{monto:"",tipo:"",code:""},pagosList:[],retirosList:[],destinatario:{username:"",nombres:"",apellidos:"",email:""}},reducers:{fillNewPeticion:(e,t)=>{let{payload:n}=t;e.newPeticion={...e.newPeticion,[n.name]:n.value}},savePagosList:(e,t)=>{let{payload:n}=t;e.pagosList=n},saveRetirosList:(e,t)=>{let{payload:n}=t;e.retirosList=n},fillDestinatario:(e,t)=>{let{payload:n}=t;e.destinatario=n}}}),{fillNewPeticion:KL,savePagosList:JL,saveRetirosList:$L,fillDestinatario:QL}=XL.actions,ZL=XL.reducer,eD=un.create({baseURL:hn}),tD=()=>{const e=I(),{newPeticion:t,pagosList:n,retirosList:i,destinatario:r}=v((e=>e.solicitud)),{userLogged:s}=v((e=>e.user));return{newPeticion:t,pagosList:n,retirosList:i,destinatario:r,fillPeticion:(t,n)=>{e(KL({name:t,value:n}))},savePeticion:async e=>{const t=await(async(e,t)=>{try{return await mn.post("".concat(dn,"/addPeticion/").concat(e),t)}catch(yo){return console.error(yo),yo.response}})(s.id,e);return t},getDestinatario:async()=>{const n=await(async e=>{try{return await mn.get("".concat(dn,"/findDestinatario/").concat(e))}catch(yo){return yo.response}})(t.code);return e(QL(null===n||void 0===n?void 0:n.data)),n},fetchPeticionesBytipos:async t=>{const n=await(async e=>{try{return await eD.post("".concat(hn,"/findByTipos"),e)}catch(yo){console.error(yo)}})(t);null!==n&&void 0!==n&&n.data?e(JL(null===n||void 0===n?void 0:n.data)):e(JL([]))},transferir:async()=>{const e={emisor:s.username,destinatario:t.code,monto:t.monto,tipo:t.tipo},n=await(async e=>{try{return await mn.post("".concat(dn,"/ti"),e)}catch(yo){return console.error(yo),yo.response}})(e);return n.status},getFactura:async e=>{const t=await(async e=>{try{return await eD.get("".concat(hn,"/findByCode/").concat(e))}catch(yo){return console.error(yo),yo.response}})(e);return t},getDestinatarioById:async e=>{const t=await(async e=>{try{return await eD.get("".concat(hn,"/findUserByPeticionId/").concat(e))}catch(yo){console.error(yo)}})(e);return t},aprobar:async e=>{const t=await(async e=>{try{return await eD.get("".concat(hn,"/aprobar/").concat(e))}catch(yo){console.error(yo)}})(e);return console.log(t),(null===t||void 0===t?void 0:t.status)||400},denegar:async e=>{const t=await(async e=>{try{return await eD.delete("".concat(hn,"/eliminar/").concat(e))}catch(yo){console.error(yo)}})(e);return(null===t||void 0===t?void 0:t.status)||400},pagarFactura:async(e,t)=>{const n=await(async(e,t)=>{try{return await eD.post("".concat(hn,"/pagarFactura/").concat(e),t)}catch(yo){console.error(yo)}})(e,t);return n},getRetiroPendiente:async()=>{const e=await(async e=>{try{return await eD.get("".concat(hn,"/retiroPen/").concat(e))}catch(yo){console.error(yo)}})(null===s||void 0===s?void 0:s.username);return null!==e&&void 0!==e&&e.status&&200==(null===e||void 0===e?void 0:e.status)?null===e||void 0===e?void 0:e.data:null}}},nD=(e,t)=>{if(0==e.length)return!1;const n=e.find((e=>e.permisoName==t));return!!n&&n.activo},iD="retirar_dividendo",rD="retirar_comsion",sD="recibir_matchingbono",aD="facturar_div",oD="promo_diez_porcent",lD="deuda",cD=()=>{const{userLogged:e,tryLogin:t}=sr(),{savePeticion:n,getRetiroPendiente:r}=tD(),s=(0,i.useRef)(),a=(0,i.useRef)(),[o,l]=(0,i.useState)({isLoading:!0,isLoadingRP:!0,seleccionado:1,retiroActivo:!1,botonDisabled:!1,monto:0}),[c,u]=(0,i.useState)([]),[d,h]=(0,i.useState)(null);(0,i.useEffect)((()=>{p()}),[]);const p=async()=>{const e=await r();h(e),f("isLoadingRP",!1)},f=(e,t)=>{l((n=>({...n,[e]:t})))};return(0,vr.jsxs)("section",{className:"contenido Retiros",children:[(0,vr.jsx)(Er,{ref:s}),(0,vr.jsx)(YL,{ref:a,proceso:async()=>{const i={code:e.wallet.wallet_address,monto:o.monto,tipo:1==o.seleccionado?Ar.RETIRO_WALLET_DIVIDENDO:Ar.RETIRO_WALLET_COMISION},r=await n(i);if(null!==r&&void 0!==r&&r.status&&201==(null===r||void 0===r?void 0:r.status)){await t();const{fecha:e,hora:n}=(()=>{const e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear(),r="".concat(t,"/").concat(n,"/").concat(i);let s=e.getHours();const a=e.getMinutes().toString().padStart(2,"0"),o=s>=12?"pm":"am";return s=s%12||12,{fecha:r,hora:"".concat(s,":").concat(a," ").concat(o)}})();i.hora=n,i.fecha=e,h(i),s.current.showAlert("Solicitud de retiro creada",!0),a.current.show()}else{const e=Cr((null===r||void 0===r?void 0:r.status)||400);s.current.showAlert(e,!1)}}}),(0,vr.jsxs)("section",{className:"titulos titulo-re",children:[(0,vr.jsx)("i",{className:"bi bi-person-gear"}),(0,vr.jsx)("span",{children:"Retiros"})]}),(0,vr.jsxs)("section",{className:"contenido-re",children:[(0,vr.jsxs)("section",{className:"retirar",children:[(0,vr.jsx)("p",{className:"titulo",children:"Select your wallet"}),(0,vr.jsxs)("div",{className:"wallets",children:[m("Divident wallet",e.wallet.wallet_div,1),m("Comission wallet",e.wallet.wallet_com,2)]}),(0,vr.jsx)(YO,{ti:"Wallet address",value:e.usdtAddress,pl:"",block:!1,changeState:()=>{}}),(0,vr.jsx)(YO,{ti:"Amount to withdraw(USDT)",value:o.monto,changeState:f,name:"monto",pl:0}),(0,vr.jsx)("button",{disabled:o.botonDisabled,className:"boton4",onClick:()=>{(()=>{const t=1==o.seleccionado?50:10,n=1==o.seleccionado?e.wallet_div:e.wallet_com,i={invalidValue:"The value you entered is not valid",noWallet:"You have not yet registered your USDT wallet",completeProfile:"Complete your profile to be able to withdraw",insufficientBalance:"You do not have enough balance to withdraw this amount",minWithdrawal:"The minimum withdrawal amount is ".concat(t," USDT"),minBalanceAfterWithdraw:"After withdrawing you need to have at least 25 USDT remaining",retiroActivo:"you already have a pending withdrawal",permisoBloqueado:"You do not have permissions to perform this action"},r=e=>(s.current.showAlert(e,!1),!1);return 1==o.seleccionado&&nD(e.wallet.permisos,iD)||2==o.seleccionado&&nD(e.wallet.permisos,rD)?r(i.permisoBloqueado):d?r(i.retiroActivo):isNaN(parseFloat(o.monto))||function(e){const t=e.toString(),n=t.indexOf(".");return-1!==n&&t.slice(n+1).length>2}(o.monto)?r(i.invalidValue):o.monto>n?r(i.insufficientBalance):o.monto<t?r(i.minWithdrawal):!(1==o.seleccionado&&e.wallet_div-o.monto<25)||r(i.minBalanceAfterWithdraw)})()&&a.current.show()},children:(0,vr.jsx)("span",{children:"Request withdrawal"})})]}),(0,vr.jsxs)("section",{className:"notas",children:[(0,vr.jsx)("p",{className:"textoM2",children:"Important notes:"}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["You need to have your USDT(TRC20) wallet address registered. If you don't have it yet,",(0,vr.jsx)(HL,{to:"Profile",className:"link",children:" click here"})]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["Withdrawal requests: minimum amount of 50 USDT required for the ",(0,vr.jsx)("span",{children:"dividend wallet"})," and minimum amount of 10 USDT required for ",(0,vr.jsx)("span",{children:"commission wallet"}),"."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["All requests will be approved only ",(0,vr.jsx)("span",{children:"Monday through Friday"})," starting at 12:00 a.m. (Miami time)."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["Withdrawal ",(0,vr.jsx)("span",{children:"cost of 3% "}),"for the total amount requested (Administrative expenses)."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["When a withdrawal is requested the dividend wallet ",(0,vr.jsx)("span",{children:"must have at least 25 USDT"}),"."]})})]})]}),(0,vr.jsxs)("section",{className:"historial",children:[(0,vr.jsx)("div",{className:"titulo",children:(0,vr.jsxs)("h2",{children:[(0,vr.jsx)("i",{class:"bi bi-clock-history"})," Pending withdrawals"]})}),(0,vr.jsx)("table",{children:(0,vr.jsx)("tbody",{children:o.isLoadingRP?(0,vr.jsx)("div",{className:"spinner"}):d?(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{children:d.fecha}),(0,vr.jsx)("td",{children:d.hora}),(0,vr.jsx)("td",{children:(0,vr.jsxs)("span",{children:[d.monto," USDT"]})}),(0,vr.jsxs)("td",{className:"e",children:[(0,vr.jsx)("i",{class:"bi bi-hourglass-split"})," Pending"]}),(0,vr.jsx)("td",{children:"rwd"==d.tipo?"Dividend wallet":"Comission wallet"})]}):(0,vr.jsx)("tr",{children:(0,vr.jsx)("p",{className:"aviso",children:"You have no pending withdrawals"})})})})]}),(0,vr.jsxs)("section",{className:"historial",children:[(0,vr.jsx)("div",{className:"titulo",children:(0,vr.jsxs)("h2",{children:[(0,vr.jsx)("i",{class:"bi bi-clock-history"})," History"]})}),(0,vr.jsx)("table",{children:(0,vr.jsx)("tbody",{children:o.isLoading?(0,vr.jsx)("div",{className:"spinner"}):c.length>0?c.map((e=>(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("td",{children:e.date}),(0,vr.jsx)("td",{children:e.hora}),(0,vr.jsx)("td",{children:(0,vr.jsxs)("span",{children:[e.cantidad," USDT"]})}),(0,vr.jsx)("td",{className:1==e.state?"r":"acept",children:1==e.state?(0,vr.jsxs)("span",{children:[(0,vr.jsx)("i",{class:"bi bi-x-circle"})," Denied"]}):(0,vr.jsxs)("span",{children:[(0,vr.jsx)("i",{class:"bi bi-check2-circle"}),"  Approved"]})}),(0,vr.jsx)("td",{children:e.emisor})]}))):(0,vr.jsx)("tr",{children:(0,vr.jsx)("p",{className:"aviso",children:"You have not yet made a withdrawal"})})})})]})]});function m(e,t,n){return(0,vr.jsxs)("div",{onClick:()=>f("seleccionado",n),className:o.seleccionado==n?"seleccionado walletOpcion":"walletOpcion",children:[(0,vr.jsx)("h3",{children:e}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("img",{src:br,alt:"usdt_logo"}),(0,vr.jsx)("span",{children:(t||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")})]})]})}},uD=()=>(0,vr.jsxs)("section",{className:"contenido Tools",children:[(0,vr.jsxs)("div",{className:"titulos sec0-to",children:[(0,vr.jsx)("i",{className:"bi bi-archive"}),(0,vr.jsx)("span",{children:"Tools"})]}),(0,vr.jsxs)("div",{className:"sec1-to",children:[(0,vr.jsx)("p",{children:"Presentation in Spanish"}),(0,vr.jsx)("iframe",{class:"pdf-container",src:"https://drive.google.com/file/d/1zcPhBvi7UQ88dXtx8Sux-dpSxCfHiXBe/preview"})]}),(0,vr.jsxs)("div",{className:"sec2-to",children:[(0,vr.jsx)("p",{children:"Presentation in English"}),(0,vr.jsx)("iframe",{class:"pdf-container",src:"https://drive.google.com/file/d/1Sn7gxBTTJNh6Hs2K5fn48bNKgoDAr5iI/preview"})]})]}),dD=n.p+"static/media/qrms.8b181fc82cd9b273c041.png",hD=e=>{let{item:t}=e;return(0,vr.jsxs)("div",{className:"item-content",children:[(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("h3",{children:t.emisor}),(0,vr.jsxs)("p",{className:"item-date",children:[t.date," ",t.hora]})]}),(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("p",{className:"item-acotacion",children:"Amount"}),(0,vr.jsxs)("h4",{className:"elemento ",children:[t.monto," USDT"]})]}),(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("p",{className:"item-acotacion",children:"Total amount"}),(0,vr.jsxs)("h4",{className:"elemento ",children:[t.montoMax," USDT"]})]}),(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("p",{className:"item-acotacion",children:"Wallet"}),(0,vr.jsx)("h4",{className:"elemento",children:1==(null===t||void 0===t?void 0:t.wallet)?"Dividend wallet":2==(null===t||void 0===t?void 0:t.wallet)?"Comission wallet":"Corporate credit"})]})]})},pD=()=>{const[e,t]=(0,i.useState)({code:"",seleccionado:1,visibleModal:!1,factura:{code:"",fecha:"",hora:"",monto:0,peticion_id:0,tipo:"stppf"},propietario:{apellidos:"",email:"",nombres:"",username:""},loading:!0}),n=(0,i.useRef)(null),r=(0,i.useRef)(null),{userLogged:s,tryLogin:a}=sr(),{getFactura:o,getDestinatarioById:l,pagarFactura:c}=tD(),[u,d]=(0,i.useState)(null),h=(e,n)=>{t((t=>({...t,[e]:n})))},p=t=>{const i="Code not found",r="You do not have enough balance to withdraw this amount",a="After withdrawing you need to have at least 25 USDT remaining",o="You do not have permissions to perform this action",l=e=>(n.current.showAlert(e,!1),!1);return""!=e.code&&e.code?t<=0||t<.5*e.factura.monto?l(r):1==e.seleccionado&&Number(t-.5*e.factura.monto)<25?l(a):1!=e.seleccionado||!nD(s.wallet.permisos,aD)||l(o):l(i)};return(0,vr.jsxs)("section",{className:"PagarFacturas contenido",children:[(0,vr.jsx)(Er,{ref:n}),(0,vr.jsx)(YL,{ref:r,proceso:async()=>{const i=1==e.seleccionado?s.wallet.wallet_div:2==e.seleccionado?s.wallet.wallet_com:s.wallet.wallet_deuda;if(!p(i))return;const o={monto:e.factura.monto/2,wallet:1==e.seleccionado?"div":2==e.seleccionado?"com":"deuda",usernameBeneficiario:e.propietario.username,usernameBenefactor:s.username},l=await c(e.factura.peticion_id,o);var u;null!==l&&void 0!==l&&l.status&&200==(null===l||void 0===l?void 0:l.status)?(n.current.showAlert("Invoice paid correctly",!0),null===r||void 0===r||null===(u=r.current)||void 0===u||u.show(),Hi(t,"visibleModal",!1),await a()):n.current.showAlert(Cr((null===l||void 0===l?void 0:l.status)||400,"factura"),!1)}}),e.visibleModal&&(0,vr.jsxs)("section",{className:"confirmarTransaccionModal",children:[(0,vr.jsx)("div",{className:"overlay"}),(0,vr.jsxs)("section",{className:"confirmarTransaccion-contenido",children:[(0,vr.jsxs)("header",{children:[(0,vr.jsx)("h1",{children:"Transaction details"}),(0,vr.jsx)("button",{onClick:()=>Hi(t,"visibleModal",!1),children:(0,vr.jsx)("i",{class:"bi bi-x"})})]}),(0,vr.jsxs)("div",{className:" ",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsx)("i",{class:"bi bi-person"}),(0,vr.jsx)("span",{children:"Recipient user"})]}),e.loading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("h5",{children:["Username: ",(0,vr.jsx)("span",{children:e.propietario.username})]}),(0,vr.jsxs)("h5",{children:["Name: ",(0,vr.jsx)("span",{children:e.propietario.nombres})]}),(0,vr.jsxs)("h5",{children:["Last name: ",(0,vr.jsx)("span",{children:e.propietario.apellidos})]}),(0,vr.jsxs)("h5",{children:["email: ",(0,vr.jsx)("span",{children:e.propietario.email})]})]})]}),(0,vr.jsxs)("div",{className:"datosDeTranferencia",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsx)("i",{class:"bi bi-coin"}),(0,vr.jsx)("span",{children:"Invoice details"})]}),(0,vr.jsxs)("h5",{children:["Selected wallet: ",(0,vr.jsx)("span",{children:1==e.seleccionado?"Dividend":2==e.seleccionado?"Commision":"Corporate credit"})]}),(0,vr.jsxs)("h5",{children:["Starter pack: ",(0,vr.jsx)("span",{children:gr(e.factura.monto)})]}),(0,vr.jsxs)("h5",{children:["Maximun to pay: ",(0,vr.jsxs)("span",{children:[(e.factura.monto/2).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")||"0.00"," USDT"]})]}),(0,vr.jsxs)("h5",{children:["Total amount: ",(0,vr.jsxs)("span",{children:[e.factura.monto.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")||"0.00"," USDT"]})]}),(0,vr.jsxs)("button",{onClick:()=>{var e;null===r||void 0===r||null===(e=r.current)||void 0===e||e.show(),Hi(t,"visibleModal",!1)},children:[(0,vr.jsx)("i",{class:"bi bi-send"}),"Pay"]})]})]})]}),(0,vr.jsxs)("section",{className:"titulos titulo-pf",children:[(0,vr.jsx)("i",{class:"bi bi-receipt"}),(0,vr.jsx)("span",{children:"Facturas"})]}),(0,vr.jsxs)("section",{className:"contenido-pf",children:[(0,vr.jsxs)("section",{className:"transaccion-area-pf",children:[(0,vr.jsxs)("section",{className:"inputArea",children:[(0,vr.jsx)("p",{className:"titulo",children:"Select your wallet"}),(0,vr.jsxs)("div",{className:"wallets",children:[f("Dividend wallet",null===s||void 0===s?void 0:s.wallet.wallet_div,1),f("Comission wallet",null===s||void 0===s?void 0:s.wallet.wallet_com,2),nD(s.wallet.permisos,lD)&&f("Corporate credit",null===s||void 0===s?void 0:s.wallet.deuda.wallet_deuda,3)]}),(0,vr.jsx)(YO,{ti:"Billing code",value:e.code,name:"code",changeState:h,pl:"Code here"}),(0,vr.jsx)("button",{className:"boton4",onClick:async()=>{var t;if(!p())return;const i=await o(e.code),r=await l(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.peticion_id)||null;null!==i&&void 0!==i&&i.status&&200==(null===i||void 0===i?void 0:i.status)&&(null!==r&&void 0!==r&&r.status||200==(null===r||void 0===r?void 0:r.status))?(h("propietario",null===r||void 0===r?void 0:r.data),h("factura",null===i||void 0===i?void 0:i.data),h("loading",!1),h("visibleModal",!0)):n.current.showAlert(Cr((null===i||void 0===i?void 0:i.status)||400,"factura"),!1)},children:(0,vr.jsx)("span",{children:"Find invoice"})})]}),(0,vr.jsxs)("section",{className:"notas-pf",children:[(0,vr.jsx)("p",{className:"titulo",children:"How to pay the remaining 50%?"}),(0,vr.jsx)("h4",{className:"textoM",children:"Scan the QR code to pay or copy the wallet address into your preferred application."}),(0,vr.jsxs)("div",{className:"copyAddrs",children:[(0,vr.jsx)("h4",{children:"Wallet address:"}),(0,vr.jsxs)("div",{className:"wallet",children:[(0,vr.jsx)("input",{type:"text",id:"wallet",readOnly:!0,value:"TMuMJUSBamBf1d2vhbd4g1p13pUf6N7TtM"}),(0,vr.jsx)("button",{onClick:()=>{document.getElementById("wallet").select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),n.current.showAlert("Address copied successfully",!0)},children:(0,vr.jsx)("i",{class:"bi bi-copy"})})]}),(0,vr.jsxs)("div",{className:"or",children:[(0,vr.jsx)("div",{className:"line"}),(0,vr.jsx)("h4",{children:"Or"}),(0,vr.jsx)("div",{className:"line"})]}),(0,vr.jsxs)("div",{className:"qr",children:[(0,vr.jsx)("h4",{children:"Qr code:"}),(0,vr.jsx)("img",{src:dD,alt:"QR code"})]})]})]})]}),(0,vr.jsx)(Rr,{historial:u,fetchHistory:async()=>{},children:e=>(0,vr.jsx)("tr",{children:(0,vr.jsx)(hD,{item:e})})})]})]});function f(n,i,r){return(0,vr.jsxs)("div",{onClick:()=>Hi(t,"seleccionado",r),className:e.seleccionado==r?"seleccionado walletOpcion":"walletOpcion",children:[(0,vr.jsx)("h3",{children:n}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("img",{src:br,alt:"usdt_logo"}),(0,vr.jsx)("span",{children:(i||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")})]})]})}},fD=e=>{let{item:t}=e;const{userData:n}=vg();return(0,vr.jsxs)("div",{className:"item-content",children:[(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("h3",{children:(null===n||void 0===n?void 0:n.userName)==t.emisor?t.userName:t.emisor}),(0,vr.jsxs)("p",{className:"item-date",children:[t.date," ",t.hora]})]}),(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("p",{className:"item-acotacion",children:"Amount"}),(0,vr.jsxs)("h4",{className:"elemento "+((null===n||void 0===n?void 0:n.userName)===t.emisor?"rojo":"verde"),children:[(null===n||void 0===n?void 0:n.userName)==t.emisor?-t.cantidad:t.cantidad," USDT"]})]}),(0,vr.jsxs)("div",{className:"item-segment",children:[(0,vr.jsx)("p",{className:"item-acotacion",children:"Wallet"}),(0,vr.jsx)("h4",{className:"elemento",children:1==(null===t||void 0===t?void 0:t.status)?"Dividend wallet":"Comission wallet"})]})]})},mD="transferencia realizada con exito",gD=()=>{const{userLogged:e,tryLogin:t}=sr(),{newPeticion:n,fillPeticion:r,getDestinatario:s,destinatario:a,transferir:o}=tD(),l=(0,i.useRef)(),c=(0,i.useRef)(),[u,d]=(0,i.useState)({seleccionado:1,visibleConfirmarTransModal:!1,loading:!0}),[h,p]=(0,i.useState)(null);return(0,vr.jsxs)("section",{className:"contenido contenedor-main-ts",children:[u.visibleConfirmarTransModal&&(0,vr.jsxs)("section",{className:"confirmarTransaccionModal",children:[(0,vr.jsx)("div",{className:"overlay"}),(0,vr.jsxs)("section",{className:"confirmarTransaccion-contenido",children:[(0,vr.jsxs)("header",{children:[(0,vr.jsx)("h1",{children:"Transaction details"}),(0,vr.jsx)("button",{onClick:()=>Hi(d,"visibleConfirmarTransModal",!1),children:(0,vr.jsx)("i",{class:"bi bi-x"})})]}),(0,vr.jsxs)("div",{className:"datosDeTranferencia",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsx)("i",{class:"bi bi-person"}),(0,vr.jsx)("span",{children:"Addressee"})]}),u.loading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("h5",{children:["Username: ",(0,vr.jsx)("span",{children:null===a||void 0===a?void 0:a.username})]}),(0,vr.jsxs)("h5",{children:["Name: ",(0,vr.jsx)("span",{children:null===a||void 0===a?void 0:a.nombres})]}),(0,vr.jsxs)("h5",{children:["Last name: ",(0,vr.jsx)("span",{children:null===a||void 0===a?void 0:a.apellidos})]}),(0,vr.jsxs)("h5",{children:["email: ",(0,vr.jsx)("span",{children:null===a||void 0===a?void 0:a.email})]})]})]}),(0,vr.jsxs)("div",{className:"datosDeTranferencia",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsx)("i",{class:"bi bi-coin"}),(0,vr.jsx)("span",{children:"Amount details"})]}),(0,vr.jsxs)("h5",{children:["Selected wallet: ",(0,vr.jsx)("span",{children:1==u.seleccionado?"Dividend":"Commision"})]}),(0,vr.jsxs)("h5",{children:["Amount: ",(0,vr.jsxs)("span",{children:[n.monto.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")||"0.00"," USDT"]})]}),(0,vr.jsxs)("button",{onClick:()=>{c.current.show(),Hi(d,"visibleConfirmarTransModal",!1)},children:[(0,vr.jsx)("i",{class:"bi bi-send"}),"Transfer"]})]})]})]}),(0,vr.jsx)(Er,{ref:l}),(0,vr.jsx)(YL,{ref:c,proceso:async()=>{r("tipo",1==u.seleccionado?Ar.TRANSFERENCIA_INTERNA_WALLET_DIV:Ar.TRANSFERENCIA_INTERNA_WALLET_COM);const e=await o();e&&200==e?(await t(),c.current.show(),l.current.showAlert(mD,!0)):l.current.showAlert(Cr(400),!1)}}),(0,vr.jsxs)("section",{className:"titulos titulo-ts",children:[(0,vr.jsx)("i",{className:"bi bi-cash-coin"}),(0,vr.jsx)("span",{children:"Internal Transactions"})]}),(0,vr.jsxs)("div",{className:"contenido-ts",children:[(0,vr.jsxs)("section",{className:"transaccion-area-ts",children:[(0,vr.jsxs)("section",{className:"inputArea",children:[(0,vr.jsx)("p",{className:"titulo",children:"Select your wallet"}),(0,vr.jsxs)("div",{className:"wallets",children:[f("Dividend wallet",e.wallet.wallet_div,1),f("Comission wallet",e.wallet.wallet_com,2)]}),(0,vr.jsx)(YO,{ti:"User",value:n.code,name:"code",changeState:r,pl:"Ej:user123"}),(0,vr.jsx)(YO,{ti:"Amount to transfer(USDT)",value:n.monto,name:"monto",changeState:r,pl:0}),(0,vr.jsx)("button",{className:"boton4",onClick:async()=>{if((()=>{const t=1==u.seleccionado?e.wallet.wallet_div:e.wallet.wallet_com,i=1==u.seleccionado?50:10,r={invalidValue:"The value you entered is not valid",notUser:"The user does not exist",completeProfile:"Complete your profile to be able to withdraw",insufficientBalance:"You do not have enough balance to withdraw this amount",minWithdrawal:"The minimum withdrawal amount is ".concat(i," USDT"),minBalanceAfterWithdraw:"After withdrawing you need to have at least 25 USDT remaining",retiroActivo:"You already have a pending withdrawal"},s=e=>(l.current.showAlert(e,!1),!1);return isNaN(parseFloat(n.monto))||(e=>{const t=e.toString(),n=t.indexOf(".");return-1!==n&&t.slice(n+1).length>2})(n.monto)?s(r.invalidValue):n.monto>t?s(r.insufficientBalance):n.monto<i?s(r.minWithdrawal):1===u.seleccionado&&e.wallet_div-n.monto<25?s(r.minBalanceAfterWithdraw):!!n.code||s(r.invalidValue)})()){const e=await s();null!==e&&void 0!==e&&e.status&&200==(null===e||void 0===e?void 0:e.status)?(Hi(d,"visibleConfirmarTransModal",!0),Hi(d,"loading",!1)):l.current.showAlert(Cr((null===e||void 0===e?void 0:e.status)||400),!1)}},children:(0,vr.jsx)("span",{children:"Transfer"})})]}),(0,vr.jsxs)("section",{className:"notas",children:[(0,vr.jsx)("p",{className:"textoM2",children:"Important notes:"}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["You need to have your USDT(TRC20) wallet address registered. If you don't have it yet,",(0,vr.jsx)(HL,{to:"Profile",className:"link",children:" click here"})]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["Withdrawal requests: minimum amount of 50 USDT required for the ",(0,vr.jsx)("span",{children:"dividend wallet"})," and minimum amount of 10 USDT required for ",(0,vr.jsx)("span",{children:"commission wallet"}),"."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["All requests will be approved only ",(0,vr.jsx)("span",{children:"Monday through Friday"})," starting at 12:00 a.m. (Miami time)."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["Withdrawal ",(0,vr.jsx)("span",{children:"cost of 3% "}),"for the total amount requested (Administrative expenses)."]})}),(0,vr.jsx)("p",{className:"textoM",children:(0,vr.jsxs)("li",{children:["When a withdrawal is requested the dividend wallet ",(0,vr.jsx)("span",{children:"must have at least 25 USDT"}),"."]})})]})]}),(0,vr.jsx)(Rr,{historial:h,fetchHistory:async()=>{},children:e=>(0,vr.jsx)("tr",{children:(0,vr.jsx)(fD,{item:e})})})]})]});function f(e,t,n){return(0,vr.jsxs)("div",{onClick:()=>Hi(d,"seleccionado",n),className:u.seleccionado==n?"seleccionado walletOpcion":"walletOpcion",children:[(0,vr.jsx)("h3",{children:e}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("img",{src:br,alt:"usdt_logo"}),(0,vr.jsx)("span",{children:(t||"0.00").toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")})]})]})}},vD=()=>{const[e,t]=(0,i.useState)([]),{userLogged:n}=sr(),{getHistorialAbono:r}=xg(),[s,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{o()}),[]);const o=async()=>{const e=await r(null===n||void 0===n?void 0:n.username);console.log(e),t(e)};return(0,vr.jsxs)("section",{className:"contenido DeudaDetails",children:[(0,vr.jsxs)("header",{className:"titulos",children:[(0,vr.jsx)("i",{className:"bi bi-person-gear"}),(0,vr.jsx)("span",{children:"Debt"})]}),(0,vr.jsxs)("section",{className:"contenido",children:[(0,vr.jsxs)("div",{className:"walletOpcion",children:[(0,vr.jsx)("h3",{children:"Total debt"}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("img",{src:br,alt:"usdt_logo"}),(0,vr.jsxs)("span",{children:[((null===n||void 0===n?void 0:n.wallet.deuda.deuda)||0).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(",",".")," USDT"]})]})]}),(0,vr.jsx)("section",{className:"historial",children:(0,vr.jsx)(Rr,{historial:e,fetchHistory:o,titulo:"Payment history",ic:"bi bi-clock-history",children:e=>(0,vr.jsx)("tr",{children:(0,vr.jsx)(yg,{item:e})})})})]})]})};var yD=n(5323);const _D=n.p+"static/media/advertencia.1ac0ac0116bf86a11597.png",xD=()=>{const[e,t]=(0,i.useState)({pagina:0,visible:!1});let n=(0,yD.zy)();const{userData:r}=vg(),s=(0,i.useRef)(null);(0,i.useEffect)((()=>{(e=>{e&&("unpaid"===e.validity?a("visible",!0):a("visible",!1))})(r)}),[r]);const a=(e,n)=>{t((t=>({...t,[e]:n})))},o=[(0,vr.jsxs)("div",{className:"avisoContent",children:[(0,vr.jsx)("div",{className:"sec0-ev",children:(0,vr.jsx)("img",{src:_D,alt:"signo"})}),(0,vr.jsx)("div",{className:"sec1-ev",children:(0,vr.jsx)("p",{children:"Monthly maintenance payment has not been covered"})}),(0,vr.jsx)("div",{className:"sec2-ev",children:(0,vr.jsx)("p",{children:"You do not have enough balance to pay the monthly maintenance (25 USDT). Certain functions have been suspended until payment is made again."})}),(0,vr.jsx)("div",{className:"sec3-ev",children:(0,vr.jsx)("button",{onClick:()=>{a("pagina",e.pagina+1)},children:(0,vr.jsx)("p",{children:"Buy package of 25 usdt"})})})]}),(0,vr.jsxs)("div",{className:"avisoContent2",children:[(0,vr.jsx)("div",{className:"sec4-ev",children:(0,vr.jsx)("p",{children:"Payment process"})}),(0,vr.jsxs)("div",{className:"sec5-ev",children:[(0,vr.jsx)("span",{className:"line"}),(0,vr.jsx)("p",{children:"1-Scan the QR code"}),(0,vr.jsx)("img",{src:dD,alt:"qr_code"})]}),(0,vr.jsxs)("div",{className:"sec6-ev",children:[(0,vr.jsx)("span",{className:"line"}),(0,vr.jsx)("p",{children:"or"}),(0,vr.jsx)("span",{className:"line"})]}),(0,vr.jsxs)("div",{className:"sec7-ev",children:[(0,vr.jsx)("p",{children:"1-Copy the wallet address"}),(0,vr.jsx)("input",{type:"text",id:"wallet",value:"TMuMJUSBamBf1d2vhbd4g1p13pUf6N7TtM",readOnly:!0}),(0,vr.jsxs)("button",{onClick:()=>{document.getElementById("wallet").select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),s.current.showAlert("the wallet address has been copied",!0)},children:[(0,vr.jsx)("i",{class:"bi bi-copy"})," Copy"]})]}),(0,vr.jsxs)("div",{className:"sec8-ev",children:[(0,vr.jsx)("p",{children:"2-verify the amount"}),(0,vr.jsx)("input",{type:"text",value:"25 USDT",readOnly:!0})]}),(0,vr.jsxs)("div",{className:"sec9-ev",children:[(0,vr.jsx)("p",{children:"3-Finish the process"}),(0,vr.jsx)("button",{onClick:()=>{new xO("Mantenimiento",25).save().then((()=>{s.current.showAlert("transaction completed",!0)}))},children:"Finish"})]})]})];return e.visible&&(0,vr.jsxs)("section",{className:"/Dashboard/packs"===n.pathname?"none":"Aviso",children:[(0,vr.jsx)(Er,{ref:s}),(0,vr.jsx)("div",{className:"overlay-av"}),o[e.pagina]]})},bD=n.p+"static/media/sombra.a7e4f55609e5e3720124.png",wD=n.p+"static/media/builder.6f4466d9b04385d2a3ef.png",SD=n.p+"static/media/bronze.3c2a20745b0a67460047.png",ND=n.p+"static/media/plata.ed6cb6218904572b0f4a.png",TD=n.p+"static/media/gold.ef55156d8dd608bfaafa.png",ED=n.p+"static/media/platinum.615a99197293021d78b9.png",CD=e=>{let{porcent:t,op:n,openClose:i}=e;const r=[null,wD,SD,ND,TD,ED][n]||null;return(0,vr.jsxs)("section",{class:"CardPacks",children:[(0,vr.jsxs)("div",{className:"imgPack",children:[(0,vr.jsx)("img",{src:r,className:"img1",alt:"imgpack"}),(0,vr.jsx)("img",{src:bD,className:"img2",alt:"sombra"})]}),(0,vr.jsxs)("div",{className:"porcentaje",children:[(0,vr.jsxs)("p",{children:["Profit up to ",t+"%"," monthly"]}),(0,vr.jsx)("button",{onClick:i,className:"boton1",children:(0,vr.jsx)("span",{class:"button_top",children:"Buy"})})]})]})},MD=n.p+"static/media/pagometodo.c9f5f0290de19c9a42e7.png",ID=e=>{let{paquete:t,close:n}=e;const r=(0,i.useRef)(),{savePeticion:s}=tD(),[a,o]=(0,i.useState)({monto:0}),l=(0,i.useCallback)((e=>{const t="wallet"===e.target.name;document.getElementById(t).select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),r.current.showAlert("Code copied successfully",!0)}),[]);return(0,vr.jsxs)("div",{className:"modal-contentQr",children:[(0,vr.jsx)(Er,{ref:r}),(0,vr.jsxs)("div",{className:"payment",children:[(0,vr.jsx)("p",{className:"textoM3",children:"Complete the payment"}),(0,vr.jsx)("img",{src:dD,alt:"qr"}),(0,vr.jsxs)("div",{className:"copyAddrs",children:[(0,vr.jsx)("p",{children:"Wallet address to pay"}),(0,vr.jsxs)("div",{className:"wallet",children:[(0,vr.jsx)("input",{type:"text",id:"wallet",readOnly:!0,value:"TMuMJUSBamBf1d2vhbd4g1p13pUf6N7TtM"}),(0,vr.jsx)("button",{onClick:l,children:(0,vr.jsx)("i",{class:"bi bi-copy"})})]})]}),(0,vr.jsxs)("div",{className:"monto",children:[(0,vr.jsx)("p",{children:"Amount"}),(0,vr.jsx)("div",{children:5==t?(0,vr.jsx)("input",{type:"text",id:"wallet",value:a.monto,onChange:e=>Hi(o,"monto",e.target.value)}):(0,vr.jsx)("select",{className:"select-box",value:a.monto,onChange:e=>Hi(o,"monto",e.target.value),children:Bi(t).map((e=>(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsx)("option",{value:e,children:e})})))})})]}),(0,vr.jsx)("button",{className:"finish",onClick:async()=>{const e={monto:a.monto,tipo:Ar.STARTER_PACK},t=await s(e);if(null!==t&&void 0!==t&&t.status&&201==(null===t||void 0===t?void 0:t.status))r.current.showAlert("Invoice created successfully",!0);else{const e=Cr((null===t||void 0===t?void 0:t.status)||400);r.current.showAlert(e,!1)}},children:"Finish payment"}),(0,vr.jsx)("button",{className:"close",onClick:n,children:(0,vr.jsx)("span",{children:"Close"})})]}),(0,vr.jsxs)("div",{className:"notasqr",children:[(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"textoM3",children:"How to make a deposit?"})}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:vO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Scan the Qr code with your payment app"})]}),(0,vr.jsx)("div",{className:"or",children:(0,vr.jsxs)("p",{children:[(0,vr.jsx)("i",{class:"bi bi-dash"})," or ",(0,vr.jsx)("i",{class:"bi bi-dash"})]})}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:yO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Copy the USDT address and amount to pay, then paste them into your payment app"})]}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Transfer only Tether USD TRC20 token (USDT). Transferring other currency will result in the toss of funds"})]}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:"Make sure to correctly send the transaction, verifying the exact amount and that the Wallet is correct. Any sending error will result in the loss of funds."})]})]})]})},AD="1- select an amount and generate your payment code",RD="2- Copy the code so that someone else can pay for the package",PD="The maximum amount that can be paid through this method corresponds to 50%",kD="The remaining amount must be paid via USDT transfer (TRC20)",OD=e=>{let{paquete:t,close:n}=e;const{fillPeticion:r,savePeticion:s,newPeticion:a}=tD(),[o,l]=(0,i.useState)({monto:0,code:""}),c=(0,i.useRef)(),u=()=>{const e=Date.now(),t=Math.floor(1e7*Math.random());return"FAC-".concat(e,"-").concat(t)},d=(0,i.useCallback)((e=>{document.getElementById("code").select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),c.current.showAlert("Code copied successfully",!0)}),[]);return(0,vr.jsxs)("div",{className:"modal-contentQr ",children:[(0,vr.jsx)(Er,{ref:c}),(0,vr.jsxs)("div",{className:"payment",children:[(0,vr.jsx)("p",{className:"textoM3",children:"Complete the payment"}),(0,vr.jsxs)("div",{className:"monto",children:[(0,vr.jsx)("p",{className:"textoM2",children:"1-. Select a quantity"}),(0,vr.jsx)("div",{children:5==t?(0,vr.jsx)("input",{type:"text",id:"code",value:o.monto,onChange:e=>Hi(l,"monto",e.target.value),placeholder:"0"}):(0,vr.jsx)("select",{className:"select-box",value:o.monto,onChange:e=>Hi(l,"monto",e.target.value),children:Bi(t).map((e=>(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsx)("option",{value:e,children:e})})))})})]}),(0,vr.jsx)("button",{className:"finish",onClick:async()=>{if(0==o.monto)return void c.current.showAlert("Invalid option",!1);const e=u(),t={tipo:Ar.PAGO_FACTURA,code:e,monto:o.monto},n=await s(t);if(null!==n&&void 0!==n&&n.status&&201==(null===n||void 0===n?void 0:n.status))Hi(l,"code",e),c.current.showAlert("factura creada correctamente",!0);else{const e=Cr((null===n||void 0===n?void 0:n.status)||400);c.current.showAlert(e,!1),r("code","")}},children:"Generate code"}),(0,vr.jsxs)("div",{className:"copyAddrs",children:[(0,vr.jsx)("p",{className:"textoM2",children:"2-. Copy your code"}),(0,vr.jsxs)("div",{className:"wallet",children:[(0,vr.jsx)("input",{type:"text",id:"code",value:o.code,readOnly:!0}),(0,vr.jsx)("button",{onClick:d,children:(0,vr.jsx)("i",{class:"bi bi-copy"})})]})]}),(0,vr.jsx)("button",{className:"close",onClick:n,children:(0,vr.jsx)("span",{children:"Close"})})]}),(0,vr.jsxs)("div",{className:"notasqr",children:[(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"textoM3",children:"How to make a payment by invoice?"})}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:vO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsx)("p",{children:AD})]}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:yO,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsxs)("p",{children:[RD," "]})]}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsxs)("p",{children:[PD," "]})]}),(0,vr.jsxs)("div",{className:"nota",children:[(0,vr.jsx)("img",{src:_O,className:"imgSec2-qr",alt:"qric"}),(0,vr.jsxs)("p",{children:[kD," "]})]})]})]})},LD=["---","USDT Transfer","Pay by invoice/USDT"],DD=(0,i.forwardRef)(((e,t)=>{let{}=e;const[n,r]=(0,i.useState)({opcionPago:"---",visible:!1,paquete:1});(0,i.useImperativeHandle)(t,(()=>({show(e){r((t=>({...t,visible:!0,paquete:e})))}})));const s=()=>{r((e=>({...e,visible:!1,paquete:1,opcionPago:"---"})))};return n.visible&&(0,vr.jsxs)("section",{className:"qrPago",children:[(0,vr.jsx)("div",{className:"overlay"}),n.opcionPago==LD[0]&&(0,vr.jsx)("div",{className:"modal-contentQr ",children:(0,vr.jsxs)("div",{className:"selector",children:[(0,vr.jsxs)("div",{className:"titulo",children:[(0,vr.jsx)("img",{src:MD,alt:"ic_pago"}),(0,vr.jsx)("p",{children:"Select a payment method"})]}),(0,vr.jsx)("select",{value:n.opcionPago,onChange:e=>r((t=>({...t,opcionPago:e.target.value}))),children:LD.map(((e,t)=>(0,vr.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},t)))})]})}),n.opcionPago==LD[1]&&(0,vr.jsx)(ID,{paquete:n.paquete,close:s}),n.opcionPago==LD[2]&&(0,vr.jsx)(OD,{paquete:n.paquete,close:s})]})})),jD=()=>{const e=(0,i.useRef)(),t=t=>{e.current.show(t)};return(0,vr.jsxs)("section",{className:"contenido Packs",children:[(0,vr.jsx)(DD,{ref:e}),(0,vr.jsxs)("div",{className:"titulos sec0-pa",children:[(0,vr.jsx)("i",{className:"bi bi-boxes"}),(0,vr.jsx)("span",{children:"Starter packs"})]}),(0,vr.jsx)("div",{className:"sec1-pa centrado",children:(0,vr.jsx)(CD,{porcent:5,op:1,openClose:()=>t(1)})}),(0,vr.jsx)("div",{className:"sec2-pa centrado",children:(0,vr.jsx)(CD,{porcent:6,op:2,openClose:()=>t(2)})}),(0,vr.jsx)("div",{className:"sec3-pa centrado",children:(0,vr.jsx)(CD,{porcent:7,op:3,openClose:()=>t(3)})}),(0,vr.jsx)("div",{className:"sec4-pa centrado",children:(0,vr.jsx)(CD,{porcent:8,op:4,openClose:()=>t(4)})}),(0,vr.jsx)("div",{className:"sec5-pa centrado",children:(0,vr.jsx)(CD,{porcent:9,op:5,openClose:()=>t(5)})})]})},UD=(dg(Qa),[{ruta:A,icono:"bi bi-house",titulo:"Home"},{ruta:R,icono:"bi bi-boxes",titulo:"Starter packs"},{ruta:O,icono:"bi bi-people",titulo:"My net"},{ruta:k,icono:"bi bi-diagram-3",titulo:"Genealogy"},{ruta:P,icono:"bi bi-graph-up-arrow",titulo:"benefits"},{ruta:U,icono:"bi bi-person-vcard",titulo:"withdrawals"},{ruta:F,icono:"bi bi-cash-coin",titulo:"Internal transfers"},{ruta:z,icono:"bi bi-receipt",titulo:"Bill Payment"},{ruta:L,icono:"bi bi-bag",titulo:"E-comerce"},{ruta:B,icono:"bi bi-archive",titulo:"Tools"},{ruta:D,icono:"bi bi-exclamation-octagon",titulo:"Support"},{ruta:j,icono:"bi bi-person-gear",titulo:"Edit profile"},{ruta:null,icono:"bi bi-box-arrow-right",titulo:"Logout"}]),zD=e=>{let{toggleMenu:t}=e;const{userLogged:n,logOut:i}=sr(),r=(0,rr.useHistory)(),s=(e,n)=>{e.preventDefault(),n?r.push(n):(e=>{e.preventDefault(),i()})(e),t()};return(0,vr.jsx)("nav",{class:"navegacion",children:(0,vr.jsxs)("ul",{children:[(0,vr.jsx)("h4",{children:"Main menu"}),(0,vr.jsx)("hr",{}),UD.map(((e,t)=>(0,vr.jsx)("li",{children:(0,vr.jsxs)("div",{className:"opcionBoton2",onClick:t=>s(t,e.ruta),children:[(0,vr.jsx)("i",{className:e.icono}),(0,vr.jsx)("span",{children:e.titulo})]})}))),(()=>{var e;const t=((null===n||void 0===n||null===(e=n.wallet)||void 0===e?void 0:e.permisos)||[]).find((e=>"deuda"==e.permisoName));if(t&&0!=t.activo)return(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsx)("li",{children:(0,vr.jsxs)("div",{className:"opcionBoton2",onClick:e=>s(e,V),children:[(0,vr.jsx)("i",{className:"bi bi-credit-card-2-front"}),(0,vr.jsx)("span",{children:"Corporate credit"})]})})})})()]})})},FD=e=>{let{max:t,toggleMenu:n}=e;return(0,vr.jsx)("div",{children:(0,vr.jsxs)("div",{className:"barra-lateral ".concat(t?"mini-barra-lateral":"max-barra-lateral"),children:[(0,vr.jsx)("div",{className:t?"headNav":"headNavMax",children:(0,vr.jsx)("img",{alt:"logo",className:t?"logoNav":"logoNavMax"})}),(0,vr.jsx)(zD,{toggleMenu:n})]})})},VD=()=>{const{logOut:e}=sr();return(0,vr.jsxs)("button",{className:"btnLo",onClick:()=>{e()},children:[(0,vr.jsx)("div",{className:"sign",children:(0,vr.jsx)("svg",{viewBox:"0 0 512 512",children:(0,vr.jsx)("path",{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"})})}),(0,vr.jsx)("div",{className:"text",children:"Logout"})]})},BD=e=>{let{toggleMenu:t}=e;const[n,r]=(0,i.useState)(!0);return(0,vr.jsxs)("section",{className:"headerSec",children:[(0,vr.jsx)("div",{className:"sech1",children:(0,vr.jsx)("button",{className:"btnMenu",type:"button",onClick:e=>(e.preventDefault(),t(),void r(!n)),children:(0,vr.jsx)("i",{class:"bi bi-list"})})}),(0,vr.jsx)("div",{className:"sech2"}),(0,vr.jsx)("div",{className:"sech3"}),(0,vr.jsx)("div",{className:"sech4",children:(0,vr.jsx)(VD,{})})]})},HD=(n.p,()=>{const[e,t]=(0,i.useState)(!0);return(0,vr.jsx)("div",{className:"layout",children:(0,vr.jsxs)("div",{className:"containDash",children:[(0,vr.jsx)("div",{className:e?"sidebar":"sidebar2",children:(0,vr.jsx)(FD,{max:e,toggleMenu:()=>{t(!0)}})}),(0,vr.jsx)("div",{className:"cabeza",children:(0,vr.jsx)(BD,{toggleMenu:()=>{t(!e)}})}),(0,vr.jsxs)("div",{className:"container",children:[(0,vr.jsx)(xD,{}),(0,vr.jsx)("div",{className:"contentSeccion",children:(0,vr.jsxs)(rr.Switch,{children:[(0,vr.jsx)(rr.Route,{path:A,component:Ir}),(0,vr.jsx)(rr.Route,{path:R,component:jD}),(0,vr.jsx)(rr.Route,{path:P,component:Sg}),(0,vr.jsx)(rr.Route,{path:k,component:Tg}),(0,vr.jsx)(rr.Route,{path:O,component:Eg}),(0,vr.jsx)(rr.Route,{path:U,component:cD}),(0,vr.jsx)(rr.Route,{path:F,component:gD}),(0,vr.jsx)(rr.Route,{path:z,component:pD}),(0,vr.jsx)(rr.Route,{path:L,component:PO}),(0,vr.jsx)(rr.Route,{path:V,component:vD}),(0,vr.jsx)(rr.Route,{path:D,component:GO}),(0,vr.jsx)(rr.Route,{path:j,component:RL}),(0,vr.jsx)(rr.Route,{path:B,component:uD})]})})]}),(0,vr.jsx)("div",{className:"footer",children:(0,vr.jsx)("p",{children:"\xa9 2024 Legal Capital Corp."})})]})})}),WD=()=>{const{navigateTo:e,handleChangeState:t,loginRequest:n,tryLogin:r}=sr(),s=(0,i.useRef)(null),[a,o]=(0,i.useState)(!1),l=()=>{const e="Please fill out all fields";return!(!n.credencial||!n.password)||(t=e,s.current&&s.current.showAlert(t,!1),!1);var t},c=async t=>{if(t.preventDefault(),!l())return;const n=await r();if(null!==n&&void 0!==n&&n.status&&200==(null===n||void 0===n?void 0:n.status)){var i;"ADMIN"===(a=null===(i=n.data)||void 0===i?void 0:i.rol)?e("/admin"):"USER"===a&&e(A)}else{const e=Cr((null===n||void 0===n?void 0:n.status)||400);s.current.showAlert(e,!1)}var a};return(0,vr.jsx)("div",{className:"login-seccion",children:a.isLoading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)(Er,{ref:s}),(0,vr.jsxs)("div",{className:"login-main-box",children:[(0,vr.jsxs)("div",{className:"login-box",children:[(0,vr.jsx)("img",{alt:"logo"}),(0,vr.jsxs)("div",{className:"lg",children:[(0,vr.jsx)("hr",{}),(0,vr.jsx)("span",{children:"sing in"}),(0,vr.jsx)("hr",{})]}),(0,vr.jsxs)("form",{children:[(0,vr.jsx)("label",{htmlFor:"username",children:"Username"}),(0,vr.jsx)("input",{type:"text",name:"email",placeholder:"Enter Username",value:n.email,onChange:e=>t("credencial",e.target.value,"login")}),(0,vr.jsx)("label",{htmlFor:"password",children:"Password"}),(0,vr.jsxs)("div",{className:"password",children:[(0,vr.jsx)("input",{type:a?"text":"password",name:"password",placeholder:"Enter Password",value:n.password,onChange:e=>t("password",e.target.value,"login")}),(0,vr.jsx)("button",{className:"show",onClick:e=>(e=>{e.preventDefault(),o(!a)})(e),children:(0,vr.jsx)("i",{className:a?"bi bi-eye-slash":"bi bi-eye"})})]}),(0,vr.jsx)("input",{type:"submit",value:"Login",onClick:e=>c(e)}),(0,vr.jsx)(HL,{className:"fyp",to:"/recovery_password",children:(0,vr.jsx)("p",{children:"Forgot your password?"})})]})]}),(0,vr.jsx)("img",{className:"imagen",alt:"img1"})]})]})})},qD=[{label:"Phone",key:"telefono",block:!1,nodo:""}],GD=()=>{const{r:e}=(0,rr.useParams)(),t=(0,i.useRef)(),{registerRequest:n,registerUser:r,handleChangeState:s}=sr(),[a,o]=(0,i.useState)({lada:"+52",numero:""});(0,i.useEffect)((()=>{s("referido",e,"register")}),[]);const[l,c]=(0,i.useState)({passwordConf:"",showPass:!1,showPass2:!1}),u=(e,t)=>{e.preventDefault(),1==t?Hi(c,"showPass",!l.showPass):Hi(c,"showPass2",!l.showPass2)},d=async e=>{e.preventDefault(),(()=>{const e="Passwords do not match.",i="Password should contain at least 6 characters.",r="There are empty fields",s=e=>{var n;return null===t||void 0===t||null===(n=t.current)||void 0===n||n.showAlert(e,!1),!1};return n.email&&n.password&&l.passwordConf&&n.username&&n.referido?n.password.length<6?s(i):n.password===l.passwordConf||s(e):s(r)})()&&r()};return(0,vr.jsxs)("div",{className:"register-seccion",children:[(0,vr.jsx)(Er,{ref:t}),(0,vr.jsxs)("div",{className:"form-register",children:[(0,vr.jsx)("img",{alt:"logo"}),(0,vr.jsx)("h2",{children:"Sing up"}),(0,vr.jsx)("h4",{children:"Enter your username, email and password to register"}),(0,vr.jsx)("span",{children:"Username:"}),(0,vr.jsx)("input",{type:"text",placeholder:"Enter your Username",value:n.username,onChange:e=>{const t=e.target.value.replace(/[^\w\s]/gi,"").replace(/\s/g,"");s("username",t,"register")}}),(0,vr.jsx)("span",{children:"Email:"}),(0,vr.jsx)("input",{type:"email",placeholder:"Enter your E-mail",value:n.email,onChange:e=>{const t=e.target.value.toLowerCase();s("email",t,"register")}}),(0,vr.jsx)("span",{children:"Password"}),(0,vr.jsxs)("div",{className:"password",children:[(0,vr.jsx)("input",{type:l.showPass?"text":"password",placeholder:"Enter Password",value:n.password,onChange:e=>s("password",e.target.value,"register")}),(0,vr.jsx)("button",{className:"show",onClick:e=>u(e,1),children:(0,vr.jsx)("i",{className:l.showPass?"bi bi-eye-slash":"bi bi-eye"})})]}),(0,vr.jsx)("span",{children:"Confirm your password"}),(0,vr.jsxs)("div",{className:"password",children:[(0,vr.jsx)("input",{type:l.showPass2?"text":"password",placeholder:"confirm your password",value:l.passwordConf,onChange:e=>Hi(c,"passwordConf",e.target.value)}),(0,vr.jsx)("button",{className:"show",onClick:e=>u(e,2),children:(0,vr.jsx)("i",{className:l.showPass2?"bi bi-eye-slash":"bi bi-eye"})})]}),(0,vr.jsx)("span",{children:"Phone"}),qD.map((e=>(0,vr.jsx)("div",{children:"telefono"===e.key&&(0,vr.jsx)(KO,{value:a,setValue:o,ti:"",pl:"Introduce tu n\xfamero",block:!1})},e.key))),(0,vr.jsx)("label",{htmlFor:"reference",children:"Referred by:"}),(0,vr.jsx)("input",{type:"text",name:"referred",id:"referred",readOnly:!0,value:n.referido}),(0,vr.jsx)("h5",{className:"tac",children:'"By registering, you agree to all terms and conditions."'}),(0,vr.jsx)("input",{className:"botons",type:"submit",value:"Register",onClick:e=>d(e)})]}),(0,vr.jsxs)("div",{className:"msj-seccion",children:[(0,vr.jsx)("img",{className:"img1",alt:"img1"}),(0,vr.jsx)("img",{className:"img2",alt:"img2"}),(0,vr.jsx)("span",{children:"Sign up now and start investing in your future!"})]})]})};const YD=()=>{const{usersList:e,getAllUsers:t}=sr(),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!0),c=(0,rr.useHistory)(),u=async()=>{await t(),l(!1)};return(0,i.useEffect)((()=>{u()}),[]),(0,vr.jsxs)("section",{className:"tabla U",children:[(0,vr.jsxs)("div",{className:"encabezado",children:[(0,vr.jsx)("h2",{children:"Usuarios"}),(0,vr.jsxs)("div",{className:"buscador",children:[(0,vr.jsx)("input",{type:"text",placeholder:"Buscar por E-mail...",onChange:e=>a(e.target.value)}),(0,vr.jsx)("button",{onClick:()=>(async()=>{})(),children:(0,vr.jsx)("i",{class:"bi bi-search"})})]}),(0,vr.jsx)("button",{onClick:()=>u(),className:"refresh",children:(0,vr.jsx)("i",{class:"bi bi-arrow-counterclockwise"})})]}),(0,vr.jsxs)("li",{children:[(0,vr.jsx)("span",{className:"column-header",children:"Nombre de usuario"}),(0,vr.jsx)("span",{className:"column-header",children:"E-mail"}),(0,vr.jsx)("span",{className:"column-header",children:"Editar"})]}),o?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsx)("div",{className:"datos",children:(0,vr.jsx)("ul",{children:e.map(((e,t)=>(0,vr.jsxs)("li",{children:[(0,vr.jsx)("span",{children:e.username}),(0,vr.jsx)("span",{children:e.email}),(0,vr.jsx)("div",{className:"editar",children:(0,vr.jsx)("button",{class:"edit-button",onClick:()=>(e=>{c.push("/admin/editar-usuario/"+e.id)})(e),children:(0,vr.jsx)("svg",{class:"edit-svgIcon",viewBox:"0 0 512 512",children:(0,vr.jsx)("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})})})})]},t)))})})})]})},XD=[Ar.RETIRO_WALLET_DIVIDENDO,Ar.RETIRO_WALLET_COMISION],KD=()=>{const{pagosList:e,fetchPeticionesBytipos:t,denegar:n,aprobar:r}=tD(),[s,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{l()}),[]);const o=()=>{const e=document.getElementById("wallets"),t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges()},l=async()=>{a(!0),await t(XD),a(!1)};return(0,vr.jsx)("section",{className:"RetiroAdmin",children:(0,vr.jsxs)("div",{className:"tabla contenidoRetiros",children:[(0,vr.jsxs)("div",{className:"titulo-read",children:[(0,vr.jsx)("p",{children:"Solicitudes de retiros"}),(0,vr.jsx)("button",{className:"sect2-rea",onClick:l,children:(0,vr.jsx)("i",{class:"bi bi-arrow-clockwise"})})]}),(0,vr.jsx)("div",{className:"contenido-read",children:s?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsx)("ul",{children:e.map(((e,t)=>(0,vr.jsxs)("div",{className:"card-retiro",children:[(0,vr.jsxs)("div",{className:"sec1-rea",children:[(0,vr.jsxs)("p",{children:["Usuario: ",e.userName]}),(0,vr.jsx)("tr",{}),(0,vr.jsx)("span",{children:e.email})]}),(0,vr.jsxs)("div",{className:"sec2-rea",children:[(0,vr.jsx)("p",{children:"Cantidad:"})," ",(0,vr.jsx)("tr",{}),(0,vr.jsx)("span",{children:e.monto})]}),(0,vr.jsx)("div",{className:"sec3-rea",children:(0,vr.jsx)("button",{onClick:()=>(async e=>{await r(e),await l()})(e.peticion_id),children:"Notificar de aprobado"})}),(0,vr.jsxs)("div",{className:"sec4-rea",children:[(0,vr.jsx)("p",{children:"Wallet address to pay:"}),(0,vr.jsxs)("div",{className:"wallet",children:[(0,vr.jsx)("span",{id:"wallets",children:e.usdtAddress}),(0,vr.jsx)("button",{onClick:o,children:(0,vr.jsx)("i",{class:"bi bi-copy"})})]})]}),(0,vr.jsx)("button",{onClick:()=>(async e=>{await n(e),await l()})(e.peticion_id),children:"Eliminar"})]})))})})]})})},JD=e=>{let{...t}=e;return(0,vr.jsxs)("label",{class:"toggle-switch",children:[(0,vr.jsx)("input",{type:"checkbox",...t}),(0,vr.jsx)("div",{class:"toggle-switch-background",children:(0,vr.jsx)("div",{class:"toggle-switch-handle"})})]})},$D=[{label:"Nombre de usuario",key:"username",isNumber:!1,nodo:null},{label:"Contrase\xf1a",key:"password",isNumber:!1,nodo:null},{label:"E-mail",key:"email",isNumber:!1,nodo:null},{label:"Nombre",key:"nombres",isNumber:!1,nodo:null},{label:"Apellidos",key:"apellidos",isNumber:!1,nodo:null},{label:"Telefono",key:"telefono",isNumber:!1,nodo:null}],QD=[{label:"StaterPack",key:"staterpack",isNumber:!0,nodo:"wallet"},{label:"wallet de comisiones",key:"wallet_com",isNumber:!0,nodo:"wallet"},{label:"wallet de dividendos",key:"wallet_div",isNumber:!0,nodo:"wallet"},{label:"Ganancias totales",key:"ganancia_total",isNumber:!0,nodo:"wallet"},{label:"Retiros totales",key:"retiro_total",isNumber:!0,nodo:"wallet"},{label:"Direccion de wallet",key:"wallet_address",isNumber:!1,nodo:"wallet"},{label:"Fecha de inscripci\xf3n",key:"fecha_ingreso",isNumber:!1,nodo:"wallet"},{label:"Rango",key:"rango",isNumber:!0,nodo:"wallet"},{label:"Referido",key:"referido",isNumber:!1,nodo:"wallet"}],ZD=[{label:"Bono fast-Track",key:"fast_track",isNumber:!0,nodo:"bonos"},{label:"Bono de igualaci\xf3n",key:"matching",isNumber:!0,nodo:"bonos"},{label:"Bono ingreso residual",key:"membresia_mensual",isNumber:!0,nodo:"bonos"},{label:"Bono rango residual",key:"rango_res",isNumber:!0,nodo:"bonos"},{label:"Bono referencia directa",key:"ref_direct",isNumber:!0,nodo:"bonos"}],ej=[{label:"Deuda",key:"deuda",isNumber:!0,nodo:"deuda"},{label:"Credito corporativo",key:"wallet_deuda",isNumber:!0,nodo:"deuda"}],tj=[{label:"Pagar facturas con dividendos",key:aD,default:!0},{label:"Activar promocion de 10%",key:oD,default:!1},{label:"Matching bono",key:sD,default:!0},{label:"Retirar de Comisiones",key:rD,default:!0},{label:"Retirar de dividendos",key:iD,default:!0},{label:"Activar deuda",key:lD,default:!1}],nj=()=>{const{userSelect:e,getSelectUser:t,navigateTo:n,handleChangeState:r,updateByAdmin:s,updatePermiso:a}=sr(),o=(0,i.useRef)(),{fk:l}=(0,rr.useParams)(),[c,u]=(0,i.useState)({loading:!0,visibleAlert:!1,permisos:{[aD]:!0,[oD]:!0,[sD]:!1,[rD]:!0,[iD]:!0,[lD]:!1}});(0,i.useEffect)((()=>{(async()=>{await t(l),d(),Hi(u,"loading",!1)})()}),[l]);const d=()=>{const t=e.wallet.permisos,n={...c.permisos};tj.forEach((e=>{const i=t.find((t=>t.permisoName==e.key));i&&(console.log(e.key),console.log(i.activo)),n[e.key]=i?i.activo:e.default})),Hi(u,"permisos",n)},h=(t,n)=>{t.isNumber&&(n=Number(n)),r(t.key,n,t.nodo),console.log(e)};return(0,vr.jsx)("section",{className:"EditarUsuario",children:c.loading?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)(Er,{ref:o}),(0,vr.jsxs)("section",{className:"botones",children:[(0,vr.jsx)("div",{children:(0,vr.jsx)("button",{onClick:()=>{n("/admin/gestionar-ususarios")},children:(0,vr.jsx)("p",{children:"Regresar"})})}),(0,vr.jsx)("div",{children:(0,vr.jsx)("button",{onClick:async()=>{await s(e.id_user)},children:(0,vr.jsx)("p",{children:"Guardar"})})}),(0,vr.jsx)("div",{children:(0,vr.jsx)("button",{onClick:()=>{},children:(0,vr.jsx)("p",{children:"Eliminar usuario"})})})]}),(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"titulo-edtu",children:"Datos personales"})}),(0,vr.jsx)("section",{className:"enterData",children:$D.map((t=>(0,vr.jsx)("div",{children:(0,vr.jsx)(Cg,{ti:t.label,value:e[t.key],setValue:e=>h(t,e)})},t.key)))}),(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"titulo-edtu",children:"Datos de oficinal virtual"})}),(0,vr.jsxs)("section",{className:"enterData",children:[QD.map((t=>(0,vr.jsx)("div",{children:(0,vr.jsx)(Cg,{ti:t.label,value:e.wallet[t.key],setValue:e=>h(t,e)})},t.key))),ZD.map((t=>(0,vr.jsx)("div",{children:(0,vr.jsx)(Cg,{ti:t.label,value:e.wallet.bonos[t.key],setValue:e=>h(t,e)})},t.key)))]}),(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"titulo-edtu",children:"Credito corporativo"})}),(0,vr.jsx)("section",{className:"enterData",children:ej.map((t=>(0,vr.jsx)("div",{children:(0,vr.jsx)(Cg,{ti:t.label,value:e.wallet.deuda[t.key],setValue:e=>h(t,e)})},t.key)))}),(0,vr.jsx)("div",{children:(0,vr.jsx)("p",{className:"titulo-edtu",children:"Permisos"})}),(0,vr.jsx)("section",{className:"permisos",children:tj.map((t=>(0,vr.jsxs)("div",{className:"permiso",children:[(0,vr.jsx)(JD,{checked:c.permisos[t.key],onClick:()=>(async(t,n)=>{let i=e.wallet.permisos.find((e=>e.permisoName===t));const r={permiso_id:(null===i||void 0===i?void 0:i.permiso_id)||null,permisoName:t,activo:i?!i.activo:!n,walletId:e.wallet.wallet_id},s=await a(r);null!==s&&void 0!==s&&s.status&&200==(null===s||void 0===s?void 0:s.status)?(o.current.showAlert("changes made correctly",!0),Hi(u,"permisos",{...c.permisos,[t]:!c.permisos[t]}),console.log(c.permisos)):o.current.showAlert(Cr((null===s||void 0===s?void 0:s.status)||400),!0)})(t.key,t.default)}),(0,vr.jsx)("span",{children:t.label})]},t.key)))})]})})},ij=()=>{const{fk:e}=(0,rr.useParams)(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)([]),[h,p]=(0,i.useState)("Pending");(0,i.useEffect)((()=>{const t=Lh(Eh(Kh(),"ordenes/"+e),(t=>{const i=t.val();i?n(i):(console.log(e),console.log("No such document!"))}));return()=>t()}),[]),(0,i.useEffect)((()=>{Object.keys(t).length>0&&(s(t.numeroRastreo||""),p(t.estado))}),[t]);(0,i.useEffect)((()=>{(async()=>{const e=new Ag,n=await e.getUserDataByName(t.owner);c(n||[])})()}),[t]),(0,i.useEffect)((()=>{(new bO).getDireccion(l.firebaseKey,d)}),[l]),(0,i.useEffect)((()=>{Object.keys(u).length>0&&o(!1)}),[u]);return(0,vr.jsx)("section",{className:"tabla eaec",children:a?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("div",{className:"sec0-eaec",children:(0,vr.jsxs)("p",{children:["Orden #",t.numeroOrden]})}),(0,vr.jsxs)("div",{className:"sec1-eaec",children:[(0,vr.jsxs)("div",{className:"sec2-eaec sec-eaec",children:[(0,vr.jsx)("span",{className:"titulo",children:"Editar datos"}),(0,vr.jsx)(Cg,{ti:"Numero de rastreo",value:r,setValue:s,pl:"4946415643164"}),(0,vr.jsx)("p",{children:"Estado del pedido:"}),(0,vr.jsxs)("select",{value:h,onChange:e=>p(e.target.value),children:[(0,vr.jsx)("option",{value:"Pending",children:"Pendiente"}),(0,vr.jsx)("option",{value:"Preparing for shipment",children:"En preparaci\xf3n"}),(0,vr.jsx)("option",{value:"Sent",children:"Enviado"}),(0,vr.jsx)("option",{value:"delivered",children:"Entregado"})]}),(0,vr.jsx)("button",{onClick:()=>{const n=new Rg,i=t;i.numeroRastreo=r,i.estado=h,n.saveOrden(e,i),alert("Orden actualizada")},children:"Guardar cambios"})]}),(0,vr.jsxs)("div",{className:"sec3-eaec sec-eaec",children:[(0,vr.jsx)("span",{className:"titulo",children:"Detalles de la orden"}),(0,vr.jsx)("div",{className:"productos",children:t.productos.map(((e,t)=>(0,vr.jsxs)("div",{className:"productos-rv",children:[(0,vr.jsxs)("div",{className:"item-ecc",children:[(0,vr.jsx)("p",{children:e.nombre}),(0,vr.jsxs)("span",{children:[e.precio," USDT x ",e.cantidad]})]}),(0,vr.jsxs)("p",{children:[e.precio*e.cantidad," USDT"]})]})))}),(0,vr.jsxs)("p",{children:["Total: ",t.totalPagar," USDT"]})]}),(0,vr.jsxs)("div",{className:"sec4-eaec sec-eaec",children:[(0,vr.jsx)("span",{className:"titulo",children:"Informacion de envio"}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Direccion:"})," ",u.direccion,",",u.numExt,",",u.numInt||"S/n","."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Colonia:"})," ",u.colonia,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Ciudad:"})," ",u.city,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Estado:"})," ",u.estadoSeleccionado,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Codigo postal:"})," ",u.cp,"."]})]}),(0,vr.jsxs)("div",{className:"sec5-eaec sec-eaec",children:[(0,vr.jsx)("span",{className:"titulo",children:"Informacion de envio"}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Nombre:"})," ",l.firstName,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Apellidos:"})," ",l.lastName,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Username:"})," ",l.userName,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"E-mail:"})," ",l.email,"."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("span",{children:"Patrocinador:"})," ",l.referredBy,"."]})]})]})]})})},rj=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)("All"),[s,a]=(0,i.useState)(!0),o=(0,rr.useHistory)();(0,i.useEffect)((()=>{l()}),[]);const l=async()=>{(new Rg).getAllOrdenes().then((e=>{t(e),a(!1)}))};return(0,vr.jsx)("section",{className:"tabla aec",children:s?(0,vr.jsx)("div",{className:"spinner"}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("div",{className:"sec0-aec",children:[(0,vr.jsx)("h2",{children:"Ordenes"}),(0,vr.jsxs)("select",{value:n,onChange:e=>r(e),onBlur:()=>{(new Rg).getAllOrdenes()},children:[(0,vr.jsx)("option",{value:"All",children:"Todas"}),(0,vr.jsx)("option",{value:"Pending",children:"Pendiente"}),(0,vr.jsx)("option",{value:"Preparing for shipment",children:"En preparaci\xf3n"}),(0,vr.jsx)("option",{value:"Sent",children:"Enviado"}),(0,vr.jsx)("option",{value:"delivered",children:"Entregado"})]}),(0,vr.jsx)("button",{className:"refresh",children:(0,vr.jsx)("i",{class:"bi bi-arrow-counterclockwise"})})]}),(0,vr.jsx)("div",{className:"sec1-aec",children:e.reverse().map(((e,t)=>(0,vr.jsxs)("div",{className:"ordenes-rv",children:[(0,vr.jsxs)("div",{className:"s11-aec",children:[(0,vr.jsxs)("span",{children:["#",e.numeroOrden]}),(0,vr.jsx)("p",{children:e.estado})]}),(0,vr.jsxs)("div",{className:"s12-aec",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{children:"Fecha:"}),(0,vr.jsx)("span",{children:e.fecha})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{children:"Cliente:"}),(0,vr.jsx)("span",{children:e.owner})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{children:"Total:"}),(0,vr.jsxs)("span",{children:[e.totalPagar," USDT"]})]})]}),(0,vr.jsx)("div",{className:"s11-aec",children:(0,vr.jsx)("button",{onClick:()=>(e=>{o.push("/admin/editar-orden/"+e.id)})(e),children:"Actualizar"})})]})))})]})})},sj=[Ar.PAGO_MENSUALIDAD,Ar.PAGO_STARTER_PACK_FACTURA,Ar.STARTER_PACK],aj=()=>{const{pagosList:e,fetchPeticionesBytipos:t,aprobar:n,denegar:r}=tD(),[s,a]=(0,i.useState)(!0),o=(0,i.useRef)();(0,i.useEffect)((()=>{l()}),[]);const l=async()=>{a(!0),await t(sj),a(!1)},c=async(e,t)=>{u(e?await n(t.peticion_id):await r(t.peticion_id))},u=async e=>{console.log(e);const t=Cr(400);200==e?(o.current.showAlert("Operacion realizada con exito",!0),await l()):o.current.showAlert(t,!1)};return(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsxs)("div",{className:"tabla",children:[(0,vr.jsx)(Er,{ref:o}),(0,vr.jsxs)("div",{className:"encabezado",children:[(0,vr.jsx)("h2",{children:"Pagos pendiente"}),(0,vr.jsx)("div",{className:"buscador"}),(0,vr.jsx)("button",{onClick:()=>l(),className:"refresh",children:(0,vr.jsx)("i",{class:"bi bi-arrow-counterclockwise"})})]}),(0,vr.jsxs)("li",{children:[(0,vr.jsx)("span",{className:"column-header",children:"Nombre de usuario"}),(0,vr.jsx)("span",{className:"column-header",children:"E-mail"}),(0,vr.jsx)("span",{className:"column-header",children:"Cantidad"}),(0,vr.jsx)("span",{className:"column-header",children:"Concepto"}),(0,vr.jsx)("span",{className:"column-header",children:"Aprobar"})]}),(0,vr.jsx)("div",{className:"datos",children:(0,vr.jsx)("ul",{children:s?(0,vr.jsx)("div",{className:"spinner"}):e.map(((e,t)=>{return(0,vr.jsxs)("li",{children:[(0,vr.jsx)("span",{children:e.username}),(0,vr.jsx)("span",{children:e.email}),(0,vr.jsx)("span",{children:e.monto}),(0,vr.jsx)("span",{children:(n=e.tipo,Ar.STARTER_PACK==n?"pago por starter pack":Ar.PAGO_FACTURA==n?"pago de factura":Ar.PAGO_STARTER_PACK_FACTURA==n?"pago por starter pack de factura":Ar.BONO_PAGO_MANTENIMIENTO==n?"Mantenimiento ":void 0)}),(0,vr.jsxs)("div",{className:"aprobar",children:[(0,vr.jsx)("button",{onClick:()=>c(!0,e),className:"check",children:(0,vr.jsx)("i",{class:"bi bi-check-circle-fill"})}),(0,vr.jsx)("button",{onClick:()=>c(!1,e),className:"trash",children:(0,vr.jsx)("i",{class:"bi bi-x-circle-fill"})})]})]},t);var n}))})})]})})},oj=()=>{const e=(0,rr.useHistory)(),t=t=>{1==t?e.push("/admin/gestionar-retiros"):2==t?e.push("/admin/gestionar-ususarios"):3==t?e.push("/admin"):4==t&&e.push("/admin/Ecomerce")};return(0,vr.jsxs)("div",{className:"mainAdmin",children:[(0,vr.jsxs)("header",{children:[(0,vr.jsx)("div",{className:"logo",children:(0,vr.jsx)("img",{alt:"logo"})}),(0,vr.jsx)("div",{className:"cs",children:(0,vr.jsx)(VD,{})})]}),(0,vr.jsxs)("div",{className:"ops",children:[(0,vr.jsxs)("button",{onClick:()=>t(1),children:["Gestionar",(0,vr.jsx)("br",{}),"retiros"]}),(0,vr.jsxs)("button",{onClick:()=>t(2),children:["Gestionar",(0,vr.jsx)("br",{}),"usuarios"]}),(0,vr.jsxs)("button",{onClick:()=>t(3),children:["Aprobar",(0,vr.jsx)("br",{}),"pagos"]}),(0,vr.jsx)("button",{onClick:()=>t(4),children:"Ecomerce"})]}),(0,vr.jsx)("div",{className:"linkC",children:(0,vr.jsx)(xr,{username:"Administrador"})}),(0,vr.jsx)("div",{className:"contenido-A",children:(0,vr.jsxs)(rr.Switch,{children:[(0,vr.jsx)(rr.Route,{path:"/admin/gestionar-ususarios",component:function(){return(0,vr.jsx)(vr.Fragment,{children:(0,vr.jsx)(YD,{})})}}),(0,vr.jsx)(rr.Route,{path:"/admin/gestionar-retiros",component:KD}),(0,vr.jsx)(rr.Route,{path:"/admin/editar-usuario/:fk?",component:nj}),(0,vr.jsx)(rr.Route,{path:"/admin/Ecomerce/",component:rj}),(0,vr.jsx)(rr.Route,{path:"/admin/editar-orden/:fk?",component:ij}),(0,vr.jsx)(rr.Route,{path:"/admin",component:aj})]})})]})},lj=n.p+"static/media/Logo_1.aad1b99bbf59c450c9f4.png";const cj=class{constructor(e,t){this.sendEmail=()=>{WO("service_033kgeg","template_20tw3vi",{code:this.code,from_name:this.email},{publicKey:"0wCoAjcnZT2N0PVfE"}).then((()=>{console.log("SUCCESS!")}),(e=>{console.log("FAILED...",e.text)}))},this.code=t,this.email=e}};const uj=function(e){const[t,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(100);return(0,i.useEffect)((()=>{let t;return n(e.visible),e.visible?t=setInterval((()=>{s((e=>e<=0?(clearInterval(t),n(!1),0):e-1))}),60):s(100),()=>clearInterval(t)}),[e.visible]),(0,vr.jsx)("div",{children:(0,vr.jsxs)("div",{className:"animated-div ".concat(t?"visible":""),children:[(0,vr.jsx)("div",{className:e.color?"texto-green":"texto-red",children:(0,vr.jsx)("span",{children:e.text})}),t&&(0,vr.jsx)("div",{className:"progress-container",children:(0,vr.jsx)("div",{className:"progress-bar",style:{width:"".concat(r,"%")}})})]})})},dj=n.p+"static/media/palomita.fb7d7091878e7ed26d5d.png",hj=dg(Qa),pj=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(0),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),c=(0,rr.useHistory)(),[u,d]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[f,m]=(0,i.useState)(""),[g,v]=(0,i.useState)(""),[y,_]=(0,i.useState)(""),[x,b]=(0,i.useState)([]),[w,S]=(0,i.useState)(!1),N=async t=>{t.preventDefault();try{const t=new Ag(b);await t.getUserDataOnly(e);const i=await function(e,t,n){return ka(e.app)?Promise.reject(sp(e)):qf(ws(e),Rf.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Gf(e),t}))}(hj,e,x.password),s=i.user;await function(e,t){return Yf(ws(e),null,t)}(s,g);const a=x;a.password=g,b(a),t.editAnyUser(x),r(n+1)}catch(u){console.log("Error al cambiar la contrase\xf1a: ".concat(u.message))}},T=[(0,vr.jsxs)("form",{class:"form",children:[(0,vr.jsx)("img",{src:lj,alt:"logo"}),(0,vr.jsx)("p",{class:"login",children:"Reset your password"}),(0,vr.jsx)("p",{children:"You will be sent an email with a code."}),(0,vr.jsxs)("div",{class:"inputContainer",children:[(0,vr.jsx)("input",{type:"button",value:"Send code",className:"submit",onClick:async()=>{e?(p(""),r(n+1),(()=>{const t=Math.floor(1e5+9e5*Math.random());a(t),new cj(e,t).sendEmail()})()):p("Please enter your email")}}),(0,vr.jsx)("p",{className:"error",children:h}),(0,vr.jsx)("input",{value:e,placeholder:"enter your email",type:"text",className:"fInput email",onChange:e=>t(e.target.value)})]})]}),(0,vr.jsxs)("form",{class:"form",children:[(0,vr.jsx)("img",{src:lj,alt:"logo"}),(0,vr.jsx)("p",{class:"login",children:"Reset your password"}),(0,vr.jsx)("p",{children:"Enter the code sent to your email."}),(0,vr.jsxs)("div",{class:"inputContainer",children:[(0,vr.jsx)("input",{type:"button",value:"Send code",className:"submit",onClick:()=>{s==o?(r(n+1),p("")):p("The code do not match")}}),(0,vr.jsx)("p",{className:"error",children:h}),(0,vr.jsx)("input",{value:o,placeholder:"enter the code",type:"text",className:"fInput email",onChange:e=>l(e.target.value)})]})]}),(0,vr.jsxs)("form",{class:"form",children:[(0,vr.jsx)("img",{src:lj,alt:"logo"}),(0,vr.jsx)("p",{class:"login",children:"Reset your password"}),(0,vr.jsx)("p",{className:"p2",children:"Chosse a new password"}),(0,vr.jsxs)("div",{class:"inputContainer2",children:[(0,vr.jsx)("p",{className:"error",children:h}),(0,vr.jsx)("input",{placeholder:"Enter your password",value:g,type:"password",class:"fInput2 email",onChange:e=>v(e.target.value)}),(0,vr.jsx)("p",{className:"p2",children:"Chosse a new password"}),(0,vr.jsx)("p",{className:"error",children:f}),(0,vr.jsx)("input",{placeholder:"Confirm your email",value:y,type:"password",class:"fInput2 email",onChange:e=>_(e.target.value)}),(0,vr.jsx)("input",{className:"end",type:"button",value:"next",onClick:e=>(async e=>{g!==y?(p("Passwords do not match"),m("Passwords do not match")):g.length<6?(p("Password must contain at least 6 characters"),m("")):(p(""),m(""),N(e))})(e)})]})]}),(0,vr.jsxs)("form",{class:"form",children:[(0,vr.jsx)("img",{src:lj,alt:"logo"}),(0,vr.jsx)("p",{class:"login",children:"Your password has been restored"}),(0,vr.jsxs)("div",{class:"inputContainer2",children:[(0,vr.jsx)("img",{className:"img2",src:dj,alt:"Correct"}),(0,vr.jsx)("input",{className:"end",type:"button",value:"Return to login",onClick:()=>{c.push("/")}})]})]})];return(0,vr.jsxs)("section",{className:"Fp",children:[(0,vr.jsx)(uj,{visible:w,color:!0,text:"The password has been changed"}),T[n]]})},fj=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=null!==e&&void 0!==e?e:{};let s=new xi;return t&&("boolean"===typeof t?s.push(Cn):s.push(Mn(t.extraArgument))),s},{reducer:n,middleware:i,devTools:r=!0,preloadedState:s,enhancers:a}=e||{};let o,l;if("function"===typeof n)o=n;else{if(!wn(n))throw new Error(Fi(1));o=Nn(n)}l="function"===typeof i?i(t):t();let c=Tn;r&&(c=yi({trace:!1,..."object"===typeof r&&r}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(yn(15))};const a={getState:r.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s(e,...n)}},o=t.map((e=>e(a)));return s=Tn(...o)(r.dispatch),{...r,dispatch:s}}}(...l),d=Ti(u);return Sn(o,s,c(..."function"===typeof a?a(d):d()))}({reducer:{user:ir,solicitud:ZL},preloadedState:{user:localStorage.getItem("userState")?JSON.parse(localStorage.getItem("userState")):void 0}});fj.subscribe((()=>{const e=fj.getState().user;localStorage.setItem("userState",JSON.stringify(e))}));const mj=function(){return(0,vr.jsx)(N,{store:fj,children:(0,vr.jsx)(gg,{children:(0,vr.jsx)(jL,{children:(0,vr.jsx)("div",{className:"App",children:(0,vr.jsxs)(rr.Switch,{children:[(0,vr.jsx)(rr.Route,{path:H,component:oj}),(0,vr.jsx)(rr.Route,{path:W,component:GD}),(0,vr.jsx)(rr.Route,{path:q,component:HD}),(0,vr.jsx)(rr.Route,{path:G,component:pj}),(0,vr.jsx)(rr.Route,{path:Y,component:WD})]})})})})})};t.createRoot(document.getElementById("root")).render((0,vr.jsx)(mj,{}))})()})();
//# sourceMappingURL=main.5494a9ac.js.map